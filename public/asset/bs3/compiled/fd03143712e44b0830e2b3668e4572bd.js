/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)
},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n});/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */
jQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(4>s.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return i===!0||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&a.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var a;return n===!1?e.removeAttr(t,r):(a=e.propFix[r]||r,a in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr('"+c+"') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(g=e.uaMatch(navigator.userAgent),h={},g.browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),i)};var j=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=a||document,a=!a.nodeType&&a[0]||a,a=a.ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\b(?:"+S+")\\b"),H=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window);/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(".item"),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(a){a&&a.target!=this.$element[0]||(this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse"))};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(a){a&&a.target!=this.$element[0]||(this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse"))};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle="collapse"][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e='[data-toggle="dropdown"]',f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.trigger("focus")}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=f.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+', [role="menu"], [role="listbox"]',f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()},b.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},b.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},b.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.trigger("focus")})})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=e,l=this.$element.parent(),m=this.getPosition(l);e="bottom"==e&&h.top+h.height+j-m.scroll>m.height?"top":"top"==e&&h.top-m.scroll-j<0?"bottom":"right"==e&&h.right+i>m.width?"left":"left"==e&&h.left-i<m.left?"right":e,d.removeClass(k).addClass(e)}var n=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(n,e),this.hoverState=null;var o=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,o).emulateTransitionEnd(150):o()}},b.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scrollspy",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight),d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:e.top}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery);/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 * Improvements by Sbastien Malot
 * Improvements by Yun Lai
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(c){function f(){return new Date(Date.UTC.apply(Date,arguments))}function a(){var g=new Date();return f(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),0)}var e=function(h,g){var i=this;this.element=c(h);this.language=g.language||this.element.data("date-language")||"en";this.language=this.language in d?this.language:"en";this.isRTL=d[this.language].rtl||false;this.formatType=g.formatType||this.element.data("format-type")||"standard";this.format=b.parseFormat(g.format||this.element.data("date-format")||d[this.language].format||b.getDefaultFormat(this.formatType,"input"),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is("input");this.bootcssVer=this.isInput?(this.element.is(".form-control")?3:2):(this.bootcssVer=this.element.is(".input-group")?3:2);this.component=this.element.is(".date")?(this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent()):false;this.componentReset=this.element.is(".date")?(this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-remove").parent():this.element.find(".add-on .icon-remove").parent()):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.linkField=g.linkField||this.element.data("link-field")||false;this.linkFormat=b.parseFormat(g.linkFormat||this.element.data("link-format")||b.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=g.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=g.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=g.showMeridian||this.element.data("show-meridian")||false;this.initialDate=g.initialDate||new Date();this._attachEvents();this.formatViewType="datetime";if("formatViewType" in g){this.formatViewType=g.formatViewType}else{if("formatViewType" in this.element.data()){this.formatViewType=this.element.data("formatViewType")}}this.minView=0;if("minView" in g){this.minView=g.minView}else{if("minView" in this.element.data()){this.minView=this.element.data("min-view")}}this.minView=b.convertViewMode(this.minView);this.maxView=b.modes.length-1;if("maxView" in g){this.maxView=g.maxView}else{if("maxView" in this.element.data()){this.maxView=this.element.data("max-view")}}this.maxView=b.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if("wheelViewModeNavigation" in g){this.wheelViewModeNavigation=g.wheelViewModeNavigation}else{if("wheelViewModeNavigation" in this.element.data()){this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")}}this.wheelViewModeNavigationInverseDirection=false;if("wheelViewModeNavigationInverseDirection" in g){this.wheelViewModeNavigationInverseDirection=g.wheelViewModeNavigationInverseDirection}else{if("wheelViewModeNavigationInverseDirection" in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")}}this.wheelViewModeNavigationDelay=100;if("wheelViewModeNavigationDelay" in g){this.wheelViewModeNavigationDelay=g.wheelViewModeNavigationDelay}else{if("wheelViewModeNavigationDelay" in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")}}this.startViewMode=2;if("startView" in g){this.startViewMode=g.startView}else{if("startView" in this.element.data()){this.startViewMode=this.element.data("start-view")}}this.startViewMode=b.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if("viewSelect" in g){this.viewSelect=g.viewSelect}else{if("viewSelect" in this.element.data()){this.viewSelect=this.element.data("view-select")}}this.viewSelect=b.convertViewMode(this.viewSelect);this.forceParse=true;if("forceParse" in g){this.forceParse=g.forceParse}else{if("dateForceParse" in this.element.data()){this.forceParse=this.element.data("date-force-parse")}}this.picker=c((this.bootcssVer==3)?b.templateV3:b.template).appendTo(this.isInline?this.element:"body").on({click:c.proxy(this.click,this),mousedown:c.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if(c.fn.mousewheel){this.picker.on({mousewheel:c.proxy(this.mousewheel,this)})}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")}}if(this.isInline){this.picker.addClass("datetimepicker-inline")}else{this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu")}if(this.isRTL){this.picker.addClass("datetimepicker-rtl");if(this.bootcssVer==3){this.picker.find(".prev span, .next span").toggleClass("glyphicon-arrow-left glyphicon-arrow-right")}else{this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}}c(document).on("mousedown",function(j){if(c(j.target).closest(".datetimepicker").length===0){i.hide()}});this.autoclose=false;if("autoclose" in g){this.autoclose=g.autoclose}else{if("dateAutoclose" in this.element.data()){this.autoclose=this.element.data("date-autoclose")}}this.keyboardNavigation=true;if("keyboardNavigation" in g){this.keyboardNavigation=g.keyboardNavigation}else{if("dateKeyboardNavigation" in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}}this.todayBtn=(g.todayBtn||this.element.data("date-today-btn")||false);this.todayHighlight=(g.todayHighlight||this.element.data("date-today-highlight")||false);this.weekStart=((g.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7);this.weekEnd=((this.weekStart+6)%7);this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(g.startDate||this.element.data("date-startdate"));this.setEndDate(g.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(g.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show()}};e.prototype={constructor:e,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:c.proxy(this.show,this),keyup:c.proxy(this.update,this),keydown:c.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:c.proxy(this.show,this),keyup:c.proxy(this.update,this),keydown:c.proxy(this.keydown,this)}],[this.component,{click:c.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:c.proxy(this.reset,this)}])}}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:c.proxy(this.show,this)}]]}}}for(var g=0,h,j;g<this._events.length;g++){h=this._events[g][0];j=this._events[g][1];h.on(j)}},_detachEvents:function(){for(var g=0,h,j;g<this._events.length;g++){h=this._events[g][0];j=this._events[g][1];h.off(j)}this._events=[]},show:function(g){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update()}this.place();c(window).on("resize",c.proxy(this.place,this));if(g){g.stopPropagation();g.preventDefault()}this.isVisible=true;this.element.trigger({type:"show",date:this.date})},hide:function(g){if(!this.isVisible){return}if(this.isInline){return}this.picker.hide();c(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){c(document).off("mousedown",this.hide)}if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this.isVisible=false;this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var g=this.getUTCDate();return new Date(g.getTime()+(g.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(g){this.setUTCDate(new Date(g.getTime()-(g.getTimezoneOffset()*60000)))},setUTCDate:function(g){if(g>=this.startDate&&g<=this.endDate){this.date=g;this.setValue();this.viewDate=this.date;this.fill()}else{this.element.trigger({type:"outOfRange",date:g,startDate:this.startDate,endDate:this.endDate})}},setFormat:function(h){this.format=b.parseFormat(h,this.formatType);var g;if(this.isInput){g=this.element}else{if(this.component){g=this.element.find("input")}}if(g&&g.val()){this.setValue()}},setValue:function(){var g=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(g)}this.element.data("date",g)}else{this.element.val(g)}if(this.linkField){c("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))}},getFormattedDate:function(g){if(g==undefined){g=this.format}return b.formatDate(this.date,g,this.language,this.formatType)},setStartDate:function(g){this.startDate=g||-Infinity;if(this.startDate!==-Infinity){this.startDate=b.parseDate(this.startDate,this.format,this.language,this.formatType)}this.update();this.updateNavArrows()},setEndDate:function(g){this.endDate=g||Infinity;if(this.endDate!==Infinity){this.endDate=b.parseDate(this.endDate,this.format,this.language,this.formatType)}this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(g){this.daysOfWeekDisabled=g||[];if(!c.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=c.map(this.daysOfWeekDisabled,function(h){return parseInt(h,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var g=0;c("div").each(function(){var l=parseInt(c(this).css("zIndex"),10);if(l>g){g=l}});var k=g+10;var j,i,h;if(this.component){j=this.component.offset();h=j.left;if(this.pickerPosition=="bottom-left"||this.pickerPosition=="top-left"){h+=this.component.outerWidth()-this.picker.outerWidth()}}else{j=this.element.offset();h=j.left}if(this.pickerPosition=="top-left"||this.pickerPosition=="top-right"){i=j.top-this.picker.outerHeight()}else{i=j.top+this.height}this.picker.css({top:i,left:h,zIndex:k})},update:function(){var g,h=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){g=arguments[0];h=true}else{g=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate;if(typeof g=="string"||g instanceof String){g=g.replace(/^\s+|\s+$/g,"")}}if(!g){g=new Date();h=false}this.date=b.parseDate(g,this.format,this.language,this.formatType);if(h){this.setValue()}if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else{if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var g=this.weekStart,h="<tr>";while(g<this.weekStart+7){h+='<th class="dow">'+d[this.language].daysMin[(g++)%7]+"</th>"}h+="</tr>";this.picker.find(".datetimepicker-days thead").append(h)},fillMonths:function(){var h="",g=0;while(g<12){h+='<span class="month">'+d[this.language].monthsShort[g++]+"</span>"}this.picker.find(".datetimepicker-months td").html(h)},fill:function(){if(this.date==null||this.viewDate==null){return}var E=new Date(this.viewDate),q=E.getUTCFullYear(),F=E.getUTCMonth(),j=E.getUTCDate(),z=E.getUTCHours(),u=E.getUTCMinutes(),v=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,A=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,l=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,w=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,n=(new f(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),D=new Date();this.picker.find(".datetimepicker-days thead th:eq(1)").text(d[this.language].months[F]+" "+q);if(this.formatViewType=="time"){var B=z%12?z%12:12;var h=(B<10?"0":"")+B;var m=(u<10?"0":"")+u;var H=d[this.language].meridiem[z<12?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(h+":"+m+" "+H.toUpperCase());this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(h+":"+m+" "+H.toUpperCase())}else{this.picker.find(".datetimepicker-hours thead th:eq(1)").text(j+" "+d[this.language].months[F]+" "+q);this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(j+" "+d[this.language].months[F]+" "+q)}this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn!==false);this.updateNavArrows();this.fillMonths();var I=f(q,F-1,28,0,0,0,0),y=b.getDaysInMonth(I.getUTCFullYear(),I.getUTCMonth());I.setUTCDate(y);I.setUTCDate(y-(I.getUTCDay()-this.weekStart+7)%7);var g=new Date(I);g.setUTCDate(g.getUTCDate()+42);g=g.valueOf();var o=[];var r;while(I.valueOf()<g){if(I.getUTCDay()==this.weekStart){o.push("<tr>")}r="";if(I.getUTCFullYear()<q||(I.getUTCFullYear()==q&&I.getUTCMonth()<F)){r+=" old"}else{if(I.getUTCFullYear()>q||(I.getUTCFullYear()==q&&I.getUTCMonth()>F)){r+=" new"}}if(this.todayHighlight&&I.getUTCFullYear()==D.getFullYear()&&I.getUTCMonth()==D.getMonth()&&I.getUTCDate()==D.getDate()){r+=" today"}if(I.valueOf()==n){r+=" active"}if((I.valueOf()+86400000)<=this.startDate||I.valueOf()>this.endDate||c.inArray(I.getUTCDay(),this.daysOfWeekDisabled)!==-1){r+=" disabled"}o.push('<td class="day'+r+'">'+I.getUTCDate()+"</td>");if(I.getUTCDay()==this.weekEnd){o.push("</tr>")}I.setUTCDate(I.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(o.join(""));o=[];var s="",C="",p="";for(var x=0;x<24;x++){var t=f(q,F,j,x);r="";if((t.valueOf()+3600000)<=this.startDate||t.valueOf()>this.endDate){r+=" disabled"}else{if(z==x){r+=" active"}}if(this.showMeridian&&d[this.language].meridiem.length==2){C=(x<12?d[this.language].meridiem[0]:d[this.language].meridiem[1]);if(C!=p){if(p!=""){o.push("</fieldset>")}o.push('<fieldset class="hour"><legend>'+C.toUpperCase()+"</legend>")}p=C;s=(x%12?x%12:12);o.push('<span class="hour'+r+" hour_"+(x<12?"am":"pm")+'">'+s+"</span>");if(x==23){o.push("</fieldset>")}}else{s=x+":00";o.push('<span class="hour'+r+'">'+s+"</span>")}}this.picker.find(".datetimepicker-hours td").html(o.join(""));o=[];s="",C="",p="";for(var x=0;x<60;x+=this.minuteStep){var t=f(q,F,j,z,x,0);r="";if(t.valueOf()<this.startDate||t.valueOf()>this.endDate){r+=" disabled"}else{if(Math.floor(u/this.minuteStep)==Math.floor(x/this.minuteStep)){r+=" active"}}if(this.showMeridian&&d[this.language].meridiem.length==2){C=(z<12?d[this.language].meridiem[0]:d[this.language].meridiem[1]);if(C!=p){if(p!=""){o.push("</fieldset>")}o.push('<fieldset class="minute"><legend>'+C.toUpperCase()+"</legend>")}p=C;s=(z%12?z%12:12);o.push('<span class="minute'+r+'">'+s+":"+(x<10?"0"+x:x)+"</span>");if(x==59){o.push("</fieldset>")}}else{s=x+":00";o.push('<span class="minute'+r+'">'+z+":"+(x<10?"0"+x:x)+"</span>")}}this.picker.find(".datetimepicker-minutes td").html(o.join(""));var J=this.date.getUTCFullYear();var k=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(q).end().find("span").removeClass("active");if(J==q){k.eq(this.date.getUTCMonth()).addClass("active")}if(q<v||q>l){k.addClass("disabled")}if(q==v){k.slice(0,A).addClass("disabled")}if(q==l){k.slice(w+1).addClass("disabled")}o="";q=parseInt(q/10,10)*10;var G=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(q+"-"+(q+9)).end().find("td");q-=1;for(var x=-1;x<11;x++){o+='<span class="year'+(x==-1||x==10?" old":"")+(J==q?" active":"")+(q<v||q>l?" disabled":"")+'">'+q+"</span>";q+=1}G.html(o);this.place()},updateNavArrows:function(){var k=new Date(this.viewDate),i=k.getUTCFullYear(),j=k.getUTCMonth(),h=k.getUTCDate(),g=k.getUTCHours();switch(this.viewMode){case 0:if(this.startDate!==-Infinity&&i<=this.startDate.getUTCFullYear()&&j<=this.startDate.getUTCMonth()&&h<=this.startDate.getUTCDate()&&g<=this.startDate.getUTCHours()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&i>=this.endDate.getUTCFullYear()&&j>=this.endDate.getUTCMonth()&&h>=this.endDate.getUTCDate()&&g>=this.endDate.getUTCHours()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:if(this.startDate!==-Infinity&&i<=this.startDate.getUTCFullYear()&&j<=this.startDate.getUTCMonth()&&h<=this.startDate.getUTCDate()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&i>=this.endDate.getUTCFullYear()&&j>=this.endDate.getUTCMonth()&&h>=this.endDate.getUTCDate()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 2:if(this.startDate!==-Infinity&&i<=this.startDate.getUTCFullYear()&&j<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&i>=this.endDate.getUTCFullYear()&&j>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 3:case 4:if(this.startDate!==-Infinity&&i<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&i>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},mousewheel:function(h){h.preventDefault();h.stopPropagation();if(this.wheelPause){return}this.wheelPause=true;var g=h.originalEvent;var j=g.wheelDelta;var i=j>0?1:(j===0)?0:-1;if(this.wheelViewModeNavigationInverseDirection){i=-i}this.showMode(i);setTimeout(c.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay)},click:function(k){k.stopPropagation();k.preventDefault();var l=c(k.target).closest("span, td, th, legend");if(l.length==1){if(l.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(l[0].nodeName.toLowerCase()){case"th":switch(l[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var g=b.modes[this.viewMode].navStep*(l[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,g);break;case 1:this.viewDate=this.moveDate(this.viewDate,g);break;case 2:this.viewDate=this.moveMonth(this.viewDate,g);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,g);break}this.fill();break;case"today":var h=new Date();h=f(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),0);if(h<this.startDate){h=this.startDate}else{if(h>this.endDate){h=this.endDate}}this.viewMode=this.startViewMode;this.showMode(0);this._setDate(h);this.fill();if(this.autoclose){this.hide()}break}break;case"span":if(!l.is(".disabled")){var n=this.viewDate.getUTCFullYear(),m=this.viewDate.getUTCMonth(),o=this.viewDate.getUTCDate(),p=this.viewDate.getUTCHours(),i=this.viewDate.getUTCMinutes(),q=this.viewDate.getUTCSeconds();if(l.is(".month")){this.viewDate.setUTCDate(1);m=l.parent().find("span").index(l);o=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(m);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.viewSelect>=3){this._setDate(f(n,m,o,p,i,q,0))}}else{if(l.is(".year")){this.viewDate.setUTCDate(1);n=parseInt(l.text(),10)||0;this.viewDate.setUTCFullYear(n);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.viewSelect>=4){this._setDate(f(n,m,o,p,i,q,0))}}else{if(l.is(".hour")){p=parseInt(l.text(),10)||0;if(l.hasClass("hour_am")||l.hasClass("hour_pm")){if(p==12&&l.hasClass("hour_am")){p=0}else{if(p!=12&&l.hasClass("hour_pm")){p+=12}}}this.viewDate.setUTCHours(p);this.element.trigger({type:"changeHour",date:this.viewDate});if(this.viewSelect>=1){this._setDate(f(n,m,o,p,i,q,0))}}else{if(l.is(".minute")){i=parseInt(l.text().substr(l.text().indexOf(":")+1),10)||0;this.viewDate.setUTCMinutes(i);this.element.trigger({type:"changeMinute",date:this.viewDate});if(this.viewSelect>=0){this._setDate(f(n,m,o,p,i,q,0))}}}}}if(this.viewMode!=0){var j=this.viewMode;this.showMode(-1);this.fill();if(j==this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}}break;case"td":if(l.is(".day")&&!l.is(".disabled")){var o=parseInt(l.text(),10)||1;var n=this.viewDate.getUTCFullYear(),m=this.viewDate.getUTCMonth(),p=this.viewDate.getUTCHours(),i=this.viewDate.getUTCMinutes(),q=this.viewDate.getUTCSeconds();if(l.is(".old")){if(m===0){m=11;n-=1}else{m-=1}}else{if(l.is(".new")){if(m==11){m=0;n+=1}else{m+=1}}}this.viewDate.setUTCFullYear(n);this.viewDate.setUTCMonth(m,o);this.element.trigger({type:"changeDay",date:this.viewDate});if(this.viewSelect>=2){this._setDate(f(n,m,o,p,i,q,0))}}var j=this.viewMode;this.showMode(-1);this.fill();if(j==this.viewMode&&this.autoclose){this.hide()}break}}},_setDate:function(g,i){if(!i||i=="date"){this.date=g}if(!i||i=="view"){this.viewDate=g}this.fill();this.setValue();var h;if(this.isInput){h=this.element}else{if(this.component){h=this.element.find("input")}}if(h){h.change();if(this.autoclose&&(!i||i=="date")){}}this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(h,g){if(!g){return h}var i=new Date(h.valueOf());i.setUTCMinutes(i.getUTCMinutes()+(g*this.minuteStep));return i},moveHour:function(h,g){if(!g){return h}var i=new Date(h.valueOf());i.setUTCHours(i.getUTCHours()+g);return i},moveDate:function(h,g){if(!g){return h}var i=new Date(h.valueOf());i.setUTCDate(i.getUTCDate()+g);return i},moveMonth:function(g,h){if(!h){return g}var l=new Date(g.valueOf()),p=l.getUTCDate(),m=l.getUTCMonth(),k=Math.abs(h),o,n;h=h>0?1:-1;if(k==1){n=h==-1?function(){return l.getUTCMonth()==m}:function(){return l.getUTCMonth()!=o};o=m+h;l.setUTCMonth(o);if(o<0||o>11){o=(o+12)%12}}else{for(var j=0;j<k;j++){l=this.moveMonth(l,h)}o=l.getUTCMonth();l.setUTCDate(p);n=function(){return o!=l.getUTCMonth()}}while(n()){l.setUTCDate(--p);l.setUTCMonth(o)}return l},moveYear:function(h,g){return this.moveMonth(h,g*12)},dateWithinRange:function(g){return g>=this.startDate&&g<=this.endDate},keydown:function(k){if(this.picker.is(":not(:visible)")){if(k.keyCode==27){this.show()}return}var m=false,h,n,l,o,g;switch(k.keyCode){case 27:this.hide();k.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation){break}h=k.keyCode==37?-1:1;viewMode=this.viewMode;if(k.ctrlKey){viewMode+=2}else{if(k.shiftKey){viewMode+=1}}if(viewMode==4){o=this.moveYear(this.date,h);g=this.moveYear(this.viewDate,h)}else{if(viewMode==3){o=this.moveMonth(this.date,h);g=this.moveMonth(this.viewDate,h)}else{if(viewMode==2){o=this.moveDate(this.date,h);g=this.moveDate(this.viewDate,h)}else{if(viewMode==1){o=this.moveHour(this.date,h);g=this.moveHour(this.viewDate,h)}else{if(viewMode==0){o=this.moveMinute(this.date,h);g=this.moveMinute(this.viewDate,h)}}}}}if(this.dateWithinRange(o)){this.date=o;this.viewDate=g;this.setValue();this.update();k.preventDefault();m=true}break;case 38:case 40:if(!this.keyboardNavigation){break}h=k.keyCode==38?-1:1;viewMode=this.viewMode;if(k.ctrlKey){viewMode+=2}else{if(k.shiftKey){viewMode+=1}}if(viewMode==4){o=this.moveYear(this.date,h);g=this.moveYear(this.viewDate,h)}else{if(viewMode==3){o=this.moveMonth(this.date,h);g=this.moveMonth(this.viewDate,h)}else{if(viewMode==2){o=this.moveDate(this.date,h*7);g=this.moveDate(this.viewDate,h*7)}else{if(viewMode==1){if(this.showMeridian){o=this.moveHour(this.date,h*6);g=this.moveHour(this.viewDate,h*6)}else{o=this.moveHour(this.date,h*4);g=this.moveHour(this.viewDate,h*4)}}else{if(viewMode==0){o=this.moveMinute(this.date,h*4);g=this.moveMinute(this.viewDate,h*4)}}}}}if(this.dateWithinRange(o)){this.date=o;this.viewDate=g;this.setValue();this.update();k.preventDefault();m=true}break;case 13:if(this.viewMode!=0){var j=this.viewMode;this.showMode(-1);this.fill();if(j==this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}k.preventDefault();break;case 9:this.hide();break}if(m){var i;if(this.isInput){i=this.element}else{if(this.component){i=this.element.find("input")}}if(i){i.change()}this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(g){if(g){var h=Math.max(0,Math.min(b.modes.length-1,this.viewMode+g));if(h>=this.minView&&h<=this.maxView){this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:h});this.viewMode=h}}this.picker.find(">div").hide().filter(".datetimepicker-"+b.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(g){this._setDate(null,"date")}};c.fn.datetimepicker=function(i){var g=Array.apply(null,arguments);g.shift();var h;this.each(function(){var l=c(this),k=l.data("datetimepicker"),j=typeof i=="object"&&i;if(!k){l.data("datetimepicker",(k=new e(this,c.extend({},c.fn.datetimepicker.defaults,j))))}if(typeof i=="string"&&typeof k[i]=="function"){h=k[i].apply(k,g);if(h!==undefined){return false}}});if(h!==undefined){return h}else{return this}};c.fn.datetimepicker.defaults={};c.fn.datetimepicker.Constructor=e;var d=c.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}};var b={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(g){return(((g%4===0)&&(g%100!==0))||(g%400===0))},getDaysInMonth:function(g,h){return[31,(b.isLeapYear(g)?29:28),31,30,31,30,31,31,30,31,30,31][h]},getDefaultFormat:function(g,h){if(g=="standard"){if(h=="input"){return"yyyy-mm-dd hh:ii"}else{return"yyyy-mm-dd hh:ii:ss"}}else{if(g=="php"){if(h=="input"){return"Y-m-d H:i"}else{return"Y-m-d H:i:s"}}else{throw new Error("Invalid format type.")}}},validParts:function(g){if(g=="standard"){return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g}else{if(g=="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g}else{throw new Error("Invalid format type.")}}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(j,h){var g=j.replace(this.validParts(h),"\0").split("\0"),i=j.match(this.validParts(h));if(!g||!g.length||!i||i.length==0){throw new Error("Invalid date format.")}return{separators:g,parts:i}},parseDate:function(l,u,o,r){if(l instanceof Date){var w=new Date(l.valueOf()-l.getTimezoneOffset()*60000);w.setMilliseconds(0);return w}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(l)){u=this.parseFormat("yyyy-mm-dd",r)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(l)){u=this.parseFormat("yyyy-mm-dd hh:ii",r)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(l)){u=this.parseFormat("yyyy-mm-dd hh:ii:ss",r)}if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(l)){var x=/([-+]\d+)([dmwy])/,m=l.match(/([-+]\d+)([dmwy])/g),g,k;l=new Date();for(var n=0;n<m.length;n++){g=x.exec(m[n]);k=parseInt(g[1]);switch(g[2]){case"d":l.setUTCDate(l.getUTCDate()+k);break;case"m":l=e.prototype.moveMonth.call(e.prototype,l,k);break;case"w":l.setUTCDate(l.getUTCDate()+k*7);break;case"y":l=e.prototype.moveYear.call(e.prototype,l,k);break}}return f(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),0)}var m=l&&l.match(this.nonpunctuation)||[],l=new Date(0,0,0,0,0,0,0),q={},t=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],v={hh:function(s,i){return s.setUTCHours(i)},h:function(s,i){return s.setUTCHours(i)},HH:function(s,i){return s.setUTCHours(i==12?0:i)},H:function(s,i){return s.setUTCHours(i==12?0:i)},ii:function(s,i){return s.setUTCMinutes(i)},i:function(s,i){return s.setUTCMinutes(i)},ss:function(s,i){return s.setUTCSeconds(i)},s:function(s,i){return s.setUTCSeconds(i)},yyyy:function(s,i){return s.setUTCFullYear(i)},yy:function(s,i){return s.setUTCFullYear(2000+i)},m:function(s,i){i-=1;while(i<0){i+=12}i%=12;s.setUTCMonth(i);while(s.getUTCMonth()!=i){s.setUTCDate(s.getUTCDate()-1)}return s},d:function(s,i){return s.setUTCDate(i)},p:function(s,i){return s.setUTCHours(i==1?s.getUTCHours()+12:s.getUTCHours())}},j,p,g;v.M=v.MM=v.mm=v.m;v.dd=v.d;v.P=v.p;l=f(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds());if(m.length==u.parts.length){for(var n=0,h=u.parts.length;n<h;n++){j=parseInt(m[n],10);g=u.parts[n];if(isNaN(j)){switch(g){case"MM":p=c(d[o].months).filter(function(){var i=this.slice(0,m[n].length),s=m[n].slice(0,i.length);return i==s});j=c.inArray(p[0],d[o].months)+1;break;case"M":p=c(d[o].monthsShort).filter(function(){var i=this.slice(0,m[n].length),s=m[n].slice(0,i.length);return i==s});j=c.inArray(p[0],d[o].monthsShort)+1;break;case"p":case"P":j=c.inArray(m[n].toLowerCase(),d[o].meridiem);break}}q[g]=j}for(var n=0,y;n<t.length;n++){y=t[n];if(y in q&&!isNaN(q[y])){v[y](l,q[y])}}}return l},formatDate:function(g,m,o,k){if(g==null){return""}var n;if(k=="standard"){n={yy:g.getUTCFullYear().toString().substring(2),yyyy:g.getUTCFullYear(),m:g.getUTCMonth()+1,M:d[o].monthsShort[g.getUTCMonth()],MM:d[o].months[g.getUTCMonth()],d:g.getUTCDate(),D:d[o].daysShort[g.getUTCDay()],DD:d[o].days[g.getUTCDay()],p:(d[o].meridiem.length==2?d[o].meridiem[g.getUTCHours()<12?0:1]:""),h:g.getUTCHours(),i:g.getUTCMinutes(),s:g.getUTCSeconds()};if(d[o].meridiem.length==2){n.H=(n.h%12==0?12:n.h%12)}else{n.H=n.h}n.HH=(n.H<10?"0":"")+n.H;n.P=n.p.toUpperCase();n.hh=(n.h<10?"0":"")+n.h;n.ii=(n.i<10?"0":"")+n.i;n.ss=(n.s<10?"0":"")+n.s;n.dd=(n.d<10?"0":"")+n.d;n.mm=(n.m<10?"0":"")+n.m}else{if(k=="php"){n={y:g.getUTCFullYear().toString().substring(2),Y:g.getUTCFullYear(),F:d[o].months[g.getUTCMonth()],M:d[o].monthsShort[g.getUTCMonth()],n:g.getUTCMonth()+1,t:b.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth()),j:g.getUTCDate(),l:d[o].days[g.getUTCDay()],D:d[o].daysShort[g.getUTCDay()],w:g.getUTCDay(),N:(g.getUTCDay()==0?7:g.getUTCDay()),S:(g.getUTCDate()%10<=d[o].suffix.length?d[o].suffix[g.getUTCDate()%10-1]:""),a:(d[o].meridiem.length==2?d[o].meridiem[g.getUTCHours()<12?0:1]:""),g:(g.getUTCHours()%12==0?12:g.getUTCHours()%12),G:g.getUTCHours(),i:g.getUTCMinutes(),s:g.getUTCSeconds()};n.m=(n.n<10?"0":"")+n.n;n.d=(n.j<10?"0":"")+n.j;n.A=n.a.toString().toUpperCase();n.h=(n.g<10?"0":"")+n.g;n.H=(n.G<10?"0":"")+n.G;n.i=(n.i<10?"0":"")+n.i;n.s=(n.s<10?"0":"")+n.s}else{throw new Error("Invalid format type.")}}var g=[],l=c.extend([],m.separators);for(var j=0,h=m.parts.length;j<h;j++){if(l.length){g.push(l.shift())}g.push(n[m.parts[j]])}if(l.length){g.push(l.shift())}return g.join("")},convertViewMode:function(g){switch(g){case 4:case"decade":g=4;break;case 3:case"year":g=3;break;case 2:case"month":g=2;break;case 1:case"day":g=1;break;case 0:case"hour":g=0;break}return g},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><i class="glyphicon glyphicon-arrow-left"></i> </th><th colspan="5" class="switch"></th><th class="next"><i class="glyphicon glyphicon-arrow-right"></i> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};b.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+b.headTemplate+"<tbody></tbody>"+b.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+"</table></div></div>";b.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+b.headTemplateV3+b.contTemplate+b.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+b.headTemplateV3+b.contTemplate+b.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+b.headTemplateV3+"<tbody></tbody>"+b.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+b.headTemplateV3+b.contTemplate+b.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+b.headTemplateV3+b.contTemplate+b.footTemplate+"</table></div></div>";c.fn.datetimepicker.DPGlobal=b;c.fn.datetimepicker.noConflict=function(){c.fn.datetimepicker=old;return this};c(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(h){var g=c(this);if(g.data("datetimepicker")){return}h.preventDefault();g.datetimepicker("show")});c(function(){c('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery);/* =============================================================
 * bootstrap3-typeahead.js v3.0.3
 * https://github.com/bassjobsen/Bootstrap-3-Typeahead
 * =============================================================
 * Original written by @mdo and @fat
 * =============================================================
 * Copyright 2014 Bass Jobsen @bassjobsen
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},b.fn.typeahead.defaults,d);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:true;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.delay=typeof this.options.delay=="number"?this.options.delay:250;this.$menu=b(this.options.menu);this.shown=false;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"?this.options.showHintOnFocus:false};c.prototype={constructor:c,select:function(){var d=this.$menu.find(".active").data("value");if(this.autoSelect||d){this.$element.val(this.updater(d)).change()}return this.hide()},updater:function(d){return d},setSource:function(d){this.source=d},show:function(){var e=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),d;d=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight;this.$menu.insertAfter(this.$element).css({top:e.top+e.height+d,left:e.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(e){var d;if(typeof(e)!="undefined"&&e!==null){this.query=e}else{this.query=this.$element.val()||""}if(this.query.length<this.options.minLength){return this.shown?this.hide():this}var f=b.proxy(function(){d=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source;if(d){this.process(d)}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(f,this.delay)},process:function(d){var e=this;d=b.grep(d,function(f){return e.matcher(f)});d=this.sorter(d);if(!d.length){return this.shown?this.hide():this}if(this.options.items=="all"){return this.render(d).show()}else{return this.render(d.slice(0,this.options.items)).show()}},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(f){var g=[],e=[],d=[],h;while((h=f.shift())){if(!h.toLowerCase().indexOf(this.query.toLowerCase())){g.push(h)}else{if(~h.indexOf(this.query)){e.push(h)}else{d.push(h)}}}return g.concat(e,d)},highlighter:function(d){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return d.replace(new RegExp("("+e+")","ig"),function(f,g){return"<strong>"+g+"</strong>"})},render:function(d){var e=this;d=b(d).map(function(f,g){f=b(e.options.item).data("value",g);f.find("a").html(e.highlighter(g));return f[0]});if(this.autoSelect){d.first().addClass("active")}this.$menu.html(d);return this},next:function(e){var f=this.$menu.find(".active").removeClass("active"),d=f.next();if(!d.length){d=b(this.$menu.find("li")[0])}d.addClass("active")},prev:function(e){var f=this.$menu.find(".active").removeClass("active"),d=f.prev();if(!d.length){d=this.$menu.find("li").last()}d.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",b.proxy(this.keydown,this))}this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null);this.$element.off("focus").off("blur").off("keypress").off("keyup");if(this.eventSupported("keydown")){this.$element.off("keydown")}this.$menu.remove()},eventSupported:function(d){var e=d in this.$element;if(!e){this.$element.setAttribute(d,"return;");e=typeof this.$element[d]==="function"}return e},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault();this.prev();break;case 40:d.preventDefault();this.next();break}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]);if(!this.shown&&d.keyCode==40){this.lookup("")}else{this.move(d)}},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation();d.preventDefault()},focus:function(d){if(!this.focused){this.focused=true;if(this.options.minLength===0&&!this.$element.val()||this.options.showHintOnFocus){this.lookup()}}},blur:function(d){this.focused=false;if(!this.mousedover&&this.shown){this.hide()}},click:function(d){d.stopPropagation();d.preventDefault();this.select();this.$element.focus()},mouseenter:function(d){this.mousedover=true;this.$menu.find(".active").removeClass("active");b(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}}};var a=b.fn.typeahead;b.fn.typeahead=function(e){var d=arguments;return this.each(function(){var h=b(this),g=h.data("typeahead"),f=typeof e=="object"&&e;if(!g){h.data("typeahead",(g=new c(this,f)))}if(typeof e=="string"){if(d.length>1){g[e].apply(g,Array.prototype.slice.call(d,1))}else{g[e]()}}})};b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,scrollHeight:0,autoSelect:true};b.fn.typeahead.Constructor=c;b.fn.typeahead.noConflict=function(){b.fn.typeahead=a;return this};b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(f){var d=b(this);if(d.data("typeahead")){return}d.typeahead(d.data())})}(window.jQuery);!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(r,n){if(!(this instanceof e))return new e(r,n);this.options=n=n||{},vo(Wl,n,!1),p(n);var i=n.value;"string"==typeof i&&(i=new rs(i,n.mode)),this.doc=i;var o=this.display=new t(r,i);o.wrapper.CodeMirror=this,c(this),a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!ul&&Sr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ao},Qo&&11>Jo&&setTimeout(mo(Lr,this,!0),20),Tr(this),Oo();var l=this;sr(this,function(){l.curOp.forceUpdate=!0,Ni(l,i),n.autofocus&&!ul||ko()==o.input?setTimeout(mo(qr,l),20):Zr(l);for(var e in Dl)Dl.hasOwnProperty(e)&&Dl[e](l,n[e],Il);w(l);for(var t=0;t<zl.length;++t)zl[t](l)})}function t(e,t){var r=this,n=r.input=xo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");el?n.style.width="1000px":n.setAttribute("wrap","off"),al&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),r.inputDiv=xo("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=xo("div",[xo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=xo("div",[xo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=xo("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=xo("div",null,"CodeMirror-gutter-filler"),r.lineDiv=xo("div",null,"CodeMirror-code"),r.selectionDiv=xo("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=xo("div",null,"CodeMirror-cursors"),r.measure=xo("div",null,"CodeMirror-measure"),r.lineMeasure=xo("div",null,"CodeMirror-measure"),r.lineSpace=xo("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=xo("div",[xo("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=xo("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=xo("div",null,null,"position: absolute; height: "+hs+"px; width: 1px;"),r.gutters=xo("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=xo("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=xo("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),Qo&&8>Jo&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),al&&(n.style.width="0px"),el||(r.scroller.draggable=!0),ol&&(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"),Qo&&8>Jo&&(r.scrollbarH.style.minHeight=r.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),r.viewFrom=r.viewTo=t.first,r.view=[],r.externalMeasured=null,r.viewOffset=0,r.lastSizeC=0,r.updateLineNumbers=null,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ao,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null}function r(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,xt(e,100),e.state.modeGen++,e.curOp&&dr(e)}function i(e){e.options.lineWrapping?(Ho(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(To(e.display.wrapper,"CodeMirror-wrap"),d(e)),l(e),dr(e),Ft(e),setTimeout(function(){m(e)},100)}function o(e){var t=qt(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Zt(e.display)-3);return function(i){if(ri(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function l(e){var t=e.doc,r=o(e);t.iter(function(e){var t=r(e);t!=e.height&&Di(e,t)})}function s(e){var t=Ul[e.options.keyMap],r=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(r?" cm-keymap-"+r:"")}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ft(e)}function u(e){c(e),dr(e),setTimeout(function(){b(e)},20)}function c(e){var t=e.display.gutters,r=e.options.gutters;Co(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(xo("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",f(e)}function f(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function h(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=$n(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=qn(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,n=i.to.line,r+=n.text.length-i.to.ch}return r}function d(e){var t=e.display,r=e.doc;t.maxLine=Ai(r,r.first),t.maxLineLength=h(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=h(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function p(e){var t=ho(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function g(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<hs-3}function v(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:g(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Mt(e.display))}}function m(e,t){t||(t=v(e));var r=e.display,n=Do(r.measure),i=t.docHeight+hs,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&n>0&&!t.hScrollbarTakesSpace&&(o=!1);var l=i>t.clientHeight;if(l?(r.scrollbarV.style.display="block",r.scrollbarV.style.bottom=o?n+"px":"0",r.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||r.scrollbarV.clientHeight))+"px"):(r.scrollbarV.style.display="",r.scrollbarV.firstChild.style.height="0"),o?(r.scrollbarH.style.display="block",r.scrollbarH.style.right=l?n+"px":"0",r.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||r.scrollbarH.clientWidth)+"px"):(r.scrollbarH.style.display="",r.scrollbarH.firstChild.style.width="0"),o&&l?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=r.scrollbarFiller.style.width=n+"px"):r.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n+"px",r.gutterFiller.style.width=r.gutters.offsetWidth+"px"):r.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===n){var s=cl&&!ll?"12px":"18px";r.scrollbarV.style.minWidth=r.scrollbarH.style.minHeight=s;var a=function(t){eo(t)!=r.scrollbarV&&eo(t)!=r.scrollbarH&&ar(e,Or)(t)};as(r.scrollbarV,"mousedown",a),as(r.scrollbarH,"mousedown",a)}e.state.checkedOverlayScrollbar=!0}}function y(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-kt(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=Ei(t,n),l=Ei(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;if(o>s)return{from:s,to:Ei(t,Pi(Ai(t,s))+e.wrapper.clientHeight)};if(Math.min(a,t.lastLine())>=l)return{from:Ei(t,Pi(Ai(t,a))-e.wrapper.clientHeight),to:a}}return{from:o,to:Math.max(l,o+1)}}function b(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=C(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&r[l].gutter&&(r[l].gutter.style.left=o);var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function w(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=x(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(xo("div",[xo("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",f(e),!0}return!1}function x(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function C(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function L(e,t,r){var n=e.display;this.viewport=t,this.visible=y(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=r,this.dims=O(e)}function S(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return gr(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==br(e))return!1;w(e)&&(gr(e),t.dims=O(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),vl&&(o=ei(e.doc,o),l=ti(e.doc,l));var s=o!=r.viewFrom||l!=r.viewTo||r.lastSizeC!=t.wrapperHeight;yr(e,o,l),r.viewOffset=Pi(Ai(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var a=br(e);if(!s&&0==a&&!t.force&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=ko();return a>4&&(r.lineDiv.style.display="none"),W(e,r.updateLineNumbers,t.dims),a>4&&(r.lineDiv.style.display=""),u&&ko()!=u&&u.offsetHeight&&u.focus(),Co(r.cursorDiv),Co(r.selectionDiv),s&&(r.lastSizeC=t.wrapperHeight,xt(e,400)),r.updateLineNumbers=null,!0}function k(e,t){for(var r=t.force,n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)r=!0;else if(r=!1,n&&null!=n.top&&(n={top:Math.min(e.doc.height+Mt(e.display)-hs-e.display.scroller.clientHeight,n.top)}),t.visible=y(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!S(e,t))break;N(e);var o=v(e);mt(e),T(e,o),m(e,o)}ro(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&ro(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function M(e,t){var r=new L(e,t);if(S(e,r)){k(e,r);var n=v(e);mt(e),T(e,n),m(e,n)}}function T(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-hs)+"px"}function H(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function N(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i,o=t.view[n];if(!o.hidden){if(Qo&&8>Jo){var l=o.node.offsetTop+o.node.offsetHeight;i=l-r,r=l}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var a=o.line.height-i;if(2>i&&(i=qt(t)),(a>.001||-.001>a)&&(Di(o.line,i),A(o.line),o.rest))for(var u=0;u<o.rest.length;u++)A(o.rest[u])}}}function A(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function O(e){for(var t=e.display,r={},n={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[e.options.gutters[o]]=i.offsetLeft,n[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:C(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function W(e,t,r){function n(t){var r=t.nextSibling;return el&&cl&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var i=e.display,o=e.options.lineNumbers,l=i.lineDiv,s=l.firstChild,a=i.view,u=i.viewFrom,c=0;c<a.length;c++){var f=a[c];if(f.hidden);else if(f.node){for(;s!=f.node;)s=n(s);var h=o&&null!=t&&u>=t&&f.lineNumber;f.changes&&(ho(f.changes,"gutter")>-1&&(h=!1),D(e,f,u,r)),h&&(Co(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(x(e.options,u)))),s=f.node.nextSibling}else{var d=G(e,f,u,r);l.insertBefore(d,s)}u+=f.size}for(;s;)s=n(s)}function D(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?R(e,t):"gutter"==o?F(e,t,r,n):"class"==o?z(t):"widget"==o&&B(t,n)}t.changes=null}function I(e){return e.node==e.text&&(e.node=xo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Qo&&8>Jo&&(e.node.style.zIndex=2)),e.node}function E(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=I(e);e.background=r.insertBefore(xo("div",null,t),r.firstChild)}}function P(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):mi(e,t)}function R(e,t){var r=t.text.className,n=P(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,z(t)):r&&(t.text.className=r)}function z(e){E(e),e.line.wrapClass?I(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function F(e,t,r,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=I(t),l=t.gutter=o.insertBefore(xo("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(xo("div",x(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var a=e.options.gutters[s],u=i.hasOwnProperty(a)&&i[a];u&&l.appendChild(xo("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[a]+"px; width: "+n.gutterWidth[a]+"px"))}}}function B(e,t){e.alignable&&(e.alignable=null);for(var r,n=e.node.firstChild;n;n=r){var r=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}V(e,t)}function G(e,t,r,n){var i=P(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),z(t),F(e,t,r,n),V(t,n),t.node}function V(e,t){if(U(e.line,e,t,!0),e.rest)for(var r=0;r<e.rest.length;r++)U(e.rest[r],e,t,!1)}function U(e,t,r,n){if(e.widgets)for(var i=I(t),o=0,l=e.widgets;o<l.length;++o){var s=l[o],a=xo("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(a.ignoreEvents=!0),K(s,a,t,r),n&&s.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),ro(s,"redraw")}}function K(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function X(e){return ml(e.line,e.ch)}function _(e,t){return yl(e,t)<0?t:e}function j(e,t){return yl(e,t)<0?e:t}function Y(e,t){this.ranges=e,this.primIndex=t}function $(e,t){this.anchor=e,this.head=t}function q(e,t){var r=e[t];e.sort(function(e,t){return yl(e.from(),t.from())}),t=ho(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(yl(o.to(),i.from())>=0){var l=j(o.from(),i.from()),s=_(o.to(),i.to()),a=o.empty()?i.from()==i.head:o.from()==o.head;t>=n&&--t,e.splice(--n,2,new $(a?s:l,a?l:s))}}return new Y(e,t)}function Z(e,t){return new Y([new $(e,t||e)],0)}function Q(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function J(e,t){if(t.line<e.first)return ml(e.first,0);var r=e.first+e.size-1;return t.line>r?ml(r,Ai(e,r).text.length):et(t,Ai(e,t.line).text.length)}function et(e,t){var r=e.ch;return null==r||r>t?ml(e.line,t):0>r?ml(e.line,0):e}function tt(e,t){return t>=e.first&&t<e.first+e.size}function rt(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=J(e,t[n]);return r}function nt(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(n){var o=yl(r,i)<0;o!=yl(n,i)<0?(i=r,r=n):o!=yl(r,n)<0&&(r=n)}return new $(i,r)}return new $(n||r,r)}function it(e,t,r,n){ct(e,new Y([nt(e,e.sel.primary(),t,r)],0),n)}function ot(e,t,r){for(var n=[],i=0;i<e.sel.ranges.length;i++)n[i]=nt(e,e.sel.ranges[i],t[i],null);var o=q(n,e.sel.primIndex);ct(e,o,r)}function lt(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,ct(e,q(i,e.sel.primIndex),n)}function st(e,t,r,n){ct(e,Z(t,r),n)}function at(e,t){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new $(J(e,t[r].anchor),J(e,t[r].head))}};return cs(e,"beforeSelectionChange",e,r),e.cm&&cs(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?q(r.ranges,r.ranges.length-1):t}function ut(e,t,r){var n=e.history.done,i=fo(n);i&&i.ranges?(n[n.length-1]=t,ft(e,t,r)):ct(e,t,r)}function ct(e,t,r){ft(e,t,r),Ki(e,e.sel,e.cm?e.cm.curOp.id:0/0,r)}function ft(e,t,r){(lo(e,"beforeSelectionChange")||e.cm&&lo(e.cm,"beforeSelectionChange"))&&(t=at(e,t));var n=r&&r.bias||(yl(t.primary().head,e.sel.primary().head)<0?-1:1);ht(e,pt(e,t,n,!0)),r&&r.scroll===!1||!e.cm||yn(e.cm)}function ht(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,oo(e.cm)),ro(e,"cursorActivity",e))}function dt(e){ht(e,pt(e,e.sel,null,!1),ps)}function pt(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=gt(e,l.anchor,r,n),a=gt(e,l.head,r,n);(i||s!=l.anchor||a!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new $(s,a))}return i?q(i,t.primIndex):t}function gt(e,t,r,n){var i=!1,o=t,l=r||1;e.cantEdit=!1;e:for(;;){var s=Ai(e,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var u=s.markedSpans[a],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(n&&(cs(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!c.atomic)continue;var f=c.find(0>l?-1:1);if(0==yl(f,o)&&(f.ch+=l,f.ch<0?f=f.line>e.first?J(e,ml(f.line-1)):null:f.ch>s.text.length&&(f=f.line<e.first+e.size-1?ml(f.line+1,0):null),!f)){if(i)return n?(e.cantEdit=!0,ml(e.first,0)):gt(e,t,r,!0);i=!0,f=t,l=-l}o=f;continue e}}return o}}function vt(e){for(var t=e.display,r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++){var s=r.sel.ranges[l],a=s.empty();(a||e.options.showCursorWhenSelecting)&&yt(e,s,i),a||bt(e,s,o)}if(e.options.moveInputWithCursor){var u=Xt(e,r.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,u.top+f.top-c.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,u.left+f.left-c.left))}return n}function mt(e,t){t||(t=vt(e)),Lo(e.display.cursorDiv,t.cursors),Lo(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function yt(e,t,r){var n=Xt(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(xo("div","","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(xo("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function bt(e,t,r){function n(e,t,r,n){0>t&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(xo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?c-e:r)+"px; height: "+(n-t)+"px"))}function i(t,r,i){function o(r,n){return Kt(e,ml(t,r),"div",f,n)}var s,a,f=Ai(l,t),h=f.text.length;return Ro(Ri(f),r||0,null==i?h:i,function(e,t,l){var f,d,p,g=o(e,"left");if(e==t)f=g,d=p=g.left;else{if(f=o(t-1,"right"),"rtl"==l){var v=g;g=f,f=v}d=g.left,p=f.right}null==r&&0==e&&(d=u),f.top-g.top>3&&(n(d,g.top,null,g.bottom),d=u,g.bottom<f.top&&n(d,g.bottom,null,f.top)),null==i&&t==h&&(p=c),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!a||f.bottom>a.bottom||f.bottom==a.bottom&&f.right>a.right)&&(a=f),u+1>d&&(d=u),n(d,f.top,p-d,f.bottom)}),{start:s,end:a}}var o=e.display,l=e.doc,s=document.createDocumentFragment(),a=Tt(e.display),u=a.left,c=o.lineSpace.offsetWidth-a.right,f=t.from(),h=t.to();if(f.line==h.line)i(f.line,f.ch,h.ch);else{var d=Ai(l,f.line),p=Ai(l,h.line),g=Qn(d)==Qn(p),v=i(f.line,f.ch,g?d.text.length+1:null).end,m=i(h.line,g?0:null,h.ch).start;g&&(v.top<m.top-2?(n(v.right,v.top,null,v.bottom),n(u,m.top,m.left,m.bottom)):n(v.right,v.top,m.left-v.right,v.bottom)),v.bottom<m.top&&n(u,v.bottom,null,m.top)}r.appendChild(s)}function wt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function xt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,mo(Ct,e))}function Ct(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Bl(t.mode,St(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var l=o.styles,s=di(e,o,n,!0);o.styles=s.styles;var a=o.styleClasses,u=s.classes;u?o.styleClasses=u:a&&(o.styleClasses=null);for(var c=!l||l.length!=o.styles.length||a!=u&&(!a||!u||a.bgClass!=u.bgClass||a.textClass!=u.textClass),f=0;!c&&f<l.length;++f)c=l[f]!=o.styles[f];c&&i.push(t.frontier),o.stateAfter=Bl(t.mode,n)}else gi(e,o.text,n),o.stateAfter=t.frontier%5==0?Bl(t.mode,n):null;return++t.frontier,+new Date>r?(xt(e,e.options.workDelay),!0):void 0}),i.length&&sr(e,function(){for(var t=0;t<i.length;t++)pr(e,i[t],"text")})}}function Lt(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=Ai(o,s-1);if(a.stateAfter&&(!r||s<=o.frontier))return s;var u=ms(a.text,null,e.options.tabSize);(null==i||n>u)&&(i=s-1,n=u)}return i}function St(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var o=Lt(e,t,r),l=o>n.first&&Ai(n,o-1).stateAfter;return l=l?Bl(n.mode,l):Gl(n.mode),n.iter(o,t,function(r){gi(e,r.text,l);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;r.stateAfter=s?Bl(n.mode,l):null,++o}),r&&(n.frontier=o),l}function kt(e){return e.lineSpace.offsetTop}function Mt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Tt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Lo(e.measure,xo("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Ht(e,t,r){var n=e.options.lineWrapping,i=n&&e.display.scroller.clientWidth;if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function Nt(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(Ii(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function At(e,t){t=Qn(t);var r=Ii(t),n=e.display.externalMeasured=new fr(e.doc,t,r);n.lineN=r;var i=n.built=mi(e,n);return n.text=i.pre,Lo(e.display.lineMeasure,i.pre),n}function Ot(e,t,r,n){return It(e,Dt(e,t),r,n)}function Wt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[vr(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Dt(e,t){var r=Ii(t),n=Wt(e,r);n&&!n.text?n=null:n&&n.changes&&D(e,n,r,O(e)),n||(n=At(e,t));var i=Nt(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function It(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ht(e,t.view,t.rect),t.hasHeights=!0),o=Et(e,t,r,n),o.bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Et(e,t,r,n){for(var i,o,l,s,a=t.map,u=0;u<a.length;u+=3){var c=a[u],f=a[u+1];if(c>r?(o=0,l=1,s="left"):f>r?(o=r-c,l=o+1):(u==a.length-3||r==f&&a[u+3]>r)&&(l=f-c,o=l-1,r>=f&&(s="right")),null!=o){if(i=a[u+2],c==f&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;u&&a[u-2]==a[u-3]&&a[u-1].insertLeft;)i=a[(u-=3)+2],s="left";if("right"==n&&o==f-c)for(;u<a.length-3&&a[u+3]==a[u+4]&&!a[u+5].insertLeft;)i=a[(u+=3)+2],s="right";break}}var h;if(3==i.nodeType){for(;o&&wo(t.line.text.charAt(c+o));)--o;for(;f>c+l&&wo(t.line.text.charAt(c+l));)++l;if(Qo&&9>Jo&&0==o&&l==f-c)h=i.parentNode.getBoundingClientRect();else if(Qo&&e.options.lineWrapping){var d=ws(i,o,l).getClientRects();h=d.length?d["right"==n?d.length-1:0]:Cl}else h=ws(i,o,l).getBoundingClientRect()||Cl}else{o>0&&(s=n="right");var d;h=e.options.lineWrapping&&(d=i.getClientRects()).length>1?d["right"==n?d.length-1:0]:i.getBoundingClientRect()}if(Qo&&9>Jo&&!o&&(!h||!h.left&&!h.right)){var p=i.parentNode.getClientRects()[0];h=p?{left:p.left,right:p.left+Zt(e.display),top:p.top,bottom:p.bottom}:Cl}Qo&&11>Jo&&(h=Pt(e.display.measure,h));for(var g=h.top-t.rect.top,v=h.bottom-t.rect.top,m=(g+v)/2,y=t.view.measure.heights,u=0;u<y.length-1&&!(m<y[u]);u++);var b=u?y[u-1]:0,w=y[u],x={left:("right"==s?h.right:h.left)-t.rect.left,right:("left"==s?h.left:h.right)-t.rect.left,top:b,bottom:w};return h.left||h.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=v),x}function Pt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Po(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function Rt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function zt(e){e.display.externalMeasure=null,Co(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Rt(e.display.view[t])}function Ft(e){zt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Bt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Gt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vt(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=oi(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Pi(t);if("local"==n?l+=kt(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:Gt());var a=s.left+("window"==n?0:Bt());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function Ut(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=Bt(),i-=Gt();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function Kt(e,t,r,n,i){return n||(n=Ai(e.doc,t.line)),Vt(e,n,Ot(e,n,t.ch,i),r)}function Xt(e,t,r,n,i,o){function l(t,l){var s=It(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,Vt(e,n,s,r)}function s(e,t){var r=a[t],n=r.level%2;return e==zo(r)&&t&&r.level<a[t-1].level?(r=a[--t],e=Fo(r)-(r.level%2?0:1),n=!0):e==Fo(r)&&t<a.length-1&&r.level<a[t+1].level&&(r=a[++t],e=zo(r)-r.level%2,n=!1),n&&e==r.to&&e>r.from?l(e-1):l(e,n)}n=n||Ai(e.doc,t.line),i||(i=Dt(e,n));var a=Ri(n),u=t.ch;if(!a)return l(u);var c=Xo(a,u),f=s(u,c);return null!=Is&&(f.other=s(u,Is)),f}function _t(e,t){var r=0,t=J(e.doc,t);e.options.lineWrapping||(r=Zt(e.display)*t.ch);var n=Ai(e.doc,t.line),i=Pi(n)+kt(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function jt(e,t,r,n){var i=ml(e,t);return i.xRel=n,r&&(i.outside=!0),i}function Yt(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,0>r)return jt(n.first,0,!0,-1);var i=Ei(n,r),o=n.first+n.size-1;if(i>o)return jt(n.first+n.size-1,Ai(n,o).text.length,!0,1);0>t&&(t=0);for(var l=Ai(n,i);;){var s=$t(e,l,i,t,r),a=qn(l),u=a&&a.find(0,!0);if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=Ii(l=u.to.line)}}function $t(e,t,r,n,i){function o(n){var i=Xt(e,ml(r,n),"line",t,u);return s=!0,l>i.bottom?i.left-a:l<i.top?i.left+a:(s=!1,i.left)}var l=i-Pi(t),s=!1,a=2*e.display.wrapper.clientWidth,u=Dt(e,t),c=Ri(t),f=t.text.length,h=Bo(t),d=Go(t),p=o(h),g=s,v=o(d),m=s;if(n>v)return jt(r,d,m,1);for(;;){if(c?d==h||d==jo(t,h,1):1>=d-h){for(var y=p>n||v-n>=n-p?h:d,b=n-(y==h?p:v);wo(t.text.charAt(y));)++y;var w=jt(r,y,y==h?g:m,-1>b?-1:b>1?1:0);return w}var x=Math.ceil(f/2),C=h+x;if(c){C=h;for(var L=0;x>L;++L)C=jo(t,C,1)}var S=o(C);S>n?(d=C,v=S,(m=s)&&(v+=1e3),f=x):(h=C,p=S,g=s,f-=x)}}function qt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==bl){bl=xo("pre");for(var t=0;49>t;++t)bl.appendChild(document.createTextNode("x")),bl.appendChild(xo("br"));bl.appendChild(document.createTextNode("x"))}Lo(e.measure,bl);var r=bl.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Co(e.measure),r||1}function Zt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=xo("span","xxxxxxxxxx"),r=xo("pre",[t]);Lo(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Qt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Sl},Ll?Ll.ops.push(e.curOp):e.curOp.ownsGroup=Ll={ops:[e.curOp],delayedCallbacks:[]}}function Jt(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r]();for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(r<t.length)}function er(e){var t=e.curOp,r=t.ownsGroup;if(r)try{Jt(r)}finally{Ll=null;for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;tr(r)}}function tr(e){for(var t=e.ops,r=0;r<t.length;r++)rr(t[r]);for(var r=0;r<t.length;r++)nr(t[r]);for(var r=0;r<t.length;r++)ir(t[r]);for(var r=0;r<t.length;r++)or(t[r]);for(var r=0;r<t.length;r++)lr(t[r])}function rr(e){var t=e.cm,r=t.display;e.updateMaxLine&&d(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new L(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)
}function nr(e){e.updatedDisplay=e.mustUpdate&&S(e.cm,e.update)}function ir(e){var t=e.cm,r=t.display;e.updatedDisplay&&N(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ot(t,r.maxLine,r.maxLine.text.length).left,e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo+hs-r.scroller.clientWidth)),e.barMeasure=v(t),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=vt(t))}function or(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Br(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0)),e.newSelectionNodes&&mt(t,e.newSelectionNodes),e.updatedDisplay&&T(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&m(t,e.barMeasure),e.selectionChanged&&wt(t),t.state.focused&&e.updateInput&&Lr(t,e.typing)}function lr(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&k(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&r.scroller.scrollTop!=e.scrollTop){var i=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=i}if(null!=e.scrollLeft&&r.scroller.scrollLeft!=e.scrollLeft){var o=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o,b(t)}if(e.scrollToPos){var l=pn(t,J(n,e.scrollToPos.from),J(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&dn(t,l)}var s=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(s)for(var u=0;u<s.length;++u)s[u].lines.length||cs(s[u],"hide");if(a)for(var u=0;u<a.length;++u)a[u].lines.length&&cs(a[u],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&el&&(t.options.lineWrapping&&H(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!g(t)&&m(t)),e.changeObjs&&cs(t,"changes",t,e.changeObjs)}function sr(e,t){if(e.curOp)return t();Qt(e);try{return t()}finally{er(e)}}function ar(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Qt(e);try{return t.apply(e,arguments)}finally{er(e)}}}function ur(e){return function(){if(this.curOp)return e.apply(this,arguments);Qt(this);try{return e.apply(this,arguments)}finally{er(this)}}}function cr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Qt(t);try{return e.apply(this,arguments)}finally{er(t)}}}function fr(e,t,r){this.line=t,this.rest=Jn(t),this.size=this.rest?Ii(fo(this.rest))-r+1:1,this.node=this.text=null,this.hidden=ri(e,t)}function hr(e,t,r){for(var n,i=[],o=t;r>o;o=n){var l=new fr(e.doc,Ai(e.doc,o),o);n=o+l.size,i.push(l)}return i}function dr(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)vl&&ei(e.doc,t)<i.viewTo&&gr(e);else if(r<=i.viewFrom)vl&&ti(e.doc,r+n)>i.viewFrom?gr(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)gr(e);else if(t<=i.viewFrom){var o=mr(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):gr(e)}else if(r>=i.viewTo){var o=mr(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):gr(e)}else{var l=mr(e,t,t,-1),s=mr(e,r,r+n,1);l&&s?(i.view=i.view.slice(0,l.index).concat(hr(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):gr(e)}var a=i.externalMeasured;a&&(r<a.lineN?a.lineN+=n:t<a.lineN+a.size&&(i.externalMeasured=null))}function pr(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[vr(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==ho(l,r)&&l.push(r)}}}function gr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vr(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,0>t)return n}function mr(e,t,r,n){var i,o=vr(e,t),l=e.display.view;if(!vl||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=0,a=e.display.viewFrom;o>s;s++)a+=l[s].size;if(a!=t){if(n>0){if(o==l.length-1)return null;i=a+l[o].size-t,o++}else i=a-t;t+=i,r+=i}for(;ei(e.doc,r)!=r;){if(o==(0>n?0:l.length-1))return null;r+=n*l[o-(0>n?1:0)].size,o+=n}return{index:o,lineN:r}}function yr(e,t,r){var n=e.display,i=n.view;0==i.length||t>=n.viewTo||r<=n.viewFrom?(n.view=hr(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=hr(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(vr(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(hr(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,vr(e,r)))),n.viewTo=r}function br(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function wr(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Cr(e),e.state.focused&&wr(e)})}function xr(e){function t(){var n=Cr(e);n||r?(e.display.pollingFast=!1,wr(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Cr(e){var t=e.display.input,r=e.display.prevInput,n=e.doc;if(!e.state.focused||As(t)&&!r||Mr(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==r&&!e.somethingSelected())return!1;if(Qo&&Jo>=9&&e.display.inputHasSelection===i||cl&&/[\uf700-\uf7ff]/.test(i))return Lr(e),!1;var o=!e.curOp;o&&Qt(e),e.display.shift=!1,8203!=i.charCodeAt(0)||n.sel!=e.display.selForContextMenu||r||(r="");for(var l=0,s=Math.min(r.length,i.length);s>l&&r.charCodeAt(l)==i.charCodeAt(l);)++l;var a=i.slice(l),u=Ns(a),c=null;e.state.pasteIncoming&&n.sel.ranges.length>1&&(kl&&kl.join("\n")==a?c=n.sel.ranges.length%kl.length==0&&po(kl,Ns):u.length==n.sel.ranges.length&&(c=po(u,function(e){return[e]})));for(var f=n.sel.ranges.length-1;f>=0;f--){var h=n.sel.ranges[f],d=h.from(),p=h.to();l<r.length?d=ml(d.line,d.ch-(r.length-l)):e.state.overwrite&&h.empty()&&!e.state.pasteIncoming&&(p=ml(p.line,Math.min(Ai(n,p.line).text.length,p.ch+fo(u).length)));var g=e.curOp.updateInput,v={from:d,to:p,text:c?c[f%c.length]:u,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(ln(e.doc,v),ro(e,"inputRead",e,v),a&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&h.head.ch<100&&(!f||n.sel.ranges[f-1].head.line!=h.head.line)){var m=e.getModeAt(h.head);if(m.electricChars){for(var y=0;y<m.electricChars.length;y++)if(a.indexOf(m.electricChars.charAt(y))>-1){wn(e,h.head.line,"smart");break}}else if(m.electricInput){var b=Ol(v);m.electricInput.test(Ai(n,b.line).text.slice(0,b.ch))&&wn(e,h.head.line,"smart")}}}return yn(e),e.curOp.updateInput=g,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&er(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Lr(e,t){var r,n,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();r=Os&&(o.to().line-o.from().line>100||(n=e.getSelection()).length>1e3);var l=r?"-":n||e.getSelection();e.display.input.value=l,e.state.focused&&bs(e.display.input),Qo&&Jo>=9&&(e.display.inputHasSelection=l)}else t||(e.display.prevInput=e.display.input.value="",Qo&&Jo>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=r}function Sr(e){"nocursor"==e.options.readOnly||ul&&ko()==e.display.input||e.display.input.focus()}function kr(e){e.state.focused||(Sr(e),qr(e))}function Mr(e){return e.options.readOnly||e.doc.cantEdit}function Tr(e){function t(){e.state.focused&&setTimeout(mo(Sr,e),0)}function r(t){io(e,t)||ss(t)}function n(t){if(e.somethingSelected())kl=e.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=kl.join("\n"),bs(i.input));else{for(var r=[],n=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,s={anchor:ml(l,0),head:ml(l+1,0)};n.push(s),r.push(e.getRange(s.anchor,s.head))}"cut"==t.type?e.setSelections(n,null,ps):(i.prevInput="",i.input.value=r.join("\n"),bs(i.input)),kl=r}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;as(i.scroller,"mousedown",ar(e,Or)),Qo&&11>Jo?as(i.scroller,"dblclick",ar(e,function(t){if(!io(e,t)){var r=Ar(e,t);if(r&&!Pr(e,t)&&!Nr(e.display,t)){os(t);var n=kn(e,r);it(e.doc,n.anchor,n.head)}}})):as(i.scroller,"dblclick",function(t){io(e,t)||os(t)}),as(i.lineSpace,"selectstart",function(e){Nr(i,e)||os(e)}),pl||as(i.scroller,"contextmenu",function(t){Qr(e,t)}),as(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Fr(e,i.scroller.scrollTop),Br(e,i.scroller.scrollLeft,!0),cs(e,"scroll",e))}),as(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Fr(e,i.scrollbarV.scrollTop)}),as(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Br(e,i.scrollbarH.scrollLeft)}),as(i.scroller,"mousewheel",function(t){Gr(e,t)}),as(i.scroller,"DOMMouseScroll",function(t){Gr(e,t)}),as(i.scrollbarH,"mousedown",t),as(i.scrollbarV,"mousedown",t),as(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),as(i.input,"keyup",function(t){Yr.call(e,t)}),as(i.input,"input",function(){Qo&&Jo>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),xr(e)}),as(i.input,"keydown",ar(e,_r)),as(i.input,"keypress",ar(e,$r)),as(i.input,"focus",mo(qr,e)),as(i.input,"blur",mo(Zr,e)),e.options.dragDrop&&(as(i.scroller,"dragstart",function(t){zr(e,t)}),as(i.scroller,"dragenter",r),as(i.scroller,"dragover",r),as(i.scroller,"drop",ar(e,Rr))),as(i.scroller,"paste",function(t){Nr(i,t)||(e.state.pasteIncoming=!0,Sr(e),xr(e))}),as(i.input,"paste",function(){if(el&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,r=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=r,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,xr(e)}),as(i.input,"cut",n),as(i.input,"copy",n),ol&&as(i.sizer,"mouseup",function(){ko()==i.input&&i.input.blur(),Sr(e)})}function Hr(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function Nr(e,t){for(var r=eo(t);r!=e.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==e.sizer&&r!=e.mover)return!0}function Ar(e,t,r,n){var i=e.display;if(!r){var o=eo(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var l,s,a=i.lineSpace.getBoundingClientRect();try{l=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var u,c=Yt(e,l,s);if(n&&1==c.xRel&&(u=Ai(e.doc,c.line).text).length==c.ch){var f=ms(u,u.length,e.options.tabSize)-u.length;c=ml(c.line,Math.max(0,Math.round((l-Tt(e.display).left)/Zt(e.display))-f))}return c}function Or(e){if(!io(this,e)){var t=this,r=t.display;if(r.shift=e.shiftKey,Nr(r,e))return void(el||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100)));if(!Pr(t,e)){var n=Ar(t,e);switch(window.focus(),to(e)){case 1:n?Wr(t,e,n):eo(e)==r.scroller&&os(e);break;case 2:el&&(t.state.lastMiddleDown=+new Date),n&&it(t.doc,n),setTimeout(mo(Sr,t),20),os(e);break;case 3:pl&&Qr(t,e)}}}}function Wr(e,t,r){setTimeout(mo(kr,e),0);var n,i=+new Date;xl&&xl.time>i-400&&0==yl(xl.pos,r)?n="triple":wl&&wl.time>i-400&&0==yl(wl.pos,r)?(n="double",xl={time:i,pos:r}):(n="single",wl={time:i,pos:r});var o=e.doc.sel,l=cl?t.metaKey:t.ctrlKey;e.options.dragDrop&&Hs&&!Mr(e)&&"single"==n&&o.contains(r)>-1&&o.somethingSelected()?Dr(e,t,r,l):Ir(e,t,r,n,l)}function Dr(e,t,r,n){var i=e.display,o=ar(e,function(l){el&&(i.scroller.draggable=!1),e.state.draggingText=!1,us(document,"mouseup",o),us(i.scroller,"drop",o),Math.abs(t.clientX-l.clientX)+Math.abs(t.clientY-l.clientY)<10&&(os(l),n||it(e.doc,r),Sr(e),Qo&&9==Jo&&setTimeout(function(){document.body.focus(),Sr(e)},20))});el&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),as(document,"mouseup",o),as(i.scroller,"drop",o)}function Ir(e,t,r,n,i){function o(t){if(0!=yl(g,t))if(g=t,"rect"==n){for(var i=[],o=e.options.tabSize,l=ms(Ai(u,r.line).text,r.ch,o),s=ms(Ai(u,t.line).text,t.ch,o),a=Math.min(l,s),d=Math.max(l,s),p=Math.min(r.line,t.line),v=Math.min(e.lastLine(),Math.max(r.line,t.line));v>=p;p++){var m=Ai(u,p).text,y=uo(m,a,o);a==d?i.push(new $(ml(p,y),ml(p,y))):m.length>y&&i.push(new $(ml(p,y),ml(p,uo(m,d,o))))}i.length||i.push(new $(r,r)),ct(u,q(h.ranges.slice(0,f).concat(i),f),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=c,w=b.anchor,x=t;if("single"!=n){if("double"==n)var C=kn(e,t);else var C=new $(ml(t.line,0),J(u,ml(t.line+1,0)));yl(C.anchor,w)>0?(x=C.head,w=j(b.from(),C.anchor)):(x=C.anchor,w=_(b.to(),C.head))}var i=h.ranges.slice(0);i[f]=new $(J(u,w),x),ct(u,q(i,f),gs)}}function l(t){var r=++m,i=Ar(e,t,!0,"rect"==n);if(i)if(0!=yl(i,g)){kr(e),o(i);var s=y(a,u);(i.line>=s.to||i.line<s.from)&&setTimeout(ar(e,function(){m==r&&l(t)}),150)}else{var c=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;c&&setTimeout(ar(e,function(){m==r&&(a.scroller.scrollTop+=c,l(t))}),50)}}function s(t){m=1/0,os(t),Sr(e),us(document,"mousemove",b),us(document,"mouseup",w),u.history.lastSelOrigin=null}var a=e.display,u=e.doc;os(t);var c,f,h=u.sel;if(i&&!t.shiftKey?(f=u.sel.contains(r),c=f>-1?u.sel.ranges[f]:new $(r,r)):c=u.sel.primary(),t.altKey)n="rect",i||(c=new $(r,r)),r=Ar(e,t,!0,!0),f=-1;else if("double"==n){var d=kn(e,r);c=e.display.shift||u.extend?nt(u,c,d.anchor,d.head):d}else if("triple"==n){var p=new $(ml(r.line,0),J(u,ml(r.line+1,0)));c=e.display.shift||u.extend?nt(u,c,p.anchor,p.head):p}else c=nt(u,c,r);i?f>-1?lt(u,f,c,gs):(f=u.sel.ranges.length,ct(u,q(u.sel.ranges.concat([c]),f),{scroll:!1,origin:"*mouse"})):(f=0,ct(u,new Y([c],0),gs),h=u.sel);var g=r,v=a.wrapper.getBoundingClientRect(),m=0,b=ar(e,function(e){to(e)?l(e):s(e)}),w=ar(e,s);as(document,"mousemove",b),as(document,"mouseup",w)}function Er(e,t,r,n,i){try{var o=t.clientX,l=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&os(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(l>a.bottom||!lo(e,r))return Ji(t);l-=a.top-s.viewOffset;for(var u=0;u<e.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=o){var f=Ei(e.doc,l),h=e.options.gutters[u];return i(e,r,e,f,h,t),Ji(t)}}}function Pr(e,t){return Er(e,t,"gutterClick",!0,ro)}function Rr(e){var t=this;if(!io(t,e)&&!Nr(t.display,e)){os(e),Qo&&(Ml=+new Date);var r=Ar(t,e,!0),n=e.dataTransfer.files;if(r&&!Mr(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=ar(t,function(){if(o[n]=s.result,++l==i){r=J(t.doc,r);var e={from:r,to:r,text:Ns(o.join("\n")),origin:"paste"};ln(t.doc,e),ut(t.doc,Z(r,Ol(e)))}}),s.readAsText(e)},a=0;i>a;++a)s(n[a],a);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(mo(Sr,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(cl?e.metaKey:e.ctrlKey))var u=t.listSelections();if(ft(t.doc,Z(r,r)),u)for(var a=0;a<u.length;++a)hn(t.doc,"",u[a].anchor,u[a].head,"drag");t.replaceSelection(o,"around","paste"),Sr(t)}}catch(e){}}}}function zr(e,t){if(Qo&&(!e.state.draggingText||+new Date-Ml<100))return void ss(t);if(!io(e,t)&&!Nr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!il)){var r=xo("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",nl&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),nl&&r.parentNode.removeChild(r)}}function Fr(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,$o||M(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),$o&&M(e),xt(e,100))}function Br(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,b(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Gr(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var i=e.display,o=i.scroller;if(r&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&cl&&el)e:for(var l=t.target,s=i.view;l!=o;l=l.parentNode)for(var a=0;a<s.length;a++)if(s[a].node==l){e.display.currentWheelTarget=l;break e}if(r&&!$o&&!nl&&null!=Hl)return n&&Fr(e,Math.max(0,Math.min(o.scrollTop+n*Hl,o.scrollHeight-o.clientHeight))),Br(e,Math.max(0,Math.min(o.scrollLeft+r*Hl,o.scrollWidth-o.clientWidth))),os(t),void(i.wheelStartX=null);if(n&&null!=Hl){var u=n*Hl,c=e.doc.scrollTop,f=c+i.wrapper.clientHeight;0>u?c=Math.max(0,c+u-50):f=Math.min(e.doc.height,f+u+50),M(e,{top:c,bottom:f})}20>Tl&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=r,i.wheelDY=n,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,r=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,r&&(Hl=(Hl*Tl+r)/(Tl+1),++Tl)}},200)):(i.wheelDX+=r,i.wheelDY+=n))}}function Vr(e,t,r){if("string"==typeof t&&(t=Vl[t],!t))return!1;e.display.pollingFast&&Cr(e)&&(e.display.pollingFast=!1);var n=e.display.shift,i=!1;try{Mr(e)&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=ds}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function Ur(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Kr(e,t){var r=Tn(e.options.keyMap),n=r.auto;clearTimeout(Nl),n&&!Xl(t)&&(Nl=setTimeout(function(){Tn(e.options.keyMap)==r&&(e.options.keyMap=n.call?n.call(null,e):n,s(e))},50));var i=_l(t,!0),o=!1;if(!i)return!1;var l=Ur(e);return o=t.shiftKey?Kl("Shift-"+i,l,function(t){return Vr(e,t,!0)})||Kl(i,l,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Vr(e,t):void 0}):Kl(i,l,function(t){return Vr(e,t)}),o&&(os(t),wt(e),ro(e,"keyHandled",e,i,t)),o}function Xr(e,t,r){var n=Kl("'"+r+"'",Ur(e),function(t){return Vr(e,t,!0)});return n&&(os(t),wt(e),ro(e,"keyHandled",e,"'"+r+"'",t)),n}function _r(e){var t=this;if(kr(t),!io(t,e)){Qo&&11>Jo&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=Kr(t,e);nl&&(Al=n?r:null,!n&&88==r&&!Os&&(cl?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||jr(t)}}function jr(e){function t(e){18!=e.keyCode&&e.altKey||(To(r,"CodeMirror-crosshair"),us(document,"keyup",t),us(document,"mouseover",t))}var r=e.display.lineDiv;Ho(r,"CodeMirror-crosshair"),as(document,"keyup",t),as(document,"mouseover",t)}function Yr(e){16==e.keyCode&&(this.doc.sel.shift=!1),io(this,e)}function $r(e){var t=this;if(!(io(t,e)||e.ctrlKey&&!e.altKey||cl&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(nl&&r==Al)return Al=null,void os(e);if(!(nl&&(!e.which||e.which<10)||ol)||!Kr(t,e)){var i=String.fromCharCode(null==n?r:n);Xr(t,e,i)||(Qo&&Jo>=9&&(t.display.inputHasSelection=null),xr(t))}}}function qr(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(cs(e,"focus",e),e.state.focused=!0,Ho(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(Lr(e),el&&setTimeout(mo(Lr,e,!0),0))),wr(e),wt(e))}function Zr(e){e.state.focused&&(cs(e,"blur",e),e.state.focused=!1,To(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Qr(e,t){function r(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),r=i.input.value=""+(t?i.input.value:"");i.prevInput=t?"":"",i.input.selectionStart=1,i.input.selectionEnd=r.length,i.selForContextMenu=e.doc.sel}}function n(){if(i.inputDiv.style.position="relative",i.input.style.cssText=a,Qo&&9>Jo&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=l),wr(e),null!=i.input.selectionStart){(!Qo||Qo&&9>Jo)&&r();var t=0,n=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?ar(e,Vl.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(n,500):Lr(e)};i.detectingSelectAll=setTimeout(n,200)}}if(!io(e,t,"contextmenu")){var i=e.display;if(!Nr(i,t)&&!Jr(e,t)){var o=Ar(e,t),l=i.scroller.scrollTop;if(o&&!nl){var s=e.options.resetSelectionOnContextMenu;s&&-1==e.doc.sel.contains(o)&&ar(e,ct)(e.doc,Z(o),ps);var a=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Qo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",el)var u=window.scrollY;if(Sr(e),el&&window.scrollTo(null,u),Lr(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),Qo&&Jo>=9&&r(),pl){ss(t);var c=function(){us(window,"mouseup",c),setTimeout(n,20)};as(window,"mouseup",c)}else setTimeout(n,50)}}}}function Jr(e,t){return lo(e,"gutterContextMenu")?Er(e,t,"gutterContextMenu",!1,cs):!1}function en(e,t){if(yl(e,t.from)<0)return e;if(yl(e,t.to)<=0)return Ol(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Ol(t).ch-t.to.ch),ml(r,n)}function tn(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new $(en(i.anchor,t),en(i.head,t)))}return q(r,e.sel.primIndex)}function rn(e,t,r){return e.line==t.line?ml(r.line,e.ch-t.ch+r.ch):ml(r.line+(e.line-t.line),e.ch)}function nn(e,t,r){for(var n=[],i=ml(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=rn(s.from,i,o),u=rn(Ol(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],f=yl(c.head,c.anchor)<0;n[l]=new $(f?u:a,f?a:u)}else n[l]=new $(a,a)}return new Y(n,e.sel.primIndex)}function on(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(t,r,n,i){t&&(this.from=J(e,t)),r&&(this.to=J(e,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),cs(e,"beforeChange",e,n),e.cm&&cs(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function ln(e,t,r){if(e.cm){if(!e.cm.curOp)return ar(e.cm,ln)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(lo(e,"beforeChange")||e.cm&&lo(e.cm,"beforeChange"))||(t=on(e,t,!0))){var n=gl&&!r&&Vn(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)sn(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else sn(e,t)}}function sn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=yl(t.from,t.to)){var r=tn(e,t);Vi(e,t,r,e.cm?e.cm.curOp.id:0/0),cn(e,t,r,Fn(e,t));var n=[];Hi(e,function(e,r){r||-1!=ho(n,e.history)||(Qi(e.history,t),n.push(e.history)),cn(e,t,null,Fn(e,t))})}}function an(e,t,r){if(!e.cm||!e.cm.state.suppressEdits){for(var n,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,a=0;a<l.length&&(n=l[a],r?!n.ranges||n.equals(e.sel):n.ranges);a++);if(a!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;n=l.pop(),n.ranges;){if(Xi(n,s),r&&!n.equals(e.sel))return void ct(e,n,{clearRedo:!1});o=n}var u=[];Xi(o,s),s.push({changes:u,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var c=lo(e,"beforeChange")||e.cm&&lo(e.cm,"beforeChange"),a=n.changes.length-1;a>=0;--a){var f=n.changes[a];if(f.origin=t,c&&!on(e,f,!1))return void(l.length=0);u.push(Fi(e,f));var h=a?tn(e,f):fo(l);cn(e,f,h,Gn(e,f)),!a&&e.cm&&e.cm.scrollIntoView(f);var d=[];Hi(e,function(e,t){t||-1!=ho(d,e.history)||(Qi(e.history,f),d.push(e.history)),cn(e,f,null,Gn(e,f))})}}}}function un(e,t){if(0!=t&&(e.first+=t,e.sel=new Y(po(e.sel.ranges,function(e){return new $(ml(e.anchor.line+t,e.anchor.ch),ml(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){dr(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)pr(e.cm,n,"gutter")}}function cn(e,t,r,n){if(e.cm&&!e.cm.curOp)return ar(e.cm,cn)(e,t,r,n);if(t.to.line<e.first)return void un(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);un(e,i),t={from:ml(e.first,0),to:ml(t.to.line+i,t.to.ch),text:[fo(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ml(o,Ai(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Oi(e,t.from,t.to),r||(r=tn(e,t)),e.cm?fn(e.cm,t,n):ki(e,t,n),ft(e,r,ps)}}function fn(e,t,r){var n=e.doc,i=e.display,l=t.from,s=t.to,a=!1,u=l.line;e.options.lineWrapping||(u=Ii(Qn(Ai(n,l.line))),n.iter(u,s.line+1,function(e){return e==i.maxLine?(a=!0,!0):void 0})),n.sel.contains(t.from,t.to)>-1&&oo(e),ki(n,t,r,o(e)),e.options.lineWrapping||(n.iter(u,l.line+t.text.length,function(e){var t=h(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,l.line),xt(e,400);var c=t.text.length-(s.line-l.line)-1;l.line!=s.line||1!=t.text.length||Si(e.doc,t)?dr(e,l.line,s.line+1,c):pr(e,l.line,"text");var f=lo(e,"changes"),d=lo(e,"change");if(d||f){var p={from:l,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&ro(e,"change",e,p),f&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function hn(e,t,r,n,i){if(n||(n=r),yl(n,r)<0){var o=n;n=r,r=o}"string"==typeof t&&(t=Ns(t)),ln(e,{from:r,to:n,text:t,origin:i})}function dn(e,t){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!sl){var o=xo("div","",null,"position: absolute; top: "+(t.top-r.viewOffset-kt(e.display))+"px; height: "+(t.bottom-t.top+hs)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function pn(e,t,r,n){for(null==n&&(n=0);;){var i=!1,o=Xt(e,t),l=r&&r!=t?Xt(e,r):o,s=vn(e,Math.min(o.left,l.left),Math.min(o.top,l.top)-n,Math.max(o.left,l.left),Math.max(o.bottom,l.bottom)+n),a=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=s.scrollTop&&(Fr(e,s.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),null!=s.scrollLeft&&(Br(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(i=!0)),!i)return o}}function gn(e,t,r,n,i){var o=vn(e,t,r,n,i);null!=o.scrollTop&&Fr(e,o.scrollTop),null!=o.scrollLeft&&Br(e,o.scrollLeft)}function vn(e,t,r,n,i){var o=e.display,l=qt(e.display);0>r&&(r=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,a=o.scroller.clientHeight-hs,u={},c=e.doc.height+Mt(o),f=l>r,h=i>c-l;if(s>r)u.scrollTop=f?0:r;else if(i>s+a){var d=Math.min(r,(h?c:i)-a);d!=s&&(u.scrollTop=d)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=o.scroller.clientWidth-hs;t+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var v=o.gutters.offsetWidth,m=v+10>t;return p+v>t||m?(m&&(t=0),u.scrollLeft=Math.max(0,t-10-v)):n>g+p-3&&(u.scrollLeft=n+10-g),u}function mn(e,t,r){(null!=t||null!=r)&&bn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function yn(e){bn(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?ml(t.line,t.ch-1):t,n=ml(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function bn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=_t(e,t.from),n=_t(e,t.to),i=vn(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function wn(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=St(e,t):r="prev");var l=e.options.tabSize,s=Ai(o,t),a=ms(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&(u=o.mode.indent(i,s.text.slice(c.length),s.text),u==ds||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?ms(Ai(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)h+=l,f+="	";if(u>h&&(f+=co(u-h)),f!=c)hn(o,f,ml(t,0),ml(t,c.length),"+input");else for(var d=0;d<o.sel.ranges.length;d++){var p=o.sel.ranges[d];if(p.head.line==t&&p.head.ch<c.length){var h=ml(t,c.length);lt(o,d,new $(h,h));break}}s.stateAfter=null}function xn(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=Ai(e,Q(e,t)):i=Ii(t),null==i?null:(n(o,i)&&e.cm&&pr(e.cm,i,r),o)}function Cn(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&yl(o.from,fo(n).to)<=0;){var l=n.pop();if(yl(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}sr(e,function(){for(var t=n.length-1;t>=0;t--)hn(e.doc,"",n[t].from,n[t].to,"+delete");yn(e)})}function Ln(e,t,r,n,i){function o(){var t=s+r;return t<e.first||t>=e.first+e.size?f=!1:(s=t,c=Ai(e,t))}function l(e){var t=(i?jo:Yo)(c,a,r,!0);if(null==t){if(e||!o())return f=!1;a=i?(0>r?Go:Bo)(c):0>r?c.text.length:0}else a=t;return!0}var s=t.line,a=t.ch,u=r,c=Ai(e,s),f=!0;if("char"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var h=null,d="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(0>r)||l(!g);g=!1){var v=c.text.charAt(a)||"\n",m=yo(v,p)?"w":d&&"\n"==v?"n":!d||/\s/.test(v)?null:"p";if(!d||g||m||(m="s"),h&&h!=m){0>r&&(r=1,l());break}if(m&&(h=m),r>0&&!l(!g))break}var y=gt(e,ml(s,a),u,!0);return f||(y.hitSide=!0),y}function Sn(e,t,r,n){var i,o=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+r*(s-(0>r?1.5:.5)*qt(e.display))}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;;){var a=Yt(e,l,i);if(!a.outside)break;if(0>r?0>=i:i>=o.height){a.hitSide=!0;break}i+=5*r}return a}function kn(e,t){var r=e.doc,n=Ai(r,t.line).text,i=t.ch,o=t.ch;if(n){var l=e.getHelper(t,"wordChars");(t.xRel<0||o==n.length)&&i?--i:++o;for(var s=n.charAt(i),a=yo(s,l)?function(e){return yo(e,l)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!yo(e)};i>0&&a(n.charAt(i-1));)--i;for(;o<n.length&&a(n.charAt(o));)++o}return new $(ml(t.line,i),ml(t.line,o))}function Mn(t,r,n,i){e.defaults[t]=r,n&&(Dl[t]=i?function(e,t,r){r!=Il&&n(e,t,r)}:n)}function Tn(e){return"string"==typeof e?Ul[e]:e}function Hn(e,t,r,n,i){if(n&&n.shared)return Nn(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return ar(e.cm,Hn)(e,t,r,n,i);var o=new Yl(e,i),l=yl(t,r);if(n&&vo(n,o,!1),l>0||0==l&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=xo("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Zn(e,t.line,t,r,o)||t.line!=r.line&&Zn(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");vl=!0}o.addToHistory&&Vi(e,{from:t,to:r,origin:"markText"},e.sel,0/0);var s,a=t.line,u=e.cm;if(e.iter(a,r.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Qn(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=t.line&&Di(e,0),Pn(e,new Dn(o,a==t.line?t.ch:null,a==r.line?r.ch:null)),++a}),o.collapsed&&e.iter(t.line,r.line+1,function(t){ri(e,t)&&Di(t,0)}),o.clearOnEnter&&as(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(gl=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++$l,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)dr(u,t.line,r.line+1);
else if(o.className||o.title||o.startStyle||o.endStyle)for(var c=t.line;c<=r.line;c++)pr(u,c,"text");o.atomic&&dt(u.doc),ro(u,"markerAdded",u,o)}return o}function Nn(e,t,r,n,i){n=vo(n),n.shared=!1;var o=[Hn(e,t,r,n,i)],l=o[0],s=n.widgetNode;return Hi(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(Hn(e,J(e,t),J(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=fo(o)}),new ql(o,l)}function An(e){return e.findMarks(ml(e.first,0),e.clipPos(ml(e.lastLine())),function(e){return e.parent})}function On(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(yl(o,l)){var s=Hn(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function Wn(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];Hi(r.primary.doc,function(e){n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==ho(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}}}function Dn(e,t,r){this.marker=e,this.from=t,this.to=r}function In(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function En(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Pn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Rn(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var a=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Dn(l,o.from,a?null:o.to))}}return n}function zn(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Dn(l,a?null:o.from-t,null==o.to?null:o.to-t))}}return n}function Fn(e,t){var r=tt(e,t.from.line)&&Ai(e,t.from.line).markedSpans,n=tt(e,t.to.line)&&Ai(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==yl(t.from,t.to),s=Rn(r,i,l),a=zn(n,o,l),u=1==t.text.length,c=fo(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var h=s[f];if(null==h.to){var d=In(a,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(a)for(var f=0;f<a.length;++f){var h=a[f];if(null!=h.to&&(h.to+=c),null==h.from){var d=In(s,h.marker);d||(h.from=c,u&&(s||(s=[])).push(h))}else h.from+=c,u&&(s||(s=[])).push(h)}s&&(s=Bn(s)),a&&a!=s&&(a=Bn(a));var p=[s];if(!u){var g,v=t.text.length-2;if(v>0&&s)for(var f=0;f<s.length;++f)null==s[f].to&&(g||(g=[])).push(new Dn(s[f].marker,null,null));for(var f=0;v>f;++f)p.push(g);p.push(a)}return p}function Bn(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Gn(e,t){var r=Yi(e,t),n=Fn(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function Vn(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=ho(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(yl(u.to,s.from)<0||yl(u.from,s.to)>0)){var c=[a,1],f=yl(u.from,s.from),h=yl(u.to,s.to);(0>f||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(h>0||!l.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-1}}return i}function Un(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Kn(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Xn(e){return e.inclusiveLeft?-1:0}function _n(e){return e.inclusiveRight?1:0}function jn(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=yl(n.from,i.from)||Xn(e)-Xn(t);if(o)return-o;var l=yl(n.to,i.to)||_n(e)-_n(t);return l?l:t.id-e.id}function Yn(e,t){var r,n=vl&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||jn(r,i.marker)<0)&&(r=i.marker);return r}function $n(e){return Yn(e,!0)}function qn(e){return Yn(e,!1)}function Zn(e,t,r,n,i){var o=Ai(e,t),l=vl&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=yl(u.from,r)||Xn(a.marker)-Xn(i),f=yl(u.to,n)||_n(a.marker)-_n(i);if(!(c>=0&&0>=f||0>=c&&f>=0)&&(0>=c&&(yl(u.to,r)>0||a.marker.inclusiveRight&&i.inclusiveLeft)||c>=0&&(yl(u.from,n)<0||a.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Qn(e){for(var t;t=$n(e);)e=t.find(-1,!0).line;return e}function Jn(e){for(var t,r;t=qn(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function ei(e,t){var r=Ai(e,t),n=Qn(r);return r==n?t:Ii(n)}function ti(e,t){if(t>e.lastLine())return t;var r,n=Ai(e,t);if(!ri(e,n))return t;for(;r=qn(n);)n=r.find(1,!0).line;return Ii(n)+1}function ri(e,t){var r=vl&&t.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if(n=r[i],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&ni(e,t,n))return!0}}function ni(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return ni(e,n.line,In(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&ni(e,t,i))return!0}function ii(e,t,r){Pi(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&mn(e,null,r)}function oi(e){if(null!=e.height)return e.height;if(!So(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),Lo(e.cm.display.measure,xo("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function li(e,t,r,n){var i=new Zl(e,r,n);return i.noHScroll&&(e.display.alignWidgets=!0),xn(e.doc,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!ri(e.doc,t)){var n=Pi(t)<e.doc.scrollTop;Di(t,t.height+oi(i)),n&&mn(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function si(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Un(e),Kn(e,r);var i=n?n(e):1;i!=e.height&&Di(e,i)}function ai(e){e.parent=null,Un(e)}function ui(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function ci(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var n=e.innerMode(t,r);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function fi(e,t,r){for(var n=0;10>n;n++){var i=e.token(t,r);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function hi(t,r,n,i,o,l,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var u,c=0,f=null,h=new jl(r,t.options.tabSize);for(""==r&&ui(ci(n,i),l);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&gi(t,r,i,h.pos),h.pos=r.length,u=null):u=ui(fi(n,h,i),l),t.options.addModeClass){var d=e.innerMode(n,i).mode.name;d&&(u="m-"+(u?d+" "+u:d))}a&&f==u||(c<h.start&&o(h.start,f),c=h.start,f=u),h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);o(p,f),c=p}}function di(e,t,r,n){var i=[e.state.modeGen],o={};hi(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var l=0;l<e.state.overlays.length;++l){var s=e.state.overlays[l],a=1,u=0;hi(e,t.text,s.mode,!0,function(e,t){for(var r=a;e>u;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,"cm-overlay "+t),a=r+2;else for(;a>r;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function pi(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=di(e,t,t.stateAfter=St(e,Ii(t)));t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function gi(e,t,r,n){var i=e.doc.mode,o=new jl(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&ci(i,r);!o.eol()&&o.pos<=e.options.maxHighlightLength;)fi(i,o,r),o.start=o.pos}function vi(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?es:Jl;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function mi(e,t){var r=xo("span",null,null,el?"padding-right: .1px":null),n={pre:xo("pre",[r]),content:r,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,l=i?t.rest[i-1]:t.line;n.pos=0,n.addToken=bi,(Qo||el)&&e.getOption("lineWrapping")&&(n.addToken=wi(n.addToken)),Eo(e.display.measure)&&(o=Ri(l))&&(n.addToken=xi(n.addToken,o)),n.map=[],Li(l,n,pi(e,l)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=No(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=No(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Io(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return cs(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=No(n.pre.className,n.textClass||"")),n}function yi(e){var t=xo("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function bi(e,t,r,n,i,o){if(t){var l=e.cm.options.specialChars,s=!1;if(l.test(t))for(var a=document.createDocumentFragment(),u=0;;){l.lastIndex=u;var c=l.exec(t),f=c?c.index-u:t.length-u;if(f){var h=document.createTextNode(t.slice(u,u+f));a.appendChild(Qo&&9>Jo?xo("span",[h]):h),e.map.push(e.pos,e.pos+f,h),e.col+=f,e.pos+=f}if(!c)break;if(u+=f+1,"	"==c[0]){var d=e.cm.options.tabSize,p=d-e.col%d,h=a.appendChild(xo("span",co(p),"cm-tab"));e.col+=p}else{var h=e.cm.options.specialCharPlaceholder(c[0]);a.appendChild(Qo&&9>Jo?xo("span",[h]):h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var a=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,a),Qo&&9>Jo&&(s=!0),e.pos+=t.length}if(r||n||i||s){var g=r||"";n&&(g+=n),i&&(g+=i);var v=xo("span",[a],g);return o&&(v.title=o),e.content.appendChild(v)}e.content.appendChild(a)}}function wi(e){function t(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":"";return t+=" "}return function(r,n,i,o,l,s){e(r,n.replace(/ {3,}/g,t),i,o,l,s)}}function xi(e,t){return function(r,n,i,o,l,s){i=i?i+" cm-force-border":"cm-force-border";for(var a=r.pos,u=a+n.length;;){for(var c=0;c<t.length;c++){var f=t[c];if(f.to>a&&f.from<=a)break}if(f.to>=u)return e(r,n,i,o,l,s);e(r,n.slice(0,f.to-a),i,o,null,s),o=null,n=n.slice(f.to-a),a=f.to}}}function Ci(e,t,r,n){var i=!n&&r.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function Li(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,h=i.length,d=0,p=1,g="",v=0;;){if(v==d){s=a=u=c="",f=null,v=1/0;for(var m=[],y=0;y<n.length;++y){var b=n[y],w=b.marker;b.from<=d&&(null==b.to||b.to>d)?(null!=b.to&&v>b.to&&(v=b.to,a=""),w.className&&(s+=" "+w.className),w.startStyle&&b.from==d&&(u+=" "+w.startStyle),w.endStyle&&b.to==v&&(a+=" "+w.endStyle),w.title&&!c&&(c=w.title),w.collapsed&&(!f||jn(f.marker,w)<0)&&(f=b)):b.from>d&&v>b.from&&(v=b.from),"bookmark"==w.type&&b.from==d&&w.widgetNode&&m.push(w)}if(f&&(f.from||0)==d&&(Ci(t,(null==f.to?h+1:f.to)-d,f.marker,null==f.from),null==f.to))return;if(!f&&m.length)for(var y=0;y<m.length;++y)Ci(t,0,m[y])}if(d>=h)break;for(var x=Math.min(h,v);;){if(g){var C=d+g.length;if(!f){var L=C>x?g.slice(0,x-d):g;t.addToken(t,L,l?l+s:s,u,d+L.length==v?a:"",c)}if(C>=x){g=g.slice(x-d),d=x;break}d=C,u=""}g=i.slice(o,o=r[p++]),l=vi(r[p++],t.cm.options)}}else for(var p=1;p<r.length;p+=2)t.addToken(t,i.slice(o,o=r[p]),vi(r[p+1],t.cm.options))}function Si(e,t){return 0==t.from.ch&&0==t.to.ch&&""==fo(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ki(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){si(e,r,i,n),ro(e,"change",e,t)}var l=t.from,s=t.to,a=t.text,u=Ai(e,l.line),c=Ai(e,s.line),f=fo(a),h=i(a.length-1),d=s.line-l.line;if(Si(e,t)){for(var p=0,g=[];p<a.length-1;++p)g.push(new Ql(a[p],i(p),n));o(c,c.text,h),d&&e.remove(l.line,d),g.length&&e.insert(l.line,g)}else if(u==c)if(1==a.length)o(u,u.text.slice(0,l.ch)+f+u.text.slice(s.ch),h);else{for(var g=[],p=1;p<a.length-1;++p)g.push(new Ql(a[p],i(p),n));g.push(new Ql(f+u.text.slice(s.ch),h,n)),o(u,u.text.slice(0,l.ch)+a[0],i(0)),e.insert(l.line+1,g)}else if(1==a.length)o(u,u.text.slice(0,l.ch)+a[0]+c.text.slice(s.ch),i(0)),e.remove(l.line+1,d);else{o(u,u.text.slice(0,l.ch)+a[0],i(0)),o(c,f+c.text.slice(s.ch),h);for(var p=1,g=[];p<a.length-1;++p)g.push(new Ql(a[p],i(p),n));d>1&&e.remove(l.line+1,d-1),e.insert(l.line+1,g)}ro(e,"change",e,t)}function Mi(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Ti(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}function Hi(e,t,r){function n(e,i,o){if(e.linked)for(var l=0;l<e.linked.length;++l){var s=e.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;(!r||a)&&(t(s.doc,a),n(s.doc,e,a))}}}n(e,null,!0)}function Ni(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,l(e),r(e),e.options.lineWrapping||d(e),e.options.mode=t.modeOption,dr(e)}function Ai(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(o>t){r=i;break}t-=o}return r.lines[t]}function Oi(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function Wi(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function Di(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function Ii(e){if(null==e.parent)return null;for(var t=e.parent,r=ho(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Ei(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(o>t){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var n=0;n<e.lines.length;++n){var l=e.lines[n],s=l.height;if(s>t)break;t-=s}return r+n}function Pi(e){e=Qn(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var n=0;n<o.children.length;++n){var l=o.children[n];if(l==r)break;t+=l.height}return t}function Ri(e){var t=e.order;return null==t&&(t=e.order=Es(e.text)),t}function zi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Fi(e,t){var r={from:X(t.from),to:Ol(t),text:Oi(e,t.from,t.to)};return _i(e,r,t.from.line,t.to.line+1),Hi(e,function(e){_i(e,r,t.from.line,t.to.line+1)},!0),r}function Bi(e){for(;e.length;){var t=fo(e);if(!t.ranges)break;e.pop()}}function Gi(e,t){return t?(Bi(e.done),fo(e.done)):e.done.length&&!fo(e.done).ranges?fo(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),fo(e.done)):void 0}function Vi(e,t,r,n){var i=e.history;i.undone.length=0;var o,l=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>l-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Gi(i,i.lastOp==n))){var s=fo(o.changes);0==yl(t.from,t.to)&&0==yl(t.from,s.to)?s.to=Ol(t):o.changes.push(Fi(e,t))}else{var a=fo(i.done);for(a&&a.ranges||Xi(e.sel,i.done),o={changes:[Fi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,s||cs(e,"historyAdded")}function Ui(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ki(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Ui(e,o,fo(i.done),t))?i.done[i.done.length-1]=t:Xi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastOp=r,n&&n.clearRedo!==!1&&Bi(i.undone)}function Xi(e,t){var r=fo(t);r&&r.ranges&&r.equals(e)||t.push(e)}function _i(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function ji(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Yi(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];n<t.text.length;++n)i.push(ji(r[n]));return i}function $i(e,t,r){for(var n=0,i=[];n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?Y.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];i.push({changes:s});for(var a=0;a<l.length;++a){var u,c=l[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\d+)$/))&&ho(t,Number(u[1]))>-1&&(fo(s)[f]=c[f],delete c[f])}}}return i}function qi(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Zi(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)qi(o.ranges[s].anchor,t,r,n),qi(o.ranges[s].head,t,r,n)}else{for(var s=0;s<o.changes.length;++s){var a=o.changes[s];if(r<a.from.line)a.from=ml(a.from.line+n,a.from.ch),a.to=ml(a.to.line+n,a.to.ch);else if(t<=a.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function Qi(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;Zi(e.done,r,n,i),Zi(e.undone,r,n,i)}function Ji(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function eo(e){return e.target||e.srcElement}function to(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),cl&&e.ctrlKey&&1==t&&(t=3),t}function ro(e,t){function r(e){return function(){e.apply(null,o)}}var n=e._handlers&&e._handlers[t];if(n){var i,o=Array.prototype.slice.call(arguments,2);Ll?i=Ll.delayedCallbacks:fs?i=fs:(i=fs=[],setTimeout(no,0));for(var l=0;l<n.length;++l)i.push(r(n[l]))}}function no(){var e=fs;fs=null;for(var t=0;t<e.length;++t)e[t]()}function io(e,t,r){return cs(e,r||t.type,e,t),Ji(t)||t.codemirrorIgnore}function oo(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==ho(r,t[n])&&r.push(t[n])}function lo(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function so(e){e.prototype.on=function(e,t){as(this,e,t)},e.prototype.off=function(e,t){us(this,e,t)}}function ao(){this.id=null}function uo(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("	",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}}function co(e){for(;ys.length<=e;)ys.push(fo(ys)+" ");return ys[e]}function fo(e){return e[e.length-1]}function ho(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function po(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function go(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&vo(t,r),r}function vo(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||r===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function mo(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function yo(e,t){return t?t.source.indexOf("\\w")>-1&&Cs(e)?!0:t.test(e):Cs(e)}function bo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function wo(e){return e.charCodeAt(0)>=768&&Ls.test(e)}function xo(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Co(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Lo(e,t){return Co(e).appendChild(t)}function So(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function ko(){return document.activeElement}function Mo(e){return new RegExp("\\b"+e+"\\b\\s*")}function To(e,t){var r=Mo(t);r.test(e.className)&&(e.className=e.className.replace(r,""))}function Ho(e,t){Mo(t).test(e.className)||(e.className+=" "+t)}function No(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!Mo(r[n]).test(t)&&(t+=" "+r[n]);return t}function Ao(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}function Oo(){Ts||(Wo(),Ts=!0)}function Wo(){var e;as(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ss=null,Ao(Hr)},100))}),as(window,"blur",function(){Ao(Zr)})}function Do(e){if(null!=Ss)return Ss;var t=xo("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Lo(e,t),t.offsetWidth&&(Ss=t.offsetHeight-t.clientHeight),Ss||0}function Io(e){if(null==ks){var t=xo("span","");Lo(e,xo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ks=t.offsetWidth<=1&&t.offsetHeight>2&&!(Qo&&8>Jo))}return ks?xo("span",""):xo("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}function Eo(e){if(null!=Ms)return Ms;var t=Lo(e,document.createTextNode("AA")),r=ws(t,0,1).getBoundingClientRect();if(r.left==r.right)return!1;var n=ws(t,1,2).getBoundingClientRect();return Ms=n.right-r.right<3}function Po(e){if(null!=Ws)return Ws;var t=Lo(e,xo("span","x")),r=t.getBoundingClientRect(),n=ws(t,0,1).getBoundingClientRect();return Ws=Math.abs(r.left-n.left)>1}function Ro(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr"),i=!0)}i||n(t,r,"ltr")}function zo(e){return e.level%2?e.to:e.from}function Fo(e){return e.level%2?e.from:e.to}function Bo(e){var t=Ri(e);return t?zo(t[0]):0}function Go(e){var t=Ri(e);return t?Fo(fo(t)):e.text.length}function Vo(e,t){var r=Ai(e.doc,t),n=Qn(r);n!=r&&(t=Ii(n));var i=Ri(n),o=i?i[0].level%2?Go(n):Bo(n):0;return ml(t,o)}function Uo(e,t){for(var r,n=Ai(e.doc,t);r=qn(n);)n=r.find(1,!0).line,t=null;var i=Ri(n),o=i?i[0].level%2?Bo(n):Go(n):n.text.length;return ml(null==t?Ii(n):t,o)}function Ko(e,t,r){var n=e[0].level;return t==n?!0:r==n?!1:r>t}function Xo(e,t){Is=null;for(var r,n=0;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(null!=r)return Ko(e,i.level,e[r].level)?(i.from!=i.to&&(Is=r),n):(i.from!=i.to&&(Is=n),r);r=n}}return r}function _o(e,t,r,n){if(!n)return t+r;do t+=r;while(t>0&&wo(e.text.charAt(t)));return t}function jo(e,t,r,n){var i=Ri(e);if(!i)return Yo(e,t,r,n);for(var o=Xo(i,t),l=i[o],s=_o(e,t,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return Xo(i,s)==o?s:(l=i[o+=r],r>0==l.level%2?l.to:l.from);if(l=i[o+=r],!l)return null;s=r>0==l.level%2?_o(e,l.to,-1,n):_o(e,l.from,1,n)}}function Yo(e,t,r,n){var i=t+r;if(n)for(;i>0&&wo(e.text.charAt(i));)i+=r;return 0>i||i>e.text.length?null:i}var $o=/gecko\/\d/i.test(navigator.userAgent),qo=/MSIE \d/.test(navigator.userAgent),Zo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Qo=qo||Zo,Jo=Qo&&(qo?document.documentMode||6:Zo[1]),el=/WebKit\//.test(navigator.userAgent),tl=el&&/Qt\/\d+\.\d+/.test(navigator.userAgent),rl=/Chrome\//.test(navigator.userAgent),nl=/Opera\//.test(navigator.userAgent),il=/Apple Computer/.test(navigator.vendor),ol=/KHTML\//.test(navigator.userAgent),ll=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),sl=/PhantomJS/.test(navigator.userAgent),al=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ul=al||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),cl=al||/Mac/.test(navigator.platform),fl=/win/i.test(navigator.platform),hl=nl&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);hl&&(hl=Number(hl[1])),hl&&hl>=15&&(nl=!1,el=!0);var dl=cl&&(tl||nl&&(null==hl||12.11>hl)),pl=$o||Qo&&Jo>=9,gl=!1,vl=!1,ml=e.Pos=function(e,t){return this instanceof ml?(this.line=e,void(this.ch=t)):new ml(e,t)},yl=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};Y.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=yl(r.anchor,n.anchor)||0!=yl(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new $(X(this.ranges[t].anchor),X(this.ranges[t].head));return new Y(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(yl(t,n.from())>=0&&yl(e,n.to())<=0)return r}return-1}},$.prototype={from:function(){return j(this.anchor,this.head)},to:function(){return _(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bl,wl,xl,Cl={left:0,right:0,top:0,bottom:0},Ll=null,Sl=0,kl=null,Ml=0,Tl=0,Hl=null;Qo?Hl=-.53:$o?Hl=15:rl?Hl=-.7:il&&(Hl=-1/3);var Nl,Al=null,Ol=e.changeEnd=function(e){return e.text?ml(e.from.line+e.text.length-1,fo(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),Sr(this),xr(this)},setOption:function(e,t){var r=this.options,n=r[e];(r[e]!=t||"mode"==e)&&(r[e]=t,Dl.hasOwnProperty(e)&&ar(this,Dl[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||"string"!=typeof t[r]&&t[r].name==e)return t.splice(r,1),!0},addOverlay:ur(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.state.modeGen++,dr(this)}),removeOverlay:ur(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void dr(this)}}),indentLine:ur(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),tt(this.doc,e)&&wn(this,e,t,r)}),indentSelection:ur(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(wn(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&yn(this));else{var o=Math.max(r,i.from().line),l=i.to();r=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var s=o;r>s;++s)wn(this,s,e)}}}),getTokenAt:function(e,t){var r=this.doc;e=J(r,e);for(var n=St(this,e.line,t),i=this.doc.mode,o=Ai(r,e.line),l=new jl(o.text,this.options.tabSize);l.pos<e.ch&&!l.eol();){l.start=l.pos;var s=fi(i,l,n)}return{start:l.start,end:l.pos,string:l.current(),type:s||null,state:n}},getTokenTypeAt:function(e){e=J(this.doc,e);var t,r=pi(this,Ai(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Fl.hasOwnProperty(t))return Fl;var n=Fl[t],i=this.getModeAt(e);if("string"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=n[i[t][o]];l&&r.push(l)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(var o=0;o<n._global.length;o++){var s=n._global[o];s.pred(i,this)&&-1==ho(r,s.val)&&r.push(s.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=Q(r,null==e?r.first+r.size-1:e),St(this,e+1,t)},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?J(this.doc,e):e?n.from():n.to(),Xt(this,r,t||"page")},charCoords:function(e,t){return Kt(this,J(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Ut(this,e,t||"page"),Yt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Ut(this,{top:e,left:0},t||"page").top,Ei(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,r=!0);var i=Ai(this.doc,e);return Vt(this,i,{top:0,left:0},t||"page").top+(r?this.doc.height-Pi(i):0)},defaultTextHeight:function(){return qt(this.display)},defaultCharWidth:function(){return Zt(this.display)},setGutterMarker:ur(function(e,t,r){return xn(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&bo(n)&&(e.gutterMarkers=null),!0})}),clearGutter:ur(function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,pr(t,n,"gutter"),bo(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),addLineWidget:ur(function(e,t,r){return li(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!tt(this.doc,e))return null;var t=e;if(e=Ai(this.doc,e),!e)return null}else{var t=Ii(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=Xt(this,J(this.doc,e));var l=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("above"==n||"near"==n){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(l=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&gn(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},triggerOnKeyDown:ur(_r),triggerOnKeyPress:ur($r),triggerOnKeyUp:Yr,execCommand:function(e){return Vl.hasOwnProperty(e)?Vl[e](this):void 0},findPosH:function(e,t,r,n){var i=1;0>t&&(i=-1,t=-t);for(var o=0,l=J(this.doc,e);t>o&&(l=Ln(this.doc,l,i,r,n),!l.hitSide);++o);return l},moveH:ur(function(e,t){var r=this;r.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Ln(r.doc,n.head,e,t,r.options.rtlMoveVisually):0>e?n.from():n.to()},vs)}),deleteH:ur(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Cn(this,function(r){var i=Ln(n,r.head,e,t,!1);return 0>e?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;0>t&&(i=-1,t=-t);for(var l=0,s=J(this.doc,e);t>l;++l){var a=Xt(this,s,"div");if(null==o?o=a.left:a.left=o,s=Sn(this,a,i,r),s.hitSide)break
}return s},moveV:ur(function(e,t){var r=this,n=this.doc,i=[],o=!r.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return 0>e?l.from():l.to();var s=Xt(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=Sn(r,s,e,t);return"page"==t&&l==n.sel.primary()&&mn(r,null,Kt(r,a,"div").top-s.top),a},vs),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ho(this.display.cursorDiv,"CodeMirror-overwrite"):To(this.display.cursorDiv,"CodeMirror-overwrite"),cs(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return ko()==this.display.input},scrollTo:ur(function(e,t){(null!=e||null!=t)&&bn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=hs;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:ur(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ml(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)bn(this),this.curOp.scrollToPos=e;else{var r=vn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:ur(function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=r(e)),null!=t&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&zt(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pr(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,cs(n,"refresh",this)}),operation:function(e){return sr(this,e)},refresh:ur(function(){var e=this.display.cachedTextHeight;dr(this),this.curOp.forceUpdate=!0,Ft(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),f(this),(null==e||Math.abs(e-qt(this.display))>.5)&&l(this),cs(this,"refresh",this)}),swapDoc:ur(function(e){var t=this.doc;return t.cm=null,Ni(this,e),Ft(this),Lr(this),this.scrollTo(e.scrollLeft,e.scrollTop),ro(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},so(e);var Wl=e.defaults={},Dl=e.optionHandlers={},Il=e.Init={toString:function(){return"CodeMirror.Init"}};Mn("value","",function(e,t){e.setValue(t)},!0),Mn("mode",null,function(e,t){e.doc.modeOption=t,r(e)},!0),Mn("indentUnit",2,r,!0),Mn("indentWithTabs",!1),Mn("smartIndent",!0),Mn("tabSize",4,function(e){n(e),Ft(e),dr(e)},!0),Mn("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),Mn("specialCharPlaceholder",yi,function(e){e.refresh()},!0),Mn("electricChars",!0),Mn("rtlMoveVisually",!fl),Mn("wholeLineUpdateBefore",!0),Mn("theme","default",function(e){a(e),u(e)},!0),Mn("keyMap","default",s),Mn("extraKeys",null),Mn("lineWrapping",!1,i,!0),Mn("gutters",[],function(e){p(e.options),u(e)},!0),Mn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?C(e.display)+"px":"0",e.refresh()},!0),Mn("coverGutterNextToScrollbar",!1,m,!0),Mn("lineNumbers",!1,function(e){p(e.options),u(e)},!0),Mn("firstLineNumber",1,u,!0),Mn("lineNumberFormatter",function(e){return e},u,!0),Mn("showCursorWhenSelecting",!1,mt,!0),Mn("resetSelectionOnContextMenu",!0),Mn("readOnly",!1,function(e,t){"nocursor"==t?(Zr(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Lr(e))}),Mn("disableInput",!1,function(e,t){t||Lr(e)},!0),Mn("dragDrop",!0),Mn("cursorBlinkRate",530),Mn("cursorScrollMargin",0),Mn("cursorHeight",1,mt,!0),Mn("singleCursorHeightPerLine",!0,mt,!0),Mn("workTime",100),Mn("workDelay",100),Mn("flattenSpans",!0,n,!0),Mn("addModeClass",!1,n,!0),Mn("pollInterval",100),Mn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Mn("historyEventDelay",1250),Mn("viewportMargin",10,function(e){e.refresh()},!0),Mn("maxHighlightLength",1e4,n,!0),Mn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Mn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Mn("autofocus",null);var El=e.modes={},Pl=e.mimeModes={};e.defineMode=function(t,r){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){r.dependencies=[];for(var n=2;n<arguments.length;++n)r.dependencies.push(arguments[n])}El[t]=r},e.defineMIME=function(e,t){Pl[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Pl.hasOwnProperty(t))t=Pl[t];else if(t&&"string"==typeof t.name&&Pl.hasOwnProperty(t.name)){var r=Pl[t.name];"string"==typeof r&&(r={name:r}),t=go(r,t),t.name=r.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){var r=e.resolveMode(r),n=El[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(Rl.hasOwnProperty(r.name)){var o=Rl[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}if(i.name=r.name,r.helperType&&(i.helperType=r.helperType),r.modeProps)for(var l in r.modeProps)i[l]=r.modeProps[l];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Rl=e.modeExtensions={};e.extendMode=function(e,t){var r=Rl.hasOwnProperty(e)?Rl[e]:Rl[e]={};vo(t,r)},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineDocExtension=function(e,t){rs.prototype[e]=t},e.defineOption=Mn;var zl=[];e.defineInitHook=function(e){zl.push(e)};var Fl=e.helpers={};e.registerHelper=function(t,r,n){Fl.hasOwnProperty(t)||(Fl[t]=e[t]={_global:[]}),Fl[t][r]=n},e.registerGlobalHelper=function(t,r,n,i){e.registerHelper(t,r,i),Fl[t]._global.push({pred:n,val:i})};var Bl=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},Gl=e.startState=function(e,t,r){return e.startState?e.startState(t,r):!0};e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var Vl=e.commands={selectAll:function(e){e.setSelection(ml(e.firstLine(),0),ml(e.lastLine()),ps)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ps)},killLine:function(e){Cn(e,function(t){if(t.empty()){var r=Ai(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:ml(t.head.line+1,0)}:{from:t.head,to:ml(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Cn(e,function(t){return{from:ml(t.from().line,0),to:J(e.doc,ml(t.to().line+1,0))}})},delLineLeft:function(e){Cn(e,function(e){return{from:ml(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Cn(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){Cn(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(ml(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(ml(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Vo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){var r=Vo(e,t.head.line),n=e.getLineHandle(r.line),i=Ri(n);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),l=t.head.line==r.line&&t.head.ch<=o&&t.head.ch;return ml(r.line,l?0:o)}return r},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Uo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},vs)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},vs)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=ms(e.getLine(o.line),o.ch,n);t.push(new Array(n-l%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){sr(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n].head,o=Ai(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ml(i.line,i.ch-1)),i.ch>0)i=new ml(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ml(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=Ai(e.doc,i.line-1).text;l&&e.replaceRange(o.charAt(0)+"\n"+l.charAt(l.length-1),ml(i.line-1,l.length-1),ml(i.line,1),"+transpose")}r.push(new $(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){sr(e,function(){for(var t=e.listSelections().length,r=0;t>r;r++){var n=e.listSelections()[r];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),yn(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Ul=e.keyMap={};Ul.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ul.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ul.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Ul.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Ul["default"]=cl?Ul.macDefault:Ul.pcDefault;var Kl=e.lookupKey=function(e,t,r){function n(t){t=Tn(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&r(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return n(o);for(var l=0;l<o.length;++l){var s=n(o[l]);if(s)return s}return!1}for(var i=0;i<t.length;++i){var o=n(t[i]);if(o)return"stop"!=o}},Xl=e.isModifierKey=function(e){var t=Ds[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},_l=e.keyName=function(e,t){if(nl&&34==e.keyCode&&e["char"])return!1;var r=Ds[e.keyCode];return null==r||e.altGraphKey?!1:(e.altKey&&(r="Alt-"+r),(dl?e.metaKey:e.ctrlKey)&&(r="Ctrl-"+r),(dl?e.ctrlKey:e.metaKey)&&(r="Cmd-"+r),!t&&e.shiftKey&&(r="Shift-"+r),r)};e.fromTextArea=function(t,r){function n(){t.value=u.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),null==r.autofocus){var i=ko();r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(as(t.form,"submit",n),!r.leaveSubmitMethodAlone)){var o=t.form,l=o.submit;try{var s=o.submit=function(){n(),o.submit=l,o.submit(),o.submit=s}}catch(a){}}t.style.display="none";var u=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return u.save=n,u.getTextArea=function(){return t},u.toTextArea=function(){n(),t.parentNode.removeChild(u.getWrapperElement()),t.style.display="",t.form&&(us(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=l))},u};var jl=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};jl.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));return r?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ms(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ms(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ms(this.string,null,this.tabSize)-(this.lineStart?ms(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Yl=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};so(Yl),Yl.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Qt(e),lo(this,"clear")){var r=this.find();r&&ro(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=In(l.markedSpans,this);e&&!this.collapsed?pr(e,Ii(l),"text"):e&&(null!=s.to&&(i=Ii(l)),null!=s.from&&(n=Ii(l))),l.markedSpans=En(l.markedSpans,s),null==s.from&&this.collapsed&&!ri(this.doc,l)&&e&&Di(l,qt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var a=Qn(this.lines[o]),u=h(a);u>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&dr(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&dt(e.doc)),e&&ro(e,"markerCleared",e,this),t&&er(e),this.parent&&this.parent.clear()}},Yl.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var r,n,i=0;i<this.lines.length;++i){var o=this.lines[i],l=In(o.markedSpans,this);if(null!=l.from&&(r=ml(t?o:Ii(o),l.from),-1==e))return r;if(null!=l.to&&(n=ml(t?o:Ii(o),l.to),1==e))return n}return r&&{from:r,to:n}},Yl.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&sr(r,function(){var n=e.line,i=Ii(e.line),o=Wt(r,i);if(o&&(Rt(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!ri(t.doc,n)&&null!=t.height){var l=t.height;t.height=null;var s=oi(t)-l;s&&Di(n,n.height+s)}})},Yl.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ho(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Yl.prototype.detachLine=function(e){if(this.lines.splice(ho(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var $l=0,ql=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};so(ql),ql.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ro(this,"clear")}},ql.prototype.find=function(e,t){return this.primary.find(e,t)};var Zl=e.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};so(Zl),Zl.prototype.clear=function(){var e=this.cm,t=this.line.widgets,r=this.line,n=Ii(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=oi(this);sr(e,function(){ii(e,r,-o),pr(e,n,"widget"),Di(r,Math.max(0,r.height-o))})}},Zl.prototype.changed=function(){var e=this.height,t=this.cm,r=this.line;this.height=null;var n=oi(this)-e;n&&sr(t,function(){t.curOp.forceUpdate=!0,ii(t,r,n),Di(r,r.height+n)})};var Ql=e.Line=function(e,t,r){this.text=e,Kn(this,t),this.height=r?r(this):1};so(Ql),Ql.prototype.lineNo=function(){return Ii(this)};var Jl={},es={};Mi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;n>r;++r){var i=this.lines[r];this.height-=i.height,ai(i),ro(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;n>e;++e)if(r(this.lines[e]))return!0}},Ti.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(i>e){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Mi))){var s=[];this.collapse(s),this.children=[new Mi(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var l=i.lines.splice(i.lines.length-25,25),s=new Mi(l);i.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Ti(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=ho(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Ti(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var ts=0,rs=e.Doc=function(e,t,r){if(!(this instanceof rs))return new rs(e,t,r);null==r&&(r=0),Ti.call(this,[new Mi([new Ql("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=ml(r,0);this.sel=Z(n),this.history=new zi(null),this.id=++ts,this.modeOption=t,"string"==typeof e&&(e=Ns(e)),ki(this,{from:n,to:n,text:e}),ct(this,Z(n),ps)};rs.prototype=go(Ti.prototype,{constructor:rs,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Wi(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:cr(function(e){var t=ml(this.first,0),r=this.first+this.size-1;ln(this,{from:t,to:ml(r,Ai(this,r).text.length),text:Ns(e),origin:"setValue"},!0),ct(this,Z(t))}),replaceRange:function(e,t,r,n){t=J(this,t),r=r?J(this,r):t,hn(this,e,t,r,n)},getRange:function(e,t,r){var n=Oi(this,J(this,e),J(this,t));return r===!1?n:n.join(r||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return tt(this,e)?Ai(this,e):void 0},getLineNumber:function(e){return Ii(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ai(this,e)),Qn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return J(this,e)},getCursor:function(e){var t,r=this.sel.primary();return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||"to"==e||e===!1?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cr(function(e,t,r){st(this,J(this,"number"==typeof e?ml(e,t||0):e),null,r)}),setSelection:cr(function(e,t,r){st(this,J(this,e),J(this,t||e),r)}),extendSelection:cr(function(e,t,r){it(this,J(this,e),t&&J(this,t),r)}),extendSelections:cr(function(e,t){ot(this,rt(this,e,t))}),extendSelectionsBy:cr(function(e,t){ot(this,po(this.sel.ranges,e),t)}),setSelections:cr(function(e,t,r){if(e.length){for(var n=0,i=[];n<e.length;n++)i[n]=new $(J(this,e[n].anchor),J(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ct(this,q(i,t),r)}}),addSelection:cr(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new $(J(this,e),J(this,t||e))),ct(this,q(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=Oi(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Oi(this,r[n].from(),r[n].to());e!==!1&&(i=i.join(e||"\n")),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:cr(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:Ns(e[o]),origin:r}}for(var s=t&&"end"!=t&&nn(this,n,t),o=n.length-1;o>=0;o--)ln(this,n[o]);s?ut(this,s):this.cm&&yn(this.cm)}),undo:cr(function(){an(this,"undo")}),redo:cr(function(){an(this,"redo")}),undoSelection:cr(function(){an(this,"undo",!0)}),redoSelection:cr(function(){an(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new zi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:$i(this.history.done),undone:$i(this.history.undone)}},setHistory:function(e){var t=this.history=new zi(this.history.maxGeneration);t.done=$i(e.done.slice(0),null,!0),t.undone=$i(e.undone.slice(0),null,!0)},addLineClass:cr(function(e,t,r){return xn(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("(?:^|\\s)"+r+"(?:$|\\s)").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:cr(function(e,t,r){return xn(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+r+"(?:$|\\s+)"));if(!o)return!1;var l=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0})}),markText:function(e,t,r){return Hn(this,J(this,e),J(this,t),r,"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=J(this,e),Hn(this,e,e,r,"bookmark")},findMarksAt:function(e){e=J(this,e);var t=[],r=Ai(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=J(this,e),t=J(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];i==e.line&&e.ch>a.to||null==a.from&&i!=e.line||i==t.line&&a.from>t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first;return this.iter(function(n){var i=n.text.length+1;return i>e?(t=e,!0):(e-=i,void++r)}),J(this,ml(r,t))},indexFromPos:function(e){e=J(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new rs(Wi(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new rs(Wi(this,t,r),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],On(n,An(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var n=this.linked[r];if(n.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Wn(An(this));break}}if(t.history==this.history){var i=[t.id];Hi(t,function(e){i.push(e.id)},!0),t.history=new zi(null),t.history.done=$i(this.history.done,i),t.history.undone=$i(this.history.undone,i)}},iterLinkedDocs:function(e){Hi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),rs.prototype.eachLine=rs.prototype.iter;var ns="iter insert remove copy getEditor".split(" ");for(var is in rs.prototype)rs.prototype.hasOwnProperty(is)&&ho(ns,is)<0&&(e.prototype[is]=function(e){return function(){return e.apply(this.doc,arguments)}}(rs.prototype[is]));so(rs);var os=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},ls=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},ss=e.e_stop=function(e){os(e),ls(e)},as=e.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}},us=e.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}},cs=e.signal=function(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)},fs=null,hs=30,ds=e.Pass={toString:function(){return"CodeMirror.Pass"}},ps={scroll:!1},gs={origin:"*mouse"},vs={origin:"+move"};ao.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ms=e.countColumn=function(e,t,r,n,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=n||0,l=i||0;;){var s=e.indexOf("	",o);if(0>s||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}},ys=[""],bs=function(e){e.select()};al?bs=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Qo&&(bs=function(e){try{e.select()}catch(t){}}),[].indexOf&&(ho=function(e,t){return e.indexOf(t)}),[].map&&(po=function(e,t){return e.map(t)});var ws,xs=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Cs=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||xs.test(e))},Ls=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
ws=document.createRange?function(e,t,r){var n=document.createRange();return n.setEnd(e,r),n.setStart(e,t),n}:function(e,t,r){var n=document.body.createTextRange();return n.moveToElementText(e.parentNode),n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n},Qo&&11>Jo&&(ko=function(){try{return document.activeElement}catch(e){return document.body}});var Ss,ks,Ms,Ts=!1,Hs=function(){if(Qo&&9>Jo)return!1;var e=xo("div");return"draggable"in e||"dragDrop"in e}(),Ns=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;n>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},As=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Os=function(){var e=xo("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ws=null,Ds={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Ds,function(){for(var e=0;10>e;e++)Ds[e+48]=Ds[e+96]=String(e);for(var e=65;90>=e;e++)Ds[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Ds[e+111]=Ds[e+63235]="F"+e}();var Is,Es=function(){function e(e){return 247>=e?r.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?n.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,r){this.level=e,this.from=t,this.to=r}var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,u="L";return function(r){if(!i.test(r))return!1;for(var n,c=r.length,f=[],h=0;c>h;++h)f.push(n=e(r.charCodeAt(h)));for(var h=0,d=u;c>h;++h){var n=f[h];"m"==n?f[h]=d:d=n}for(var h=0,p=u;c>h;++h){var n=f[h];"1"==n&&"r"==p?f[h]="n":l.test(n)&&(p=n,"r"==n&&(f[h]="R"))}for(var h=1,d=f[0];c-1>h;++h){var n=f[h];"+"==n&&"1"==d&&"1"==f[h+1]?f[h]="1":","!=n||d!=f[h+1]||"1"!=d&&"n"!=d||(f[h]=d),d=n}for(var h=0;c>h;++h){var n=f[h];if(","==n)f[h]="N";else if("%"==n){for(var g=h+1;c>g&&"%"==f[g];++g);for(var v=h&&"!"==f[h-1]||c>g&&"1"==f[g]?"1":"N",m=h;g>m;++m)f[m]=v;h=g-1}}for(var h=0,p=u;c>h;++h){var n=f[h];"L"==p&&"1"==n?f[h]="L":l.test(n)&&(p=n)}for(var h=0;c>h;++h)if(o.test(f[h])){for(var g=h+1;c>g&&o.test(f[g]);++g);for(var y="L"==(h?f[h-1]:u),b="L"==(c>g?f[g]:u),v=y||b?"L":"R",m=h;g>m;++m)f[m]=v;h=g-1}for(var w,x=[],h=0;c>h;)if(s.test(f[h])){var C=h;for(++h;c>h&&s.test(f[h]);++h);x.push(new t(0,C,h))}else{var L=h,S=x.length;for(++h;c>h&&"L"!=f[h];++h);for(var m=L;h>m;)if(a.test(f[m])){m>L&&x.splice(S,0,new t(1,L,m));var k=m;for(++m;h>m&&a.test(f[m]);++m);x.splice(S,0,new t(2,k,m)),L=m}else++m;h>L&&x.splice(S,0,new t(1,L,h))}return 1==x[0].level&&(w=r.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==fo(x).level&&(w=r.match(/\s+$/))&&(fo(x).to-=w[0].length,x.push(new t(0,c-w[0].length,c))),x[0].level!=fo(x).level&&x.push(new t(x[0].level,c,c)),x}}();return e.version="4.4.0",e});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function r(e,t,r,n){this.line=t,this.ch=r,this.cm=e,this.text=e.getLine(t),this.min=n?n.from:e.firstLine(),this.max=n?n.to-1:e.lastLine()}function n(e,t){var r=e.cm.getTokenTypeAt(h(e.line,t));return r&&/\btag\b/.test(r)}function i(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function o(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function l(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(i(e))continue;return}{if(n(e,t+1)){var r=e.text.lastIndexOf("/",t),o=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(o(e))continue;return}if(n(e,t+1)){g.lastIndex=t,e.ch=t;var r=g.exec(e.text);if(r&&r.index==t)return r}else e.ch=t}}function a(e){for(;;){g.lastIndex=e.ch;var t=g.exec(e.text);if(!t){if(i(e))continue;return}{if(n(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function u(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(o(e))continue;return}{if(n(e,t+1)){var r=e.text.lastIndexOf("/",t),i=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t}}}function c(e,t){for(var r=[];;){var n,i=a(e),o=e.line,s=e.ch-(i?i[0].length:0);if(!i||!(n=l(e)))return;if("selfClose"!=n)if(i[1]){for(var u=r.length-1;u>=0;--u)if(r[u]==i[2]){r.length=u;break}if(0>u&&(!t||t==i[2]))return{tag:i[2],from:h(o,s),to:h(e.line,e.ch)}}else r.push(i[2])}}function f(e,t){for(var r=[];;){var n=u(e);if(!n)return;if("selfClose"!=n){var i=e.line,o=e.ch,l=s(e);if(!l)return;if(l[1])r.push(l[2]);else{for(var a=r.length-1;a>=0;--a)if(r[a]==l[2]){r.length=a;break}if(0>a&&(!t||t==l[2]))return{tag:l[2],from:h(e.line,e.ch),to:h(i,o)}}}else s(e)}}var h=e.Pos,d="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=d+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+d+"]["+p+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var n=new r(e,t.line,0);;){var i,o=a(n);if(!o||n.line!=t.line||!(i=l(n)))return;if(!o[1]&&"selfClose"!=i){var t=h(n.line,n.ch),s=c(n,o[2]);return s&&{from:t,to:s.from}}}}),e.findMatchingTag=function(e,n,i){var o=new r(e,n.line,n.ch,i);if(-1!=o.text.indexOf(">")||-1!=o.text.indexOf("<")){var a=l(o),u=a&&h(o.line,o.ch),d=a&&s(o);if(a&&"selfClose"!=a&&d&&!(t(o,n)>0)){var p={from:h(o.line,o.ch),to:u,tag:d[2]};return d[1]?{open:f(o,d[2]),close:p,at:"close"}:(o=new r(e,u.line,u.ch,i),{open:p,close:c(o,d[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,n){for(var i=new r(e,t.line,t.ch,n);;){var o=f(i);if(!o)break;var l=new r(e,t.line,t.ch,n),s=c(l,o.tag);if(s)return{open:o,close:s}}},e.scanForClosingTag=function(e,t,n,i){var o=new r(e,t.line,t.ch,i?{from:0,to:i}:null);return c(o,n)}});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",o),e.removeLineClass(e.state.activeLines[t],"background",l)}function r(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function n(e,n){for(var i=[],s=0;s<n.length;s++){var a=n[s];if(a.empty()){var u=e.getLineHandleVisualStart(a.head.line);i[i.length-1]!=u&&i.push(u)}}r(e.state.activeLines,i)||e.operation(function(){t(e);for(var r=0;r<i.length;r++)e.addLineClass(i[r],"wrap",o),e.addLineClass(i[r],"background",l);e.state.activeLines=i})}function i(e,t){n(e,t.ranges)}var o="CodeMirror-activeline",l="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(r,o,l){var s=l&&l!=e.Init;o&&!s?(r.state.activeLines=[],n(r,r.listSelections()),r.on("beforeSelectionChange",i)):!o&&s&&(r.off("beforeSelectionChange",i),t(r),delete r.state.activeLines)})});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n,i){var o=e.getLineHandle(t.line),a=t.ch-1,u=a>=0&&s[o.text.charAt(a)]||s[o.text.charAt(++a)];if(!u)return null;var c=">"==u.charAt(1)?1:-1;if(n&&c>0!=(a==t.ch))return null;var f=e.getTokenTypeAt(l(t.line,a+1)),h=r(e,l(t.line,a+(c>0?1:0)),c,f||null,i);return null==h?null:{from:l(t.line,a),to:h&&h.pos,match:h&&h.ch==u.charAt(0),forward:c>0}}function r(e,t,r,n,i){for(var o=i&&i.maxScanLineLength||1e4,a=i&&i.maxScanLines||1e3,u=[],c=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,f=r>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a),h=t.line;h!=f;h+=r){var d=e.getLine(h);if(d){var p=r>0?0:d.length-1,g=r>0?d.length:-1;if(!(d.length>o))for(h==t.line&&(p=t.ch-(0>r?1:0));p!=g;p+=r){var v=d.charAt(p);if(c.test(v)&&(void 0===n||e.getTokenTypeAt(l(h,p+1))==n)){var m=s[v];if(">"==m.charAt(1)==r>0)u.push(v);else{if(!u.length)return{pos:l(h,p),ch:v};u.pop()}}}}}return h-r==(r>0?e.lastLine():e.firstLine())?!1:null}function n(e,r,n){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],a=e.listSelections(),u=0;u<a.length;u++){var c=a[u].empty()&&t(e,a[u].head,!1,n);if(c&&e.getLine(c.from.line).length<=i){var f=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(c.from,l(c.from.line,c.from.ch+1),{className:f})),c.to&&e.getLine(c.to.line).length<=i&&s.push(e.markText(c.to,l(c.to.line,c.to.ch+1),{className:f}))}}if(s.length){o&&e.state.focused&&e.display.input.focus();var h=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!r)return h;setTimeout(h,800)}}function i(e){e.operation(function(){a&&(a(),a=null),a=n(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),l=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},a=null;e.defineOption("matchBrackets",!1,function(t,r,n){n&&n!=e.Init&&t.off("cursorActivity",i),r&&(t.state.matchBrackets="object"==typeof r?r:{},t.on("cursorActivity",i))}),e.defineExtension("matchBrackets",function(){n(this,!0)}),e.defineExtension("findMatchingBracket",function(e,r,n){return t(this,e,r,n)}),e.defineExtension("scanForBracket",function(e,t,n,i){return r(this,e,t,n,i)})});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){var r=e.getRange(a(t.line,t.ch-1),a(t.line,t.ch+1));return 2==r.length?r:null}function r(t,r,n){var i=t.getLine(r.line),o=t.getTokenAt(r);if(/\bstring2?\b/.test(o.type))return!1;var l=new e.StringStream(i.slice(0,r.ch)+n+i.slice(r.ch),4);for(l.pos=l.start=o.start;;){var s=t.getMode().token(l,o.state);if(l.pos>=r.ch+1)return/\bstring2?\b/.test(s);l.start=l.pos}}function n(n){for(var i={name:"autoCloseBrackets",Backspace:function(r){if(r.getOption("disableInput"))return e.Pass;for(var i=r.listSelections(),o=0;o<i.length;o++){if(!i[o].empty())return e.Pass;var l=t(r,i[o].head);if(!l||n.indexOf(l)%2!=0)return e.Pass}for(var o=i.length-1;o>=0;o--){var s=i[o].head;r.replaceRange("",a(s.line,s.ch-1),a(s.line,s.ch+1))}}},o="",l=0;l<n.length;l+=2)(function(t,n){t!=n&&(o+=n),i["'"+t+"'"]=function(i){if(i.getOption("disableInput"))return e.Pass;for(var l,u,c=i.listSelections(),f=0;f<c.length;f++){var h,d=c[f],p=d.head,u=i.getRange(p,a(p.line,p.ch+1));if(d.empty())if(t==n&&u==n)h=i.getRange(p,a(p.line,p.ch+3))==t+t+t?"skipThree":"skip";else if(t==n&&p.ch>1&&i.getRange(a(p.line,p.ch-2),p)==t+t&&(p.ch<=2||i.getRange(a(p.line,p.ch-3),a(p.line,p.ch-2))!=t))h="addFour";else if('"'==t||"'"==t){if(e.isWordChar(u)||!r(i,p,t))return e.Pass;h="both"}else{if(!(i.getLine(p.line).length==p.ch||o.indexOf(u)>=0||s.test(u)))return e.Pass;h="both"}else h="surround";if(l){if(l!=h)return e.Pass}else l=h}i.operation(function(){if("skip"==l)i.execCommand("goCharRight");else if("skipThree"==l)for(var e=0;3>e;e++)i.execCommand("goCharRight");else if("surround"==l){for(var r=i.getSelections(),e=0;e<r.length;e++)r[e]=t+r[e]+n;i.replaceSelections(r,"around")}else"both"==l?(i.replaceSelection(t+n,null),i.execCommand("goCharLeft")):"addFour"==l&&(i.replaceSelection(t+t+t+t,"before"),i.execCommand("goCharRight"))})},t!=n&&(i["'"+n+"'"]=function(t){for(var r=t.listSelections(),i=0;i<r.length;i++){var o=r[i];if(!o.empty()||t.getRange(o.head,a(o.head.line,o.head.ch+1))!=n)return e.Pass}t.execCommand("goCharRight")})})(n.charAt(l),n.charAt(l+1));return i}function i(r){return function(n){if(n.getOption("disableInput"))return e.Pass;for(var i=n.listSelections(),o=0;o<i.length;o++){if(!i[o].empty())return e.Pass;var l=t(n,i[o].head);if(!l||r.indexOf(l)%2!=0)return e.Pass}n.operation(function(){n.replaceSelection("\n\n",null),n.execCommand("goCharLeft"),i=n.listSelections();for(var e=0;e<i.length;e++){var t=i[e].head.line;n.indentLine(t,null,!0),n.indentLine(t+1,null,!0)}})}}var o="()[]{}''\"\"",l="[]{}",s=/\s/,a=e.Pos;e.defineOption("autoCloseBrackets",!1,function(t,r,s){if(s!=e.Init&&s&&t.removeKeyMap("autoCloseBrackets"),r){var a=o,u=l;"string"==typeof r?a=r:"object"==typeof r&&(null!=r.pairs&&(a=r.pairs),null!=r.explode&&(u=r.explode));var c=n(a);u&&(c.Enter=i(u)),t.addKeyMap(c)}})});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function r(r){r.state.failedTagMatch=!1,r.operation(function(){if(t(r),!r.somethingSelected()){var n=r.getCursor(),i=r.getViewport();i.from=Math.min(i.from,n.line),i.to=Math.max(n.line+1,i.to);var o=e.findMatchingTag(r,n,i);if(o){if(r.state.matchBothTags){var l="open"==o.at?o.open:o.close;l&&(r.state.tagHit=r.markText(l.from,l.to,{className:"CodeMirror-matchingtag"}))}var s="close"==o.at?o.open:o.close;s?r.state.tagOther=r.markText(s.from,s.to,{className:"CodeMirror-matchingtag"}):r.state.failedTagMatch=!0}}})}function n(e){e.state.failedTagMatch&&r(e)}e.defineOption("matchTags",!1,function(i,o,l){l&&l!=e.Init&&(i.off("cursorActivity",r),i.off("viewportChange",n),t(i)),o&&(i.state.matchBothTags="object"==typeof o&&o.bothTags,i.on("cursorActivity",r),i.on("viewportChange",n),r(i))}),e.commands.toMatchingTag=function(t){var r=e.findMatchingTag(t,t.getCursor());if(r){var n="close"==r.at?r.open:r.close;n&&t.extendSelection(n.to,n.from)}}});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var r=t.listSelections(),s=[],a=0;a<r.length;a++){if(!r[a].empty())return e.Pass;var u=r[a].head,c=t.getTokenAt(u),f=e.innerMode(t.getMode(),c.state),h=f.state;if("xml"!=f.mode.name||!h.tagName)return e.Pass;var d=t.getOption("autoCloseTags"),p="html"==f.mode.configuration,g="object"==typeof d&&d.dontCloseTags||p&&o,v="object"==typeof d&&d.indentTags||p&&l,m=h.tagName;c.end>u.ch&&(m=m.slice(0,m.length-c.end+u.ch));var y=m.toLowerCase();if(!m||"string"==c.type&&(c.end!=u.ch||!/[\"\']/.test(c.string.charAt(c.string.length-1))||1==c.string.length)||"tag"==c.type&&"closeTag"==h.type||c.string.indexOf("/")==c.string.length-1||g&&n(g,y)>-1||i(t,m,u,h,!0))return e.Pass;var b=v&&n(v,y)>-1;s[a]={indent:b,text:">"+(b?"\n\n":"")+"</"+m+">",newPos:b?e.Pos(u.line+1,0):e.Pos(u.line,u.ch+1)}}for(var a=r.length-1;a>=0;a--){var x=s[a];t.replaceRange(x.text,r[a].head,r[a].anchor,"+insert");var w=t.listSelections().slice(0);w[a]={head:x.newPos,anchor:x.newPos},t.setSelections(w),x.indent&&(t.indentLine(x.newPos.line,null,!0),t.indentLine(x.newPos.line+1,null,!0))}}function r(t){if(t.getOption("disableInput"))return e.Pass;for(var r=t.listSelections(),n=[],o=0;o<r.length;o++){if(!r[o].empty())return e.Pass;var l=r[o].head,s=t.getTokenAt(l),a=e.innerMode(t.getMode(),s.state),u=a.state;if("string"==s.type||"<"!=s.string.charAt(0)||s.start!=l.ch-1||"xml"!=a.mode.name||!u.context||!u.context.tagName||i(t,u.context.tagName,l,u))return e.Pass;n[o]="/"+u.context.tagName+">"}t.replaceSelections(n)}function n(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;n>r;++r)if(e[r]==t)return r;return-1}function i(t,r,n,i,o){if(!e.scanForClosingTag)return!1;var l=Math.min(t.lastLine()+1,n.line+500),s=e.scanForClosingTag(t,n,null,l);if(!s||s.tag!=r)return!1;for(var a=i.context,u=o?1:0;a&&a.tagName==r;a=a.prev)++u;n=s.to;for(var c=1;u>c;c++){var f=e.scanForClosingTag(t,n,null,l);if(!f||f.tag!=r)return!1;n=f.to}return!0}e.defineOption("autoCloseTags",!1,function(n,i,o){if(o!=e.Init&&o&&n.removeKeyMap("autoCloseTags"),i){var l={name:"autoCloseTags"};("object"!=typeof i||i.whenClosing)&&(l["'/'"]=function(e){return r(e)}),("object"!=typeof i||i.whenOpening)&&(l["'>'"]=function(e){return t(e)}),n.addKeyMap(l)}});var o=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],l=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,r){function n(e,t){function r(r){return t.tokenize=r,r(e,t)}var n=e.next();if("<"==n)return e.eat("!")?e.eat("[")?e.match("CDATA[")?r(l("atom","]]>")):null:e.match("--")?r(l("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(a(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta"):(L=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket");if("&"==n){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var r=e.next();if(">"==r||"/"==r&&e.eat(">"))return t.tokenize=n,L=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return L="equals",null;if("<"==r){t.tokenize=n,t.state=f,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(r)?(t.tokenize=o(r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}function l(e,t){return function(r,i){for(;!r.eol();){if(r.match(t)){i.tokenize=n;break}r.next()}return e}}function a(e){return function(t,r){for(var i;null!=(i=t.next());){if("<"==i)return r.tokenize=a(e+1),r.tokenize(t,r);if(">"==i){if(1==e){r.tokenize=n;break}return r.tokenize=a(e-1),r.tokenize(t,r)}}return"meta"}}function s(e,t,r){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=r,(k.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function u(e){e.context&&(e.context=e.context.prev)}function c(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!k.contextGrabbers.hasOwnProperty(r)||!k.contextGrabbers[r].hasOwnProperty(t))return;u(e)}}function f(e,t,r){return"openTag"==e?(r.tagStart=t.column(),h):"closeTag"==e?d:f}function h(e,t,r){return"word"==e?(r.tagName=t.current(),S="tag",v):(S="error",h)}function d(e,t,r){if("word"==e){var n=t.current();return r.context&&r.context.tagName!=n&&k.implicitlyClosed.hasOwnProperty(r.context.tagName)&&u(r),r.context&&r.context.tagName==n?(S="tag",p):(S="tag error",g)}return S="error",g}function p(e,t,r){return"endTag"!=e?(S="error",p):(u(r),f)}function g(e,t,r){return S="error",p(e,t,r)}function v(e,t,r){if("word"==e)return S="attribute",m;if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,i=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||k.autoSelfClosers.hasOwnProperty(n)?c(r,n):(c(r,n),r.context=new s(r,n,i==r.indented)),f}return S="error",v}function m(e,t,r){return"equals"==e?y:(k.allowMissing||(S="error"),v(e,t,r))}function y(e,t,r){return"string"==e?b:"word"==e&&k.allowUnquoted?(S="string",v):(S="error",v(e,t,r))}function b(e,t,r){return"string"==e?b:v(e,t,r)}var x=t.indentUnit,w=r.multilineTagIndentFactor||1,C=r.multilineTagIndentPastTag;null==C&&(C=!0);var L,S,k=r.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},M=r.alignCDATA;return{startState:function(){return{tokenize:n,state:f,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;L=null;var r=t.tokenize(e,t);return(r||L)&&"comment"!=r&&(S=null,t.state=t.state(L||r,e,t),S&&(r="error"==S?r+" error":S)),r},indent:function(t,r,o){var l=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+x;if(l&&l.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=n)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return C?t.tagStart+t.tagName.length+2:t.tagStart+x*w;if(M&&/<!\[CDATA\[/.test(r))return 0;var a=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(a&&a[1])for(;l;){if(l.tagName==a[2]){l=l.prev;break}if(!k.implicitlyClosed.hasOwnProperty(l.tagName))break;l=l.prev}else if(a)for(;l;){var s=k.contextGrabbers[l.tagName];if(!s||!s.hasOwnProperty(a[2]))break;l=l.prev}for(;l&&!l.startOfLine;)l=l.prev;return l?l.indent+x:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:r.htmlMode?"html":"xml",helperType:r.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){function n(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}function i(e,t,r){return pt=e,gt=r,t}function o(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=l(r),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==r&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return i(r);if("="==r&&e.eat(">"))return i("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==r)return e.eat("*")?(t.tokenize=a,a(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(Ct),i("operator","operator",e.current()));if("`"==r)return t.tokenize=s,s(e,t);if("#"==r)return e.skipToEnd(),i("error","error");if(Ct.test(r))return e.eatWhile(Ct),i("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var o=e.current(),u=wt.propertyIsEnumerable(o)&&wt[o];return u&&"."!=t.lastType?i(u.type,u.style,o):i("variable","variable",o)}function l(e){return function(t,r){var n,l=!1;if(yt&&"@"==t.peek()&&t.match(Lt))return r.tokenize=o,i("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||l);)l=!l&&"\\"==n;return l||(r.tokenize=o),i("string","string")}}function a(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=o;break}n="*"==r}return i("comment","comment")}function s(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=o;break}n=!n&&"\\"==r}return i("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(0>r)){for(var n=0,i=!1,o=r-1;o>=0;--o){var l=e.string.charAt(o),a=kt.indexOf(l);if(a>=0&&3>a){if(!n){++o;break}if(0==--n)break}else if(a>=3&&6>a)++n;else if(/[$\w]/.test(l))i=!0;else if(i&&!n){++o;break}}i&&!n&&(t.fatArrowAt=o)}}function c(e,t,r,n,i,o){this.indented=e,this.column=t,this.type=r,this.prev=i,this.info=o,null!=n&&(this.align=n)}function f(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var r=n.vars;r;r=r.next)if(r.name==t)return!0}function h(e,t,r,n,i){var o=e.cc;for(Mt.state=e,Mt.stream=i,Mt.marked=null,Mt.cc=o,Mt.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var l=o.length?o.pop():bt?C:w;if(l(r,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Mt.marked?Mt.marked:"variable"==r&&f(e,n)?"variable-2":t}}}function d(){for(var e=arguments.length-1;e>=0;e--)Mt.cc.push(arguments[e])}function p(){return d.apply(null,arguments),!0}function g(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=Mt.state;if(n.context){if(Mt.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function v(){Mt.state.context={prev:Mt.state.context,vars:Mt.state.localVars},Mt.state.localVars=Tt}function m(){Mt.state.localVars=Mt.state.context.vars,Mt.state.context=Mt.state.context.prev}function y(e,t){var r=function(){var r=Mt.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new c(n,Mt.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function b(){var e=Mt.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function x(e){function t(r){return r==e?p():";"==e?d():p(t)}return t}function w(e,t){return"var"==e?p(y("vardef",t.length),U,x(";"),b):"keyword a"==e?p(y("form"),C,w,b):"keyword b"==e?p(y("form"),w,b):"{"==e?p(y("}"),B,b):";"==e?p():"if"==e?("else"==Mt.state.lexical.info&&Mt.state.cc[Mt.state.cc.length-1]==b&&Mt.state.cc.pop()(),p(y("form"),C,w,b,Y)):"function"==e?p(et):"for"==e?p(y("form"),q,w,b):"variable"==e?p(y("stat"),D):"switch"==e?p(y("form"),C,y("}","switch"),x("{"),B,b,b):"case"==e?p(C,x(":")):"default"==e?p(x(":")):"catch"==e?p(y("form"),v,x("("),tt,x(")"),w,b,m):"module"==e?p(y("form"),v,lt,m,b):"class"==e?p(y("form"),rt,b):"export"==e?p(y("form"),at,b):"import"==e?p(y("form"),st,b):d(y("stat"),C,x(";"),b)}function C(e){return k(e,!1)}function L(e){return k(e,!0)}function k(e,t){if(Mt.state.fatArrowAt==Mt.stream.start){var r=t?W:O;if("("==e)return p(v,y(")"),F(j,")"),b,x("=>"),r,m);if("variable"==e)return d(v,j,x("=>"),r,m)}var n=t?N:T;return St.hasOwnProperty(e)?p(n):"function"==e?p(et,n):"keyword c"==e?p(t?M:S):"("==e?p(y(")"),S,dt,x(")"),b,n):"operator"==e||"spread"==e?p(t?L:C):"["==e?p(y("]"),ft,b,n):"{"==e?R(E,"}",null,n):"quasi"==e?d(H,n):p()}function S(e){return e.match(/[;\}\)\],]/)?d():d(C)}function M(e){return e.match(/[;\}\)\],]/)?d():d(L)}function T(e,t){return","==e?p(C):N(e,t,!1)}function N(e,t,r){var n=0==r?T:N,i=0==r?C:L;return"=>"==t?p(v,r?W:O,m):"operator"==e?/\+\+|--/.test(t)?p(n):"?"==t?p(C,x(":"),i):p(i):"quasi"==e?d(H,n):";"!=e?"("==e?R(L,")","call",n):"."==e?p(I,n):"["==e?p(y("]"),S,x("]"),b,n):void 0:void 0}function H(e,t){return"quasi"!=e?d():"${"!=t.slice(t.length-2)?p(H):p(C,A)}function A(e){return"}"==e?(Mt.marked="string-2",Mt.state.tokenize=s,p(H)):void 0}function O(e){return u(Mt.stream,Mt.state),d("{"==e?w:C)}function W(e){return u(Mt.stream,Mt.state),d("{"==e?w:L)}function D(e){return":"==e?p(b,w):d(T,x(";"),b)}function I(e){return"variable"==e?(Mt.marked="property",p()):void 0}function E(e,t){return"variable"==e||"keyword"==Mt.style?(Mt.marked="property",p("get"==t||"set"==t?P:z)):"number"==e||"string"==e?(Mt.marked=yt?"property":Mt.style+" property",p(z)):"jsonld-keyword"==e?p(z):"["==e?p(C,x("]"),z):void 0}function P(e){return"variable"!=e?d(z):(Mt.marked="property",p(et))}function z(e){return":"==e?p(L):"("==e?d(et):void 0}function F(e,t){function r(n){if(","==n){var i=Mt.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),p(e,r)}return n==t?p():p(x(t))}return function(n){return n==t?p():d(e,r)}}function R(e,t,r){for(var n=3;n<arguments.length;n++)Mt.cc.push(arguments[n]);return p(y(t,r),F(e,t),b)}function B(e){return"}"==e?p():d(w,B)}function G(e){return xt&&":"==e?p(V):void 0}function V(e){return"variable"==e?(Mt.marked="variable-3",p()):void 0}function U(){return d(j,G,X,_)}function j(e,t){return"variable"==e?(g(t),p()):"["==e?R(j,"]"):"{"==e?R(K,"}"):void 0}function K(e,t){return"variable"!=e||Mt.stream.match(/^\s*:/,!1)?("variable"==e&&(Mt.marked="property"),p(x(":"),j,X)):(g(t),p(X))}function X(e,t){return"="==t?p(L):void 0}function _(e){return","==e?p(U):void 0}function Y(e,t){return"keyword b"==e&&"else"==t?p(y("form","else"),w,b):void 0}function q(e){return"("==e?p(y(")"),$,x(")"),b):void 0}function $(e){return"var"==e?p(U,x(";"),Q):";"==e?p(Q):"variable"==e?p(Z):d(C,x(";"),Q)}function Z(e,t){return"in"==t||"of"==t?(Mt.marked="keyword",p(C)):p(T,Q)}function Q(e,t){return";"==e?p(J):"in"==t||"of"==t?(Mt.marked="keyword",p(C)):d(C,x(";"),J)}function J(e){")"!=e&&p(C)}function et(e,t){return"*"==t?(Mt.marked="keyword",p(et)):"variable"==e?(g(t),p(et)):"("==e?p(v,y(")"),F(tt,")"),b,w,m):void 0}function tt(e){return"spread"==e?p(tt):d(j,G)}function rt(e,t){return"variable"==e?(g(t),p(nt)):void 0}function nt(e,t){return"extends"==t?p(C,nt):"{"==e?p(y("}"),it,b):void 0}function it(e,t){return"variable"==e||"keyword"==Mt.style?(Mt.marked="property","get"==t||"set"==t?p(ot,et,it):p(et,it)):"*"==t?(Mt.marked="keyword",p(it)):";"==e?p(it):"}"==e?p():void 0}function ot(e){return"variable"!=e?d():(Mt.marked="property",p())}function lt(e,t){return"string"==e?p(w):"variable"==e?(g(t),p(ct)):void 0}function at(e,t){return"*"==t?(Mt.marked="keyword",p(ct,x(";"))):"default"==t?(Mt.marked="keyword",p(C,x(";"))):d(w)}function st(e){return"string"==e?p():d(ut,ct)}function ut(e,t){return"{"==e?R(ut,"}"):("variable"==e&&g(t),p())}function ct(e,t){return"from"==t?(Mt.marked="keyword",p(C)):void 0}function ft(e){return"]"==e?p():d(L,ht)}function ht(e){return"for"==e?d(dt,x("]")):","==e?p(F(L,"]")):d(F(L,"]"))}function dt(e){return"for"==e?p(q,dt):"if"==e?p(C,dt):void 0}var pt,gt,vt=t.indentUnit,mt=r.statementIndent,yt=r.jsonld,bt=r.json||yt,xt=r.typescript,wt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},l={"if":e("if"),"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":n,"export":e("export"),"import":e("import"),"extends":n};if(xt){var a={type:"variable",style:"variable-3"},s={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:a,number:a,bool:a,any:a};for(var u in s)l[u]=s[u]}return l}(),Ct=/[+\-*&%=<>!?|~^]/,Lt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,kt="([{}])",St={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Mt={state:null,column:null,marked:null,cc:null},Tt={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new c((e||0)-vt,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),u(e,t)),t.tokenize!=a&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==pt?r:(t.lastType="operator"!=pt||"++"!=gt&&"--"!=gt?pt:"incdec",h(t,r,pt,gt,e))},indent:function(t,n){if(t.tokenize==a)return e.Pass;if(t.tokenize!=o)return 0;var i=n&&n.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(n))for(var s=t.cc.length-1;s>=0;--s){var u=t.cc[s];if(u==b)l=l.prev;else if(u!=Y)break}"stat"==l.type&&"}"==i&&(l=l.prev),mt&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var c=l.type,f=i==c;return"vardef"==c?l.indented+("operator"==t.lastType||","==t.lastType?l.info+1:0):"form"==c&&"{"==i?l.indented:"form"==c?l.indented+vt:"stat"==c?l.indented+("operator"==t.lastType||","==t.lastType?mt||vt:0):"switch"!=l.info||f||0==r.doubleIndentSwitch?l.align?l.column+(f?0:1):l.indented+(f?0:vt):l.indented+(/^(?:case|default)\b/.test(n)?vt:2*vt)},electricChars:":{}",blockCommentStart:bt?null:"/*",blockCommentEnd:bt?null:"*/",lineComment:bt?null:"//",fold:"brace",helperType:bt?"json":"javascript",jsonldMode:yt,jsonMode:bt}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}function r(e,t){for(var r,n=!1;null!=(r=e.next());){if(n&&"/"==r){t.tokenize=null;break}n="*"==r}return["comment","comment"]}function n(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,r){function n(e,t){return h=t,e}function i(e,t){var r=e.next();if(m[r]){var i=m[r](e,t);if(i!==!1)return i}return"@"==r?(e.eatWhile(/[\w\\\-]/),n("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?n(null,"compare"):'"'==r||"'"==r?(t.tokenize=o(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),n("atom","hash")):"!"==r?(e.match(/^\s*\w*/),n("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),n("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?n(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?n("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?n(null,r):"u"==r&&e.match("rl(")?(e.backUp(1),t.tokenize=l,n("property","word")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),n("property","word")):n(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),n("number","unit")):e.match(/^\w+-/)?n("meta","meta"):void 0}function o(e){return function(t,r){for(var i,o=!1;null!=(i=t.next());){if(i==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==i}return(i==e||!o&&")"!=e)&&(r.tokenize=null),n("string","string")}}function l(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:o(")"),n(null,"(")}function a(e,t,r){this.type=e,this.indent=t,this.prev=r}function s(e,t,r){return e.context=new a(r,t.indentation()+g,e.context),r}function u(e){return e.context=e.context.prev,e.context.type}function c(e,t,r){return S[r.context.type](e,t,r)}function f(e,t,r,n){for(var i=n||1;i>0;i--)r.context=r.context.prev;return c(e,t,r)}function d(e){var t=e.current().toLowerCase();p=C.hasOwnProperty(t)?"atom":x.hasOwnProperty(t)?"keyword":"variable"}r.propertyKeywords||(r=e.resolveMode("text/css"));var h,p,g=t.indentUnit,m=r.tokenHooks,v=r.mediaTypes||{},y=r.mediaFeatures||{},b=r.propertyKeywords||{},w=r.nonStandardPropertyKeywords||{},x=r.colorKeywords||{},C=r.valueKeywords||{},k=r.fontProperties||{},L=r.allowNested,S={};return S.top=function(e,t,r){if("{"==e)return s(r,t,"block");if("}"==e&&r.context.prev)return u(r);if("@media"==e)return s(r,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return s(r,t,"at");if("hash"==e)p="builtin";else if("word"==e)p="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return s(r,t,"interpolation");if(":"==e)return"pseudo";if(L&&"("==e)return s(r,t,"parens")}return r.context.type},S.block=function(e,t,r){if("word"==e){var n=t.current().toLowerCase();return b.hasOwnProperty(n)?(p="property","maybeprop"):w.hasOwnProperty(n)?(p="string-2","maybeprop"):L?(p=t.match(/^\s*:/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==e?"block":L||"hash"!=e&&"qualifier"!=e?S.top(e,t,r):(p="error","block")},S.maybeprop=function(e,t,r){return":"==e?s(r,t,"prop"):c(e,t,r)},S.prop=function(e,t,r){if(";"==e)return u(r);if("{"==e&&L)return s(r,t,"propBlock");if("}"==e||"{"==e)return f(e,t,r);if("("==e)return s(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)d(t);else if("interpolation"==e)return s(r,t,"interpolation")}else p+=" error";return"prop"},S.propBlock=function(e,t,r){return"}"==e?u(r):"word"==e?(p="property","maybeprop"):r.context.type},S.parens=function(e,t,r){return"{"==e||"}"==e?f(e,t,r):")"==e?u(r):"("==e?s(r,t,"parens"):("word"==e&&d(t),"parens")},S.pseudo=function(e,t,r){return"word"==e?(p="variable-3",r.context.type):c(e,t,r)},S.media=function(e,t,r){if("("==e)return s(r,t,"media_parens");if("}"==e)return f(e,t,r);if("{"==e)return u(r)&&s(r,t,L?"block":"top");if("word"==e){var n=t.current().toLowerCase();p="only"==n||"not"==n||"and"==n?"keyword":v.hasOwnProperty(n)?"attribute":y.hasOwnProperty(n)?"property":"error"}return r.context.type},S.media_parens=function(e,t,r){return")"==e?u(r):"{"==e||"}"==e?f(e,t,r,2):S.media(e,t,r)},S.font_face_before=function(e,t,r){return"{"==e?s(r,t,"font_face"):c(e,t,r)},S.font_face=function(e,t,r){return"}"==e?u(r):"word"==e?(p=k.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(e,t,r){return"word"==e?(p="variable","keyframes"):"{"==e?s(r,t,"top"):c(e,t,r)},S.at=function(e,t,r){return";"==e?u(r):"{"==e||"}"==e?f(e,t,r):("word"==e?p="tag":"hash"==e&&(p="builtin"),"at")},S.interpolation=function(e,t,r){return"}"==e?u(r):"{"==e||";"==e?f(e,t,r):("variable"!=e&&(p="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new a("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||i)(e,t);return r&&"object"==typeof r&&(h=r[1],r=r[0]),p=r,t.state=S[t.state](h,e,t),p},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),!r.prev||("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"font_face"!=r.type)&&(")"!=n||"parens"!=r.type&&"media_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"media"!=r.type)||(i=r.indent-g,r=r.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),l=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],a=t(l),s=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(s),c=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],f=t(c),d=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],h=t(d),p=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],g=t(p),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=t(m),y=i.concat(l).concat(s).concat(c).concat(d).concat(p);e.registerHelper("hintWords","css",y),e.defineMIME("text/css",{mediaTypes:o,mediaFeatures:a,propertyKeywords:u,nonStandardPropertyKeywords:f,colorKeywords:h,valueKeywords:g,fontProperties:v,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=n,n(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=r,r(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,propertyKeywords:u,nonStandardPropertyKeywords:f,colorKeywords:h,valueKeywords:g,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=r,r(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,propertyKeywords:u,nonStandardPropertyKeywords:f,colorKeywords:h,valueKeywords:g,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=r,r(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})});!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}function r(e){return function(t,r){return t.match(e)?r.tokenize=null:t.skipToEnd(),"string"}}function n(e){return 0==e.length?i:function(t,r){for(var o=e[0],l=0;l<o.length;l++)if(t.match(o[l][0]))return r.tokenize=n(e.slice(1)),o[l][1];return r.tokenize=i,"string"}}function i(e,t){var r,i=!1,o=!1;if('"'==e.current())return"string";if(e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(e.match(/\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=n([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]])),e.match(/\-\>\w/,!1)&&(t.tokenize=n([[["->",null]],[[/[\w]+/,"variable"]]])),"variable-2";for(;!(e.eol()||e.match("{$",!1)||e.match(/(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)&&!i);){if(r=e.next(),!i&&'"'==r){o=!0;break}i=!i&&"\\"==r}return o&&(t.tokenize=null,t.phpEncapsStack.pop()),"string"}var o="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",l="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",a="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once";e.registerHelper("hintWords","php",[o,l,a].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\\w$]/);var s={name:"clike",helperType:"php",keywords:t(o),blockKeywords:t("catch do else elseif for foreach if switch try while finally"),atoms:t(l),builtin:t(a),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,t){return e.match(/<</)?(e.eatWhile(/[\w\.]/),t.tokenize=r(e.current().slice(3)),t.tokenize(e,t)):!1},"#":function(e){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"},"/":function(e){if(e.eat("/")){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"}return!1},'"':function(e,t){return t.phpEncapsStack||(t.phpEncapsStack=[]),t.phpEncapsStack.push(0),t.tokenize=i,t.tokenize(e,t)},"{":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&t.phpEncapsStack[t.phpEncapsStack.length-1]++,!1},"}":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&0==--t.phpEncapsStack[t.phpEncapsStack.length-1]&&(t.tokenize=i),!1}}};e.defineMode("php",function(t,r){function n(e,t){var r=t.curMode==o;if(e.sol()&&t.pending&&'"'!=t.pending&&"'"!=t.pending&&(t.pending=null),r)return r&&null==t.php.tokenize&&e.match("?>")?(t.curMode=i,t.curState=t.html,"meta"):o.token(e,t.curState);if(e.match(/^<\?\w*/))return t.curMode=o,t.curState=t.php,"meta";if('"'==t.pending||"'"==t.pending){for(;!e.eol()&&e.next()!=t.pending;);var n="string"}else if(t.pending&&e.pos<t.pending.end){e.pos=t.pending.end;var n=t.pending.style}else var n=i.token(e,t.curState);t.pending&&(t.pending=null);var l,a=e.current(),s=a.search(/<\?/);return-1!=s&&(t.pending="string"==n&&(l=a.match(/[\'\"]$/))&&!/\?>/.test(a)?l[0]:{end:e.pos,style:n},e.backUp(a.length-s)),n}var i=e.getMode(t,"text/html"),o=e.getMode(t,s);return{startState:function(){var t=e.startState(i),n=e.startState(o);return{html:t,php:n,curMode:r.startOpen?o:i,curState:r.startOpen?n:t,pending:null}},copyState:function(t){var r,n=t.html,l=e.copyState(i,n),a=t.php,s=e.copyState(o,a);return r=t.curMode==i?l:s,{html:l,php:s,curMode:t.curMode,curState:r,pending:t.pending}},token:n,indent:function(e,t){return e.curMode!=o&&/^\s*<\//.test(t)||e.curMode==o&&/^\?>/.test(t)?i.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",s)});(function(){function e(e){for(var t=[/for\s*?\((.*?)\)/,/\"(.*?)(\"|$)/,/\'(.*?)(\'|$)/,/\/\*(.*?)(\*\/|$)/,/\/\/.*/],n=[],i=0;t.length>i;i++)for(var a=0;e.length>a;){var r=e.substr(a).match(t[i]);if(null==r)break;n.push({start:a+r.index,end:a+r.index+r[0].length}),a+=r.index+Math.max(1,r[0].length)}return n.sort(function(e,t){return e.start-t.start}),n}function t(e,t){return CodeMirror.innerMode(e.getMode(),e.getTokenAt(t).state).mode}function n(e,t,n,i){var a=e.getMode(),r=e.getLine(t);if(null==i&&(i=r.length),!a.innerMode)return[{from:n,to:i,mode:a}];var o=e.getTokenAt({line:t,ch:n}).state,s=CodeMirror.innerMode(a,o).mode,l=[],c=new CodeMirror.StringStream(r);for(c.pos=c.start=n;;){a.token(c,o);var u=CodeMirror.innerMode(a,o).mode;if(u!=s){var d=c.start;"xml"==s.name&&">"==r.charAt(c.pos-1)&&(d=c.pos),l.push({from:n,to:d,mode:s}),n=d,s=u}if(c.pos>=i)break;c.start=c.pos}return i>n&&l.push({from:n,to:i,mode:s}),l}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(e){return e.replace(RegExp("(;|\\{|\\})([^\r\n])","g"),"$1\n$2")}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(t){var n=0,i=this.jsonMode?function(e){return e.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(e){return e.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},a=e(t),r="";if(null!=a){for(var o=0;a.length>o;o++)a[o].start>n&&(r+=i(t.substring(n,a[o].start)),n=a[o].start),n>=a[o].start&&a[o].end>=n&&(r+=t.substring(n,a[o].end),n=a[o].end);t.length>n&&(r+=i(t.substr(n)))}else r=i(t);return r.replace(/^\n*|\n*$/,"")}}),CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",wordWrapChars:[">"],autoFormatLineBreaks:function(e){for(var t=e.split("\n"),n=RegExp("(^\\s*?<|^[^<]*?)(.+)(>\\s*?$|[^>]*?$)"),i=RegExp("<","g"),a=RegExp("(>)([^\r\n])","g"),r=0;t.length>r;r++){var o=t[r].match(n);null!=o&&o.length>3&&(t[r]=o[1]+o[2].replace(i,"\n$&").replace(a,"$1\n$2")+o[3])}return t.join("\n")}}),CodeMirror.defineExtension("commentRange",function(e,n,i){var a=t(this,n),r=this;this.operation(function(){if(e)r.replaceRange(a.commentEnd,i),r.replaceRange(a.commentStart,n),n.line==i.line&&n.ch==i.ch&&r.setCursor(n.line,n.ch+a.commentStart.length);else{var t=r.getRange(n,i),o=t.indexOf(a.commentStart),s=t.lastIndexOf(a.commentEnd);o>-1&&s>-1&&s>o&&(t=t.substr(0,o)+t.substring(o+a.commentStart.length,s)+t.substr(s+a.commentEnd.length)),r.replaceRange(t,n,i)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var i=e.line;t.line>=i;i++)n.indentLine(i,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){var i=this;i.operation(function(){for(var a=e.line,r=t.line;r>=a;++a){for(var o={line:a,ch:a==e.line?e.ch:0},s={line:a,ch:a==r?t.ch:null},l=n(i,a,o.ch,s.ch),c="",u=i.getRange(o,s),d=0;l.length>d;++d){var p=l.length>1?u.slice(l[d].from,l[d].to):u;c&&(c+="\n"),c+=l[d].mode.autoFormatLineBreaks?l[d].mode.autoFormatLineBreaks(p):u}if(c!=u){for(var m=0,h=c.indexOf("\n");-1!=h;h=c.indexOf("\n",h+1),++m);i.replaceRange(c,o,s),a+=m,r+=m}}for(var a=e.line+1;r>=a;++a)i.indentLine(a,"smart");i.setSelection(e,i.getCursor(!1))})})})();!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){var r,n,i=this.length>>>0,o=!1;for(1<arguments.length&&(n=t,o=!0),r=0;i>r;++r)this.hasOwnProperty(r)&&(o?n=e(n,this[r],r,this):(n=this[r],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return n});var t,r="function"==typeof define&&define.amd,n=function(t){var r="Comic Sans MS"===t?"Courier New":"Comic Sans MS",n=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=n.css("fontFamily",r).width(),o=n.css("fontFamily",t+","+r).width();return n.remove(),i!==o},i={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:r,hasCodeMirror:r?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:n},o=function(){var t=function(e){return function(t){return e===t}},r=function(e,t){return e===t},n=function(){return!0},i=function(){return!1},o=function(e){return function(){return!e.apply(e,arguments)}},l=function(e){return e},a=0,s=function(e){var t=++a+"";return e?e+t:t},u=function(t){var r=e(document);return{top:t.top+r.scrollTop(),left:t.left+r.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},c=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t};return{eq:t,eq2:r,ok:n,fail:i,not:o,self:l,uniqueId:s,rect2bnd:u,invertObject:c}}(),l=function(){var e=function(e){return e[0]},t=function(e){return e[e.length-1]},r=function(e){return e.slice(0,e.length-1)},n=function(e){return e.slice(1)},i=function(e,t){var r=e.indexOf(t);return-1===r?null:e[r+1]},l=function(e,t){var r=e.indexOf(t);return-1===r?null:e[r-1]},a=function(e,t){return t=t||o.self,e.reduce(function(e,r){return e+t(r)},0)},s=function(e){for(var t=[],r=-1,n=e.length;++r<n;)t[r]=e[r];return t},u=function(r,i){if(!r.length)return[];var o=n(r);return o.reduce(function(e,r){var n=t(e);return i(t(n),r)?n[n.length]=r:e[e.length]=[r],e},[[e(r)]])},c=function(e){for(var t=[],r=0,n=e.length;n>r;r++)e[r]&&t.push(e[r]);return t};return{head:e,last:t,initial:r,tail:n,prev:l,next:i,sum:a,from:s,compact:c,clusterBy:u}}(),a=function(){var t=function(t){return t&&e(t).hasClass("note-editable")},r=function(t){return t&&e(t).hasClass("note-control-sizing")},n=function(t){var r;if(t.hasClass("note-air-editor")){var n=l.last(t.attr("id").split("-"));return r=function(t){return function(){return e(t+n)}},{editor:function(){return t},editable:function(){return t},popover:r("#note-popover-"),handle:r("#note-handle-"),dialog:r("#note-dialog-")}}return r=function(e){return function(){return t.find(e)}},{editor:function(){return t},dropzone:r(".note-dropzone"),toolbar:r(".note-toolbar"),editable:r(".note-editable"),codable:r(".note-codable"),statusbar:r(".note-statusbar"),popover:r(".note-popover"),handle:r(".note-handle"),dialog:r(".note-dialog")}},s=function(e){return function(t){return t&&t.nodeName===e}},u=function(e){return e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName)},c=function(e){return e&&/^UL|^OL/.test(e.nodeName)},f=function(e){return e&&/^TD|^TH/.test(e.nodeName)},d=function(e,r){for(;e;){if(r(e))return e;if(t(e))break;e=e.parentNode}return null},h=function(e,t){t=t||o.fail;var r=[];return d(e,function(e){return r.push(e),t(e)}),r},p=function(t,r){for(var n=h(t),i=r;i;i=i.parentNode)if(e.inArray(i,n)>-1)return i;return null},g=function(e,t){var r=[],n=!1,i=!1;return function o(l){if(l){if(l===e&&(n=!0),n&&!i&&r.push(l),l===t)return void(i=!0);for(var a=0,s=l.childNodes.length;s>a;a++)o(l.childNodes[a])}}(p(e,t)),r},m=function(e,t){t=t||o.fail;for(var r=[];e&&(r.push(e),!t(e));)e=e.previousSibling;return r},v=function(e,t){t=t||o.fail;for(var r=[];e&&(r.push(e),!t(e));)e=e.nextSibling;return r},y=function(e,t){var r=[];return t=t||o.ok,function n(i){e!==i&&t(i)&&r.push(i);for(var o=0,l=i.childNodes.length;l>o;o++)n(i.childNodes[o])}(e),r},b=function(e,t){var r=t.nextSibling,n=t.parentNode;return r?n.insertBefore(e,r):n.appendChild(e),e},w=function(t,r){return e.each(r,function(e,r){t.appendChild(r)}),t},x=s("#text"),C=function(e){return x(e)?e.nodeValue.length:e.childNodes.length},k=function(e){return 0===e.offset||e.offset===C(e.node)},L=function(e){for(var t=0;e=e.previousSibling;)t+=1;return t},S=function(e){return e&&e.childNodes&&e.childNodes.length},M=function(e){var r=e.node,n=e.offset;if(0===n)return t(r)?null:{node:r.parentNode,offset:L(r)};if(S(r)){var i=r.childNodes[n-1];return{node:i,offset:C(i)}}return{node:r,offset:n-1}},T=function(t,r){var n=l.initial(h(r,o.eq(t)));return e.map(n,L).reverse()},_=function(e,t){for(var r=e,n=0,i=t.length;i>n;n++)r=r.childNodes[t[n]];return r},N=function(e,t){if(0===t)return e;if(t>=C(e))return e.nextSibling;if(x(e))return e.splitText(t);var r=e.childNodes[t];return e=b(e.cloneNode(!1),e),w(e,v(r))},A=function(e,t,r){var n=h(t,o.eq(e));return 1===n.length?N(t,r):n.reduce(function(e,n){var i=n.cloneNode(!1);return b(i,n),e===t&&(e=N(e,r)),w(i,v(e)),i})},H=function(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var r=e.parentNode;if(!t){var n,i,o=[];for(n=0,i=e.childNodes.length;i>n;n++)o.push(e.childNodes[n]);for(n=0,i=o.length;i>n;n++)r.insertBefore(o[n],e)}r.removeChild(e)}},O=function(e){return a.isTextarea(e[0])?e.val():e.html()};return{blank:i.isMSIE?"&nbsp;":"<br/>",emptyPara:"<p><br/></p>",isEditable:t,isControlSizing:r,buildLayoutInfo:n,isText:x,isPara:u,isList:c,isTable:s("TABLE"),isCell:f,isAnchor:s("A"),isDiv:s("DIV"),isLi:s("LI"),isSpan:s("SPAN"),isB:s("B"),isU:s("U"),isS:s("S"),isI:s("I"),isImg:s("IMG"),isTextarea:s("TEXTAREA"),length:C,isEdgeBP:k,prevBP:M,ancestor:d,listAncestor:h,listNext:v,listPrev:m,listDescendant:y,commonAncestor:p,listBetween:g,insertAfter:b,position:L,makeOffsetPath:T,fromOffsetPath:_,splitTree:A,remove:H,html:O}}(),s={version:"0.5.2",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,codemirror:{theme:"light-table",mode:"text/html",htmlMode:!0,lineWrapping:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,matchTags:!0,autoCloseTags:!0,addModeClass:!0,indentUnit:4,smartIndent:!0,indentWithTabs:!0,electricChars:!0},lang:"en-US",direction:"ltr",toolbar:[["style",["style"]],["font",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],fontSizes:["8","9","10","11","12","14","18","24","36"],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onToolbarClick:null,onCreateLink:function(e){return-1!==e.indexOf("@")&&-1===e.indexOf(":")?e="mailto:"+e:-1===e.indexOf("://")&&(e="http://"+e),e},keyMap:{pc:{"CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{"CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}},u=function(){var t=function(t){return e.Deferred(function(r){e.extend(new FileReader,{onload:function(e){var t=e.target.result;r.resolve(t)},onerror:function(){r.reject(this)}}).readAsDataURL(t)}).promise()},r=function(t){return e.Deferred(function(r){e("<img>").one("load",function(){r.resolve(e(this))}).one("error abort",function(){r.reject(e(this))}).css({display:"none"}).appendTo(document.body).attr("src",t).attr('class','img-responsive')}).promise()};return{readFileAsDataURL:t,createImage:r}}(),c={isEdit:function(e){return-1!==[8,9,13,32].indexOf(e)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},f=function(){var t=function(t,r){if(i.jqueryVersion<1.9){var n={};return e.each(r,function(e,r){n[r]=t.css(r)}),n}return t.css.call(t,r)};this.stylePara=function(t,r){e.each(t.nodes(a.isPara),function(t,n){e(n).css(r)})},this.current=function(r,n){var i=e(a.isText(r.sc)?r.sc.parentNode:r.sc),o=["font-family","font-size","text-align","list-style-type","line-height"],l=t(i,o)||{};if(l["font-size"]=parseInt(l["font-size"],10),l["font-bold"]=document.queryCommandState("bold")?"bold":"normal",l["font-italic"]=document.queryCommandState("italic")?"italic":"normal",l["font-underline"]=document.queryCommandState("underline")?"underline":"normal",l["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",l["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",l["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",r.isOnList()){var s=["circle","disc","disc-leading-zero","square"],u=e.inArray(l["list-style-type"],s)>-1;l["list-style"]=u?"unordered":"ordered"}else l["list-style"]="none";var c=a.ancestor(r.sc,a.isPara);if(c&&c.style["line-height"])l["line-height"]=c.style.lineHeight;else{var f=parseInt(l["line-height"],10)/parseInt(l["font-size"],10);l["line-height"]=f.toFixed(1)}return l.image=a.isImg(n)&&n,l.anchor=r.isOnAnchor()&&a.ancestor(r.sc,a.isAnchor),l.aAncestor=a.listAncestor(r.sc,a.isEditable),l.range=r,l}},d=function(){var t=!!document.createRange,r=function(e,t){var r,n,i=e.parentElement(),o=document.body.createTextRange(),s=l.from(i.childNodes);for(r=0;r<s.length;r++)if(!a.isText(s[r])){if(o.moveToElementText(s[r]),o.compareEndPoints("StartToStart",e)>=0)break;n=s[r]}if(0!==r&&a.isText(s[r-1])){var u=document.body.createTextRange(),c=null;u.moveToElementText(n||i),u.collapse(!n),c=n?n.nextSibling:i.firstChild;var f=e.duplicate();f.setEndPoint("StartToStart",u);for(var d=f.text.replace(/[\r\n]/g,"").length;d>c.nodeValue.length&&c.nextSibling;)d-=c.nodeValue.length,c=c.nextSibling;{c.nodeValue}t&&c.nextSibling&&a.isText(c.nextSibling)&&d===c.nodeValue.length&&(d-=c.nodeValue.length,c=c.nextSibling),i=c,r=d}return{cont:i,offset:r}},n=function(e){var t=function(e,r){var n,i;if(a.isText(e)){var s=a.listPrev(e,o.not(a.isText)),u=l.last(s).previousSibling;n=u||e.parentNode,r+=l.sum(l.tail(s),a.length),i=!u}else{if(n=e.childNodes[r]||e,a.isText(n))return t(n,r);r=0,i=!1}return{cont:n,collapseToStart:i,offset:r}},r=document.body.createTextRange(),n=t(e.cont,e.offset);return r.moveToElementText(n.cont),r.collapse(n.collapseToStart),r.moveStart("character",n.offset),r},i=function(r,s,u,c){this.sc=r,this.so=s,this.ec=u,this.eo=c;var f=function(){if(t){var e=document.createRange();return e.setStart(r,s),e.setEnd(u,c),e}var i=n({cont:r,offset:s});return i.setEndPoint("EndToEnd",n({cont:u,offset:c})),i};this.getBPs=function(){return{sc:r,so:s,ec:u,eo:c}},this.getStartBP=function(){return{node:r,offset:s}},this.getEndBP=function(){return{node:u,offset:c}},this.select=function(){var e=f();if(t){var r=document.getSelection();r.rangeCount>0&&r.removeAllRanges(),r.addRange(e)}else e.select()},this.nodes=function(t){t=t||o.ok;var n=a.listBetween(r,u),i=l.compact(e.map(n,function(e){return a.ancestor(e,t)}));return e.map(l.clusterBy(i,o.eq2),l.head)},this.commonAncestor=function(){return a.commonAncestor(r,u)},this.expand=function(e){var t=a.ancestor(r,e),n=a.ancestor(u,e);if(!t&&!n)return new i(r,s,u,c);var o=this.getBPs();return t&&(o.sc=t,o.so=0),n&&(o.ec=n,o.eo=a.length(n)),new i(o.sc,o.so,o.ec,o.eo)},this.collapse=function(e){return e?new i(r,s,r,s):new i(u,c,u,c)},this.splitText=function(){var e=r===u,t=this.getBPs();return a.isText(u)&&!a.isEdgeBP(this.getEndBP())&&u.splitText(c),a.isText(r)&&!a.isEdgeBP(this.getStartBP())&&(t.sc=r.splitText(s),t.so=0,e&&(t.ec=t.sc,t.eo=c-s)),new i(t.sc,t.so,t.ec,t.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),r=a.prevBP(t.getStartBP());return e.each(t.nodes(),function(e,t){a.remove(t,!a.isPara(t))}),new i(r.node,r.offset,r.node,r.offset)};var d=function(e){return function(){var t=a.ancestor(r,e);return!!t&&t===a.ancestor(u,e)}};this.isOnEditable=d(a.isEditable),this.isOnList=d(a.isList),this.isOnAnchor=d(a.isAnchor),this.isOnCell=d(a.isCell),this.isCollapsed=function(){return r===u&&s===c},this.insertNode=function(r){var n=f();if(t)n.insertNode(r);else{var i="node-insert-node-target";r.id=i,n.pasteHTML(r.outerHTML),r=e("#"+i)[0]}return r},this.toString=function(){var e=f();return t?e.toString():e.text},this.bookmark=function(e){return{s:{path:a.makeOffsetPath(e,r),offset:s},e:{path:a.makeOffsetPath(e,u),offset:c}}},this.getClientRects=function(){var e=f();return e.getClientRects()}};return{create:function(e,n,o,l){if(arguments.length)2===arguments.length&&(o=e,l=n);else if(t){var a=document.getSelection();if(0===a.rangeCount)return null;var s=a.getRangeAt(0);e=s.startContainer,n=s.startOffset,o=s.endContainer,l=s.endOffset}else{var u=document.selection.createRange(),c=u.duplicate();c.collapse(!1);var f=u;f.collapse(!0);var d=r(f,!0),h=r(c,!1);e=d.cont,n=d.offset,o=h.cont,l=h.offset}return new i(e,n,o,l)},createFromNode:function(e){return this.create(e,0,e,1)},createFromBookmark:function(e,t){var r=a.fromOffsetPath(e,t.s.path),n=t.s.offset,o=a.fromOffsetPath(e,t.e.path),l=t.e.offset;return new i(r,n,o,l)}}}(),h=function(){this.tab=function(e,t){var r=a.ancestor(e.commonAncestor(),a.isCell),n=a.ancestor(r,a.isTable),i=a.listDescendant(n,a.isCell),o=l[t?"prev":"next"](i,r);o&&d.create(o,0).select()},this.createTable=function(t,r){for(var n,i=[],o=0;t>o;o++)i.push("<td>"+a.blank+"</td>");n=i.join("");for(var l,s=[],u=0;r>u;u++)s.push("<tr>"+n+"</tr>");l=s.join("");var c='<table class="table table-bordered">'+l+"</table>";return e(c)[0]}},p=function(){var t=new f,r=new h;this.saveRange=function(e){e.focus(),e.data("range",d.create())},this.restoreRange=function(e){var t=e.data("range");t&&(t.select(),e.focus())},this.currentStyle=function(e){var r=d.create();return r.isOnEditable()&&t.current(r,e)},this.undo=function(e){e.data("NoteHistory").undo(e)},this.redo=function(e){e.data("NoteHistory").redo(e)};for(var n=this.recordUndo=function(e){e.data("NoteHistory").recordUndo(e)},o=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],s=0,c=o.length;c>s;s++)this[o[s]]=function(e){return function(t,r){n(t),document.execCommand(e,!1,r)}}(o[s]);var p=function(t,r,i){n(t);var o=new Array(i+1).join("&nbsp;");r.insertNode(e('<span id="noteTab">'+o+"</span>")[0]);var l=e("#noteTab").removeAttr("id");r=d.create(l[0],1),r.select(),a.remove(l[0])};this.tab=function(e,t){var n=d.create();n.isCollapsed()&&n.isOnCell()?r.tab(n):p(e,n,t.tabsize)},this.untab=function(){var e=d.create();e.isCollapsed()&&e.isOnCell()&&r.tab(e,!0)},this.insertImage=function(e,t){u.createImage(t).then(function(t){n(e),t.css({display:""}),d.create().insertNode(t[0])}).fail(function(){var t=e.data("callbacks");t.onImageUploadError&&t.onImageUploadError()})},this.insertVideo=function(t,r){n(t);var i,o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,l=r.match(o),a=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/,s=r.match(a),u=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,c=r.match(u),f=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,h=r.match(f),p=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,g=r.match(p),m=/\/\/v\.youku\.com\/v_show\/id_(\w+)\.html/,v=r.match(m);if(l&&11===l[2].length){var y=l[2];i=e("<iframe>").attr("src","//www.youtube.com/embed/"+y).attr("width","640").attr("height","360")}else s&&s[0].length?i=e("<iframe>").attr("src",s[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true"):c&&c[0].length?i=e("<iframe>").attr("src",c[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed"):h&&h[3].length?i=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+h[3]).attr("width","640").attr("height","360"):g&&g[2].length?i=e("<iframe>").attr("src","//www.dailymotion.com/embed/video/"+g[2]).attr("width","640").attr("height","360"):v&&v[1].length&&(i=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+v[1]));i&&(i.attr("frameborder",0),d.create().insertNode(i[0]))},this.formatBlock=function(e,t){n(e),t=i.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)},this.formatPara=function(e){this.formatBlock(e,"P")};for(var s=1;6>=s;s++)this["formatH"+s]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(s);this.fontSize=function(e,t){n(e),document.execCommand("fontSize",!1,3),i.isFF?e.find("font[size=3]").removeAttr("size").css("font-size",t+"px"):e.find("span").filter(function(){return"medium"===this.style.fontSize}).css("font-size",t+"px")},this.lineHeight=function(e,r){n(e),t.stylePara(d.create(),{lineHeight:r})},this.unlink=function(e){var t=d.create();if(t.isOnAnchor()){n(e);var r=a.ancestor(t.sc,a.isAnchor);t=d.createFromNode(r),t.select(),document.execCommand("unlink")}},this.createLink=function(t,r,i){var o=r.url,l=r.text,a=r.newWindow,s=r.range;n(t),i.onCreateLink&&(o=i.onCreateLink(o)),s=s.deleteContents();var u=s.insertNode(e("<A>"+l+"</A>")[0]);e(u).attr({href:o,target:a?"_blank":""}),s=d.createFromNode(u),s.select()},this.getLinkInfo=function(t){t.focus();var r=d.create().expand(a.isAnchor),n=e(l.head(r.nodes(a.isAnchor)));return{range:r,text:r.toString(),isNewWindow:n.length?"_blank"===n.attr("target"):!0,url:n.length?n.attr("href"):""}},this.getVideoInfo=function(e){e.focus();var t=d.create();if(t.isOnAnchor()){var r=a.ancestor(t.sc,a.isAnchor);t=d.createFromNode(r)}return{text:t.toString()}},this.color=function(e,t){var r=JSON.parse(t),i=r.foreColor,o=r.backColor;n(e),i&&document.execCommand("foreColor",!1,i),o&&document.execCommand("backColor",!1,o)},this.insertTable=function(e,t){n(e);var i=t.split("x");d.create().insertNode(r.createTable(i[0],i[1]))},this.floatMe=function(e,t,r){n(e),r.css("float",t)},this.resize=function(e,t,r){n(e),r.css({width:e.width()*t+"px",height:""})},this.resizeTo=function(e,t,r){var n;if(r){var i=e.y/e.x,o=t.data("ratio");n={width:o>i?e.x:e.y/o,height:o>i?e.x*o:e.y}}else n={width:e.x,height:e.y};t.css(n)},this.removeMedia=function(e,t,r){n(e),r.detach()}},g=function(){var e=[],t=[],r=function(e){var t=e[0],r=d.create();return{contents:e.html(),bookmark:r.bookmark(t),scrollTop:e.scrollTop()}},n=function(e,t){e.html(t.contents).scrollTop(t.scrollTop),d.createFromBookmark(e[0],t.bookmark).select()};this.undo=function(i){var o=r(i);e.length&&(n(i,e.pop()),t.push(o))},this.redo=function(i){var o=r(i);t.length&&(n(i,t.pop()),e.push(o))},this.recordUndo=function(n){t=[],e.push(r(n))}},m=function(){this.update=function(t,r){var n=function(t,r){t.find(".dropdown-menu li a").each(function(){var t=e(this).data("value")+""==r+"";this.className=t?"checked":""})},i=function(e,r){var n=t.find(e);n.toggleClass("active",r())},o=t.find(".note-fontname");if(o.length){var a=r["font-family"];a&&(a=l.head(a.split(",")),a=a.replace(/\'/g,""),o.find(".note-current-fontname").text(a),n(o,a))}var s=t.find(".note-fontsize");s.find(".note-current-fontsize").text(r["font-size"]),n(s,parseFloat(r["font-size"]));var u=t.find(".note-height");n(u,parseFloat(r["line-height"])),i('button[data-event="bold"]',function(){return"bold"===r["font-bold"]}),i('button[data-event="italic"]',function(){return"italic"===r["font-italic"]}),i('button[data-event="underline"]',function(){return"underline"===r["font-underline"]}),i('button[data-event="strikethrough"]',function(){return"strikethrough"===r["font-strikethrough"]}),i('button[data-event="superscript"]',function(){return"superscript"===r["font-superscript"]}),i('button[data-event="subscript"]',function(){return"subscript"===r["font-subscript"]}),i('button[data-event="justifyLeft"]',function(){return"left"===r["text-align"]||"start"===r["text-align"]}),i('button[data-event="justifyCenter"]',function(){return"center"===r["text-align"]}),i('button[data-event="justifyRight"]',function(){return"right"===r["text-align"]}),i('button[data-event="justifyFull"]',function(){return"justify"===r["text-align"]}),i('button[data-event="insertUnorderedList"]',function(){return"unordered"===r["list-style"]}),i('button[data-event="insertOrderedList"]',function(){return"ordered"===r["list-style"]})},this.updateRecentColor=function(t,r,n){var i=e(t).closest(".note-color"),o=i.find(".note-recent-color"),l=JSON.parse(o.attr("data-value"));l[r]=n,o.attr("data-value",JSON.stringify(l));var a="backColor"===r?"background-color":"color";o.find("i").css(a,n)}},v=function(){var e=new m;this.update=function(t,r){e.update(t,r)},this.updateRecentColor=function(t,r,n){e.updateRecentColor(t,r,n)},this.activate=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(e,t){var r=e.find('button[data-event="fullscreen"]');r.toggleClass("active",t)},this.updateCodeview=function(e,t){var r=e.find('button[data-event="codeview"]');r.toggleClass("active",t)}},y=function(){var t=new m,r=function(t,r){var n=e(t),i=r?n.offset():n.position(),o=n.outerHeight(!0);return{left:i.left,top:i.top+o}},n=function(e,t){e.css({display:"block",left:t.left,top:t.top})},i=20;this.update=function(a,s,u){t.update(a,s);var c=a.find(".note-link-popover");if(s.anchor){var f=c.find("a"),d=e(s.anchor).attr("href");f.attr("href",d).html(d),n(c,r(s.anchor,u))}else c.hide();var h=a.find(".note-image-popover");s.image?n(h,r(s.image,u)):h.hide();var p=a.find(".note-air-popover");if(u&&!s.range.isCollapsed()){var g=o.rect2bnd(l.last(s.range.getClientRects()));n(p,{left:Math.max(g.left+g.width/2-i,0),top:g.top+g.height})}else p.hide()},this.updateRecentColor=function(e,r,n){t.updateRecentColor(e,r,n)},this.hide=function(e){e.children().hide()}},b=function(){this.update=function(t,r,n){var i=t.find(".note-control-selection");if(r.image){var o=e(r.image),l=n?o.offset():o.position(),a={w:o.outerWidth(!0),h:o.outerHeight(!0)};i.css({display:"block",left:l.left,top:l.top,width:a.w,height:a.h}).data("target",r.image);var s=a.w+"x"+a.h;i.find(".note-control-selection-info").text(s)}else i.hide()},this.hide=function(e){e.children().hide()}},w=function(){var t=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)};this.showImageDialog=function(r,n){return e.Deferred(function(e){var r=n.find(".note-image-dialog"),i=n.find(".note-image-input"),o=n.find(".note-image-url"),l=n.find(".note-image-btn");r.one("shown.bs.modal",function(){i.replaceWith(i.clone().on("change",function(){e.resolve(this.files),r.modal("hide")})),l.click(function(t){t.preventDefault(),e.resolve(o.val()),r.modal("hide")}),o.on("keyup paste",function(e){var r;r="paste"===e.type?e.originalEvent.clipboardData.getData("text"):o.val(),t(l,r)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){i.off("change"),o.off("keyup paste"),l.off("click"),"pending"===e.state()&&e.reject()}).modal("show")})},this.showVideoDialog=function(r,n,i){return e.Deferred(function(e){var r=n.find(".note-video-dialog"),o=r.find(".note-video-url"),l=r.find(".note-video-btn");r.one("shown.bs.modal",function(){o.val(i.text).keyup(function(){t(l,o.val())}).trigger("keyup").trigger("focus"),l.click(function(t){t.preventDefault(),e.resolve(o.val()),r.modal("hide")})}).one("hidden.bs.modal",function(){o.off("keyup"),l.off("click"),"pending"===e.state()&&e.reject()}).modal("show")})},this.showLinkDialog=function(r,n,i){return e.Deferred(function(e){var r=n.find(".note-link-dialog"),o=r.find(".note-link-text"),l=r.find(".note-link-url"),a=r.find(".note-link-btn"),s=r.find("input[type=checkbox]");r.one("shown.bs.modal",function(){o.val(i.text),o.keyup(function(){i.text=o.val()}),i.url||(i.url=i.text,t(a,i.text)),l.keyup(function(){t(a,l.val()),i.text||o.val(l.val())}).val(i.url).trigger("focus").trigger("select"),s.prop("checked",i.newWindow),a.one("click",function(t){t.preventDefault(),e.resolve({range:i.range,url:l.val(),text:o.val(),newWindow:s.is(":checked")}),r.modal("hide")})}).one("hidden.bs.modal",function(){l.off("keyup"),"pending"===e.state()&&e.reject()}).modal("show")}).promise()},this.showHelpDialog=function(t,r){return e.Deferred(function(e){var t=r.find(".note-help-dialog");t.one("hidden.bs.modal",function(){e.resolve()}).modal("show")}).promise()}};i.hasCodeMirror&&(i.isSupportAmd?require(["CodeMirror"],function(e){t=e}):t=window.CodeMirror);var x=function(){var r=e(window),n=e(document),o=e("html, body"),s=new p,f=new v,d=new y,h=new b,m=new w,x=function(t){var r=e(t).closest(".note-editor, .note-air-editor, .note-air-layout");if(!r.length)return null;var n;return n=r.is(".note-editor, .note-air-editor")?r:e("#note-editor-"+l.last(r.attr("id").split("-"))),a.buildLayoutInfo(n)},C=function(t,r){s.restoreRange(t);var n=t.data("callbacks");n.onImageUpload?n.onImageUpload(r,s,t):e.each(r,function(e,r){u.readFileAsDataURL(r).then(function(e){s.insertImage(t,e)}).fail(function(){n.onImageUploadError&&n.onImageUploadError()})})},k={showLinkDialog:function(e){var t=e.editor(),r=e.dialog(),n=e.editable(),i=s.getLinkInfo(n),o=t.data("options");s.saveRange(n),m.showLinkDialog(n,r,i).then(function(t){s.restoreRange(n),s.createLink(n,t,o),d.hide(e.popover())}).fail(function(){s.restoreRange(n)})},showImageDialog:function(e){var t=e.dialog(),r=e.editable();s.saveRange(r),m.showImageDialog(r,t).then(function(e){s.restoreRange(r),"string"==typeof e?s.insertImage(r,e):C(r,e)}).fail(function(){s.restoreRange(r)})},showVideoDialog:function(e){var t=e.dialog(),r=e.editable(),n=s.getVideoInfo(r);s.saveRange(r),m.showVideoDialog(r,t,n).then(function(e){s.restoreRange(r),s.insertVideo(r,e)}).fail(function(){s.restoreRange(r)})},showHelpDialog:function(e){var t=e.dialog(),r=e.editable();s.saveRange(r),m.showHelpDialog(r,t).then(function(){s.restoreRange(r)})},fullscreen:function(e){var t=e.editor(),n=e.toolbar(),i=e.editable(),l=e.codable(),a=t.data("options"),s=function(e){t.css("width",e.w),i.css("height",e.h),l.css("height",e.h),l.data("cmeditor")&&l.data("cmeditor").setsize(null,e.h)};t.toggleClass("fullscreen");var u=t.hasClass("fullscreen");u?(i.data("orgheight",i.css("height")),r.on("resize",function(){s({w:r.width(),h:r.height()-n.outerHeight()})}).trigger("resize"),o.css("overflow","hidden")):(r.off("resize"),s({w:a.width||"",h:i.data("orgheight")}),o.css("overflow","visible")),f.updateFullscreen(n,u)},codeview:function(e){var r,n,o=e.editor(),l=e.toolbar(),s=e.editable(),u=e.codable(),c=e.popover(),h=o.data("options");o.toggleClass("codeview");var p=o.hasClass("codeview");p?(u.val(s.html()),u.height(s.height()),f.deactivate(l),d.hide(c),u.focus(),i.hasCodeMirror&&(r=t.fromTextArea(u[0],h.codemirror),h.codemirror.tern&&(n=new t.TernServer(h.codemirror.tern),r.ternServer=n,r.on("cursorActivity",function(e){n.updateArgHints(e)})),r.setSize(null,s.outerHeight()),r.autoFormatRange&&r.autoFormatRange({line:0,ch:0},{line:r.lineCount(),ch:r.getTextArea().value.length}),u.data("cmEditor",r))):(i.hasCodeMirror&&(r=u.data("cmEditor"),u.val(r.getValue()),r.toTextArea()),s.html(u.val()||a.emptyPara),s.height(h.height?u.height():"auto"),f.activate(l),s.focus()),f.updateCodeview(e.toolbar(),p)}},L=function(e){a.isImg(e.target)&&e.preventDefault()
},S=function(e){setTimeout(function(){var t=x(e.currentTarget||e.target),r=s.currentStyle(e.target);if(r){var n=t.editor().data("options").airMode;n||f.update(t.toolbar(),r),d.update(t.popover(),r,n),h.update(t.handle(),r,n)}},0)},M=function(e){var t=x(e.currentTarget||e.target);d.hide(t.popover()),h.hide(t.handle())},T=function(e){var t=e.originalEvent.clipboardData;if(t&&t.items&&t.items.length){var r=x(e.currentTarget||e.target),n=l.head(t.items),i="file"===n.kind&&-1!==n.type.indexOf("image/");i&&C(r.editable(),[n.getAsFile()])}},_=function(t){if(a.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var r=x(t.target),i=r.handle(),o=r.popover(),l=r.editable(),u=r.editor(),c=i.find(".note-control-selection").data("target"),f=e(c),p=f.offset(),g=n.scrollTop(),m=u.data("options").airMode;n.on("mousemove",function(e){s.resizeTo({x:e.clientX-p.left,y:e.clientY-(p.top-g)},f,!e.shiftKey),h.update(i,{image:c},m),d.update(o,{image:c},m)}).one("mouseup",function(){n.off("mousemove")}),f.data("ratio")||f.data("ratio",f.height()/f.width()),s.recordUndo(l)}},N=function(t){var r=e(t.target).closest("[data-event]");r.length&&t.preventDefault()},A=function(t){var r=e(t.target).closest("[data-event]");if(r.length){var n,i=r.attr("data-event"),o=r.attr("data-value"),a=x(t.target);if(-1!==e.inArray(i,["resize","floatMe","removeMedia"])){var u=a.handle().find(".note-control-selection");n=e(u.data("target"))}if(s[i]){var c=a.editable();c.trigger("focus"),s[i](c,o,n)}else k[i]&&k[i].call(this,a);if(-1!==e.inArray(i,["backColor","foreColor"])){var h=a.editor().data("options",h),p=h.airMode?d:f;p.updateRecentColor(l.head(r),i,o)}S(t)}},H=24,O=function(e){e.preventDefault(),e.stopPropagation();var t=x(e.target).editable(),r=t.offset().top-n.scrollTop(),i=x(e.currentTarget||e.target),o=i.editor().data("options");n.on("mousemove",function(e){var n=e.clientY-(r+H);n=o.minHeight>0?Math.max(n,o.minHeight):n,n=o.maxHeight>0?Math.min(n,o.maxHeight):n,t.height(n)}).one("mouseup",function(){n.off("mousemove")})},D=18,I=function(t,r){var n,i=e(t.target.parentNode),o=i.next(),l=i.find(".note-dimension-picker-mousecatcher"),a=i.find(".note-dimension-picker-highlighted"),s=i.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var u=e(t.target).offset();n={x:t.pageX-u.left,y:t.pageY-u.top}}else n={x:t.offsetX,y:t.offsetY};var c={c:Math.ceil(n.x/D)||1,r:Math.ceil(n.y/D)||1};a.css({width:c.c+"em",height:c.r+"em"}),l.attr("data-value",c.c+"x"+c.r),3<c.c&&c.c<r.insertTableMaxSize.col&&s.css({width:c.c+1+"em"}),3<c.r&&c.r<r.insertTableMaxSize.row&&s.css({height:c.r+1+"em"}),o.html(c.c+" x "+c.r)},W=function(t){var r=e(),i=t.dropzone,o=t.dropzone.find(".note-dropzone-message");n.on("dragenter",function(e){var n=t.editor.hasClass("codeview");n||r.length||(t.editor.addClass("dragover"),i.width(t.editor.width()),i.height(t.editor.height()),o.text("Drag Image Here")),r=r.add(e.target)}).on("dragleave",function(e){r=r.not(e.target),r.length||t.editor.removeClass("dragover")}).on("drop",function(){r=e(),t.editor.removeClass("dragover")}),i.on("dragenter",function(){i.addClass("hover"),o.text("Drop Image")}).on("dragleave",function(){i.removeClass("hover"),o.text("Drag Image Here")}),i.on("drop",function(e){e.preventDefault();var t=e.originalEvent.dataTransfer;if(t&&t.files){var r=x(e.currentTarget||e.target);r.editable().focus(),C(r.editable(),t.files)}}).on("dragover",!1)};this.bindKeyMap=function(e,t){var r=e.editor,n=e.editable;e=x(n),n.on("keydown",function(i){var o=[];i.metaKey&&o.push("CMD"),i.ctrlKey&&!i.altKey&&o.push("CTRL"),i.shiftKey&&o.push("SHIFT");var l=c.nameFromCode[i.keyCode];l&&o.push(l);var a=t[o.join("+")];a?(i.preventDefault(),s[a]?s[a](n,r.data("options")):k[a]&&k[a].call(this,e)):c.isEdit(i.keyCode)&&s.recordUndo(n)})},this.attach=function(e,t){this.bindKeyMap(e,t.keyMap[i.isMac?"mac":"pc"]),e.editable.on("mousedown",L),e.editable.on("keyup mouseup",S),e.editable.on("scroll",M),e.editable.on("paste",T),e.handle.on("mousedown",_),e.popover.on("click",A),e.popover.on("mousedown",N),t.airMode||(t.disableDragAndDrop||W(e),e.toolbar.on("click",A),e.toolbar.on("mousedown",N),t.disableResizeEditor||e.statusbar.on("mousedown",O));var r=t.airMode?e.popover:e.toolbar,n=r.find(".note-dimension-picker-mousecatcher");if(n.css({width:t.insertTableMaxSize.col+"em",height:t.insertTableMaxSize.row+"em"}).on("mousemove",function(e){I(e,t)}),e.editor.data("options",t),t.styleWithSpan&&!i.isMSIE&&setTimeout(function(){document.execCommand("styleWithCSS",0,!0)},0),e.editable.data("NoteHistory",new g),t.onenter&&e.editable.keypress(function(e){e.keyCode===c.ENTER&&t.onenter(e)}),t.onfocus&&e.editable.focus(t.onfocus),t.onblur&&e.editable.blur(t.onblur),t.onkeyup&&e.editable.keyup(t.onkeyup),t.onkeydown&&e.editable.keydown(t.onkeydown),t.onpaste&&e.editable.on("paste",t.onpaste),t.onToolbarClick&&e.toolbar.click(t.onToolbarClick),t.onChange){var o=function(){t.onChange(e.editable,e.editable.html())};if(i.isMSIE){var l="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";e.editable.on(l,o)}else e.editable.on("input",o)}e.editable.data("callbacks",{onAutoSave:t.onAutoSave,onImageUpload:t.onImageUpload,onImageUploadError:t.onImageUploadError,onFileUpload:t.onFileUpload,onFileUploadError:t.onFileUpload})},this.dettach=function(e,t){e.editable.off(),e.popover.off(),e.handle.off(),e.dialog.off(),t.airMode||(e.dropzone.off(),e.toolbar.off(),e.statusbar.off())}},C=function(){var t=function(e,t){var r=t.event,n=t.value,i=t.title,o=t.className,l=t.dropdown;return'<button type="button" class="btn btn-success btn-sm'+(o?" "+o:"")+(l?" dropdown-toggle":"")+'"'+(l?' data-toggle="dropdown"':"")+(i?' title="'+i+'"':"")+(r?' data-event="'+r+'"':"")+(n?" data-value='"+n+"'":"")+' tabindex="-1">'+e+(l?' <span class="caret"></span>':"")+"</button>"+(l||"")},r=function(e,r){var n='<i class="'+e+'"></i>';return t(n,r)},n=function(e,t){return'<div class="'+e+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content">'+t+"</div></div>"},l=function(e,t,r,n){return'<div class="'+e+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(t?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+t+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body"><div class="row-fluid">'+r+"</div></div>"+(n?'<div class="modal-footer">'+n+"</div>":"")+"</form></div></div></div>"},s={picture:function(e){return r("fa fa-picture-o icon-picture",{event:"showImageDialog",title:e.image.image})},link:function(e){return r("fa fa-link icon-link",{event:"showLinkDialog",title:e.link.link})},video:function(e){return r("fa fa-youtube-play icon-play",{event:"showVideoDialog",title:e.video.video})},table:function(e){var t='<ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return r("fa fa-table icon-table",{title:e.table.table,dropdown:t})},style:function(e,t){var n=t.styleTags.reduce(function(t,r){var n=e.style["p"===r?"normal":r];return t+'<li><a data-event="formatBlock" href="#" data-value="'+r+'">'+("p"===r||"pre"===r?n:"<"+r+">"+n+"</"+r+">")+"</a></li>"},"");return r("fa fa-magic icon-magic",{title:e.style.style,dropdown:'<ul class="dropdown-menu">'+n+"</ul>"})},fontname:function(e,r){var n=r.fontNames.reduce(function(e,t){return i.isFontInstalled(t)?e+'<li><a data-event="fontName" href="#" data-value="'+t+'"><i class="fa fa-check icon-ok"></i> '+t+"</a></li>":e},""),o='<span class="note-current-fontname">'+r.defaultFontName+"</span>";return t(o,{title:e.font.name,dropdown:'<ul class="dropdown-menu">'+n+"</ul>"})},fontsize:function(e,r){var n=r.fontSizes.reduce(function(e,t){return e+'<li><a data-event="fontSize" href="#" data-value="'+t+'"><i class="fa fa-check icon-ok"></i> '+t+"</a></li>"},""),i='<span class="note-current-fontsize">11</span>';return t(i,{title:e.font.size,dropdown:'<ul class="dropdown-menu">'+n+"</ul>"})},color:function(e){var r='<i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i>',n=t(r,{className:"note-recent-color",title:e.color.recent,event:"color",value:'{"backColor":"yellow"}'}),i='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+e.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+e.color.transparent+'">'+e.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+e.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">'+e.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',o=t("",{title:e.color.more,dropdown:i});return n+o},bold:function(e){return r("fa fa-bold icon-bold",{event:"bold",title:e.font.bold})},italic:function(e){return r("fa fa-italic icon-italic",{event:"italic",title:e.font.italic})},underline:function(e){return r("fa fa-underline icon-underline",{event:"underline",title:e.font.underline})},strikethrough:function(e){return r("fa fa-strikethrough icon-strikethrough",{event:"strikethrough",title:e.font.strikethrough})},superscript:function(e){return r("fa fa-superscript icon-superscript",{event:"superscript",title:e.font.superscript})},subscript:function(e){return r("fa fa-subscript icon-subscript",{event:"subscript",title:e.font.subscript})},clear:function(e){return r("fa fa-eraser icon-eraser",{event:"removeFormat",title:e.font.clear})},ul:function(e){return r("fa fa-list-ul icon-list-ul",{event:"insertUnorderedList",title:e.lists.unordered})},ol:function(e){return r("fa fa-list-ol icon-list-ol",{event:"insertOrderedList",title:e.lists.ordered})},paragraph:function(e){var t=r("fa fa-align-left icon-align-left",{title:e.paragraph.left,event:"justifyLeft"}),n=r("fa fa-align-center icon-align-center",{title:e.paragraph.center,event:"justifyCenter"}),i=r("fa fa-align-right icon-align-right",{title:e.paragraph.right,event:"justifyRight"}),o=r("fa fa-align-justify icon-align-justify",{title:e.paragraph.justify,event:"justifyFull"}),l=r("fa fa-outdent icon-indent-left",{title:e.paragraph.outdent,event:"outdent"}),a=r("fa fa-indent icon-indent-right",{title:e.paragraph.indent,event:"indent"}),s='<div class="dropdown-menu"><div class="note-align btn-group">'+t+n+i+o+'</div><div class="note-list btn-group">'+a+l+"</div></div>";return r("fa fa-align-left icon-align-left",{title:e.paragraph.paragraph,dropdown:s})},height:function(e,t){var n=t.lineHeights.reduce(function(e,t){return e+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(t)+'"><i class="fa fa-check icon-ok"></i> '+t+"</a></li>"},"");return r("fa fa-text-height icon-text-height",{title:e.font.height,dropdown:'<ul class="dropdown-menu">'+n+"</ul>"})},help:function(e){return r("fa fa-question icon-question",{event:"showHelpDialog",title:e.options.help})},fullscreen:function(e){return r("fa fa-arrows-alt icon-fullscreen",{event:"fullscreen",title:e.options.fullscreen})},codeview:function(e){return r("fa fa-code icon-code",{event:"codeview",title:e.options.codeview})},undo:function(e){return r("fa fa-undo icon-undo",{event:"undo",title:e.history.undo})},redo:function(e){return r("fa fa-repeat icon-repeat",{event:"redo",title:e.history.redo})},hr:function(e){return r("fa fa-minus icon-hr",{event:"insertHorizontalRule",title:e.hr.insert})}},u=function(e,i){var o=function(){var t=r("fa fa-edit icon-edit",{title:e.link.edit,event:"showLinkDialog"}),i=r("fa fa-unlink icon-unlink",{title:e.link.unlink,event:"unlink"}),o='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+t+i+"</div>";return n("note-link-popover",o)},l=function(){var i=t('<span class="note-fontsize-10">100%</span>',{title:e.image.resizeFull,event:"resize",value:"1"}),o=t('<span class="note-fontsize-10">50%</span>',{title:e.image.resizeHalf,event:"resize",value:"0.5"}),l=t('<span class="note-fontsize-10">25%</span>',{title:e.image.resizeQuarter,event:"resize",value:"0.25"}),a=r("fa fa-align-left icon-align-left",{title:e.image.floatLeft,event:"floatMe",value:"left"}),s=r("fa fa-align-right icon-align-right",{title:e.image.floatRight,event:"floatMe",value:"right"}),u=r("fa fa-align-justify icon-align-justify",{title:e.image.floatNone,event:"floatMe",value:"none"}),c=r("fa fa-trash-o icon-trash",{title:e.image.remove,event:"removeMedia",value:"none"}),f='<div class="btn-group">'+i+o+l+'</div><div class="btn-group">'+a+s+u+'</div><div class="btn-group">'+c+"</div>";return n("note-image-popover",f)},a=function(){for(var t="",r=0,o=i.airPopover.length;o>r;r++){var l=i.airPopover[r];t+='<div class="note-'+l[0]+' btn-group">';for(var a=0,u=l[1].length;u>a;a++)t+=s[l[1][a]](e,i);t+="</div>"}return n("note-air-popover",t)};return'<div class="note-popover">'+o()+l()+(i.airMode?a():"")+"</div>"},c=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},f=function(e,t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+e+"</th></tr></thead><tbody>"+t+"</tbody></table>"},d=function(e){var t="<tr><td> + B</td><td>"+e.font.bold+"</td></tr><tr><td> + I</td><td>"+e.font.italic+"</td></tr><tr><td> + U</td><td>"+e.font.underline+"</td></tr><tr><td> +  + S</td><td>"+e.font.strikethrough+"</td></tr><tr><td> + \\</td><td>"+e.font.clear+"</td></tr>";return f(e.shortcut.textFormatting,t)},h=function(e){var t="<tr><td> + Z</td><td>"+e.history.undo+"</td></tr><tr><td> +  + Z</td><td>"+e.history.redo+"</td></tr><tr><td> + ]</td><td>"+e.paragraph.indent+"</td></tr><tr><td> + [</td><td>"+e.paragraph.outdent+"</td></tr><tr><td> + ENTER</td><td>"+e.hr.insert+"</td></tr>";return f(e.shortcut.action,t)},p=function(e){var t="<tr><td> +  + L</td><td>"+e.paragraph.left+"</td></tr><tr><td> +  + E</td><td>"+e.paragraph.center+"</td></tr><tr><td> +  + R</td><td>"+e.paragraph.right+"</td></tr><tr><td> +  + J</td><td>"+e.paragraph.justify+"</td></tr><tr><td> +  + NUM7</td><td>"+e.lists.ordered+"</td></tr><tr><td> +  + NUM8</td><td>"+e.lists.unordered+"</td></tr>";return f(e.shortcut.paragraphFormatting,t)},g=function(e){var t="<tr><td> + NUM0</td><td>"+e.style.normal+"</td></tr><tr><td> + NUM1</td><td>"+e.style.h1+"</td></tr><tr><td> + NUM2</td><td>"+e.style.h2+"</td></tr><tr><td> + NUM3</td><td>"+e.style.h3+"</td></tr><tr><td> + NUM4</td><td>"+e.style.h4+"</td></tr><tr><td> + NUM5</td><td>"+e.style.h5+"</td></tr><tr><td> + NUM6</td><td>"+e.style.h6+"</td></tr>";return f(e.shortcut.documentStyle,t)},m=function(e,t){var r=t.extraKeys,n="";for(var i in r)r.hasOwnProperty(i)&&(n+="<tr><td>"+i+"</td><td>"+r[i]+"</td></tr>");return f(e.shortcut.extraKeys,n)},v=function(e,t){var r='<table class="note-shortcut-layout"><tbody><tr><td>'+h(e,t)+"</td><td>"+d(e,t)+"</td></tr><tr><td>"+g(e,t)+"</td><td>"+p(e,t)+"</td></tr>";return t.extraKeys&&(r+='<tr><td colspan="2">'+m(e,t)+"</td></tr>"),r+="</tbody</table>"},y=function(e){return e.replace(//g,"Ctrl").replace(//g,"Shift")},b=function(e,t){var r=function(){var t="<h5>"+e.image.selectFromFiles+'</h5><input class="note-image-input" type="file" name="files" accept="image/*" /><h5>'+e.image.url+'</h5><input class="note-image-url form-control" type="text" />',r='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+e.image.insert+"</button>";return l("note-image-dialog",e.image.insert,t,r)},n=function(){var r='<div class="form-group"><div class="col-sm-12"><label>'+e.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div></div><div class="form-group"><div class="col-sm-12"><label>'+e.link.url+'</label><input class="note-link-url form-control" type="text" /></div></div>'+(t.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+e.link.openInNewWindow+"</label></div>"),n='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+e.link.insert+"</button>";return l("note-link-dialog",e.link.insert,r,n)},o=function(){var t='<div class="form-group"><div class="col-sm-12"><label>'+e.video.url+'</label>&nbsp;<small class="text-muted">'+e.video.providers+'</small><input class="note-video-url form-control" type="text" /></div></div>',r='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+e.video.insert+"</button>";return l("note-video-dialog",e.video.insert,t,r)},a=function(){var r='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+e.shortcut.close+'</a><div class="title">'+e.shortcut.shortcuts+"</div>"+(i.isMac?v(e,t):y(v(e,t)))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.2</a>  <a href="//github.com/HackerWins/summernote" target="_blank">Project</a>  <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p>';return l("note-help-dialog","",r,"")};return'<div class="note-dialog">'+r()+n()+o()+a()+"</div>"},w=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},x=function(e){return i.isMac&&(e=e.replace("CMD","").replace("SHIFT","")),e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},C=function(t,r,n){var i=o.invertObject(r),l=t.find("button");l.each(function(t,r){var n=e(r),o=i[n.data("event")];o&&n.attr("title",function(e,t){return t+" ("+x(o)+")"})}).tooltip({container:"body",trigger:"hover",placement:n||"top"}).on("click",function(){e(this).tooltip("hide")})},k=function(t,r){var n=r.colors;t.find(".note-color-palette").each(function(){for(var t=e(this),r=t.attr("data-target-event"),i=[],o=0,l=n.length;l>o;o++){for(var a=n[o],s=[],u=0,c=a.length;c>u;u++){var f=a[u];s.push(['<button type="button" class="note-color-btn" style="background-color:',f,';" data-event="',r,'" data-value="',f,'" title="',f,'" data-toggle="button" tabindex="-1"></button>'].join(""))}i.push("<div>"+s.join("")+"</div>")}t.html(i.join(""))})};this.createLayoutByAirMode=function(t,r){var n=r.keyMap[i.isMac?"mac":"pc"],l=e.summernote.lang[r.lang],a=o.uniqueId();t.addClass("note-air-editor note-editable"),t.attr({id:"note-editor-"+a,contentEditable:!0});var s=document.body,f=e(u(l,r));f.addClass("note-air-layout"),f.attr("id","note-popover-"+a),f.appendTo(s),C(f,n),k(f,r);var d=e(c());d.addClass("note-air-layout"),d.attr("id","note-handle-"+a),d.appendTo(s);var h=e(b(l,r));h.addClass("note-air-layout"),h.attr("id","note-dialog-"+a),h.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")}),h.appendTo(s)},this.createLayoutByFrame=function(t,r){var n=e('<div class="note-editor"></div>');r.width&&n.width(r.width),r.height>0&&e('<div class="note-statusbar">'+(r.disableResizeEditor?"":w())+"</div>").prependTo(n);var o=!t.is(":disabled"),l=e('<div class="note-editable" contentEditable="'+o+'"></div>').prependTo(n);r.height&&l.height(r.height),r.direction&&l.attr("dir",r.direction),l.html(a.html(t)||a.emptyPara),e('<textarea class="note-codable"></textarea>').prependTo(n);for(var f=e.summernote.lang[r.lang],d="",h=0,p=r.toolbar.length;p>h;h++){var g=r.toolbar[h];d+='<div class="note-'+g[0]+' btn-group">';for(var m=0,v=g[1].length;v>m;m++)d+=s[g[1][m]](f,r);d+="</div>"}d='<div class="note-toolbar btn-toolbar">'+d+"</div>";var y=e(d).prependTo(n),x=r.keyMap[i.isMac?"mac":"pc"];k(y,r),C(y,x,"bottom");var L=e(u(f,r)).prependTo(n);k(L,r),C(L,x),e(c()).prependTo(n);var S=e(b(f,r)).prependTo(n);S.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")}),e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(n),n.insertAfter(t),t.hide()},this.noteEditorFromHolder=function(t){return t.hasClass("note-air-editor")?t:t.next().hasClass("note-editor")?t.next():e()},this.createLayout=function(e,t){this.noteEditorFromHolder(e).length||(t.airMode?this.createLayoutByAirMode(e,t):this.createLayoutByFrame(e,t))},this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);if(t.length){var r=a.buildLayoutInfo(t);for(var n in r)r.hasOwnProperty(n)&&(r[n]=r[n].call());return r}},this.removeLayout=function(e,t,r){r.airMode?(e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),t.popover.remove(),t.handle.remove(),t.dialog.remove()):(e.html(t.editable.html()),t.editor.remove(),e.show())}};e.summernote=e.summernote||{},e.extend(e.summernote,s);var k=new C,L=new x;e.fn.extend({summernote:function(t){if(t=e.extend({},e.summernote.options,t),this.each(function(r,n){var i=e(n);k.createLayout(i,t);var o=k.layoutInfoFromHolder(i);L.attach(o,t),a.isTextarea(i[0])&&i.closest("form").submit(function(){i.html(i.code())})}),this.first().length&&t.focus){var r=k.layoutInfoFromHolder(this.first());r.editable.focus()}return this.length&&t.oninit&&t.oninit(),this},code:function(t){if(void 0===t){var r=this.first();if(!r.length)return;var n=k.layoutInfoFromHolder(r);if(n&&n.editable){var o=n.editor.hasClass("codeview");return o&&i.hasCodeMirror&&n.codable.data("cmEditor").save(),o?n.codable.val():n.editable.html()}return r.html()}return this.each(function(r,n){var i=k.layoutInfoFromHolder(e(n));i&&i.editable&&i.editable.html(t)}),this},destroy:function(){return this.each(function(t,r){var n=e(r),i=k.layoutInfoFromHolder(n);if(i&&i.editable){var o=i.editor.data("options");L.dettach(i,o),k.removeLayout(n,i,o)}}),this}})});function getURLVar(a){
	var b=String(document.location).toLowerCase().split('?'),c='';
	if(b[1]){
		var d=b[1].split('&');
		for(var i=0;i<=d.length;i++){
			if(d[i]){
				var e=d[i].split('=');
				if(e[0]&&e[0]==a.toLowerCase()){
					c=e[1];
				}
			}
		}
	}
	return c;
}
token=getURLVar('token');
route=getURLVar('route');

if(!route){
	$('#dashboard').addClass('active');
}else{
	part=route.split('/');
	if(part[1]){
		$('a[href*="'+part[0]+'/'+part[1]+'"]').parents('li[id]').addClass('active');
	}
}

function filter(){
	url='index.php?route='+getURLVar('route')+'&token='+token;
	$('#filter').find('select,:text').each(function(){
		var a=$(this).val();
		if(a&&a!='*'){
			url+='&'+$(this).attr('name')+'='+encodeURIComponent(a);
		}
	});
	
	location=url;
}
!function(d){
	var c=function(a,f){
		f=d.extend({},d.fn.rowlink.defaults,f);
		var e=a.nodeName.toLowerCase()=="tr"?d(a):d(a).find("tr:not(#filter):has(td)").not(".rowlink-skip");
		e.each(function(){
			var g=d(this).find(f.target).first();
			if(!g.length){
				return
			}
			var h=g.attr("href");
			d(this).find("td").not(".rowlink-skip").click(function(e){
				if(e.target.className!='rowlink-skip'){
					window.location=h
				}
			}),d(this).addClass("rowlink")
		})
	};
	d.fn.rowlink=function(a){
		return this.each(function(){
			var f=d(this),b=f.data("rowlink");
			b||f.data("rowlink",b=new c(this,a))
		})
	},d.fn.rowlink.defaults={
		target:"a:not([target]):not([onclick])"
	},d.fn.rowlink.Constructor=c,d(function(){
		d('[data-link="row"]').each(function(){
			d(this).rowlink(d(this).data())
		})
	})
}(window.jQuery);

$(document).ajaxError(function(event,xhr,ajaxSettings,thrownError){
	$('#notification').html($('<div>',{class:'alert alert-danger'}).html(thrownError+"\r\n"+xhr.statusText));
});

$(document).ready(function(){
	$('.summernote').summernote({
		height: 200,
		minHeight: null,
		maxHeight: null,
		toolbar: [
			['style', ['style']],
			['font', ['bold', 'italic', 'underline']],
			['fontname', ['fontname']],
			['fontsize', ['fontsize']], // Still buggy
			['color', ['color']],
			['para', ['ul', 'ol', 'paragraph']],
			['table', ['table']],
			['insert', ['link', 'picture', 'video', 'hr']],
			['view', ['codeview']],
			['help', ['help']]
		 ],
		 onImageUpload: function(files, editor, $editable) {
			sendFile(files[0], editor, $editable);
		  }
	});
	
	function sendFile(file, editor, welEditable) {
		var data = new FormData();
		data.append("image", file);
		data.append("directory", 'content');
		
		$.ajax({
			url:'index.php?route=common/filemanager/editor_upload&token=' + token,
			data: data,
			cache: false,
			contentType: false,
			processData: false,
			dataType: 'json',
			type: 'POST',
			success: function(json){
				if (json['success']) {
					editor.insertImage(welEditable, json['success']);
				} else {
					alert(json['error']);	
				}
			},
			error: function(jqXHR, textStatus, errorThrown) {
				console.log(textStatus+" "+errorThrown);
			}
		});
	}
	
	$(document).on('click', '.note-editor .dropdown-menu a', function(e){
		e.preventDefault();
	});
	
	$('.dropdown-submenu a').on('touchstart click',function(e){
		e.stopPropagation();
	});

	$('#btn-delete').on('click',function(e){
		e.preventDefault();
		if(confirm(text_confirm)){
			$('#form').attr('action',$(this).attr('formaction')).submit();
		}
	});

	$('a').click(function(){
		if($(this).attr('href')!=null&&$(this).attr('href').indexOf('uninstall',1)!=-1){
			if(!confirm(text_confirm)){
				return false;
			}
		}
	});

	$('[data-toggle="selected"]').click(function(){
		$('input[name^="selected"]').prop('checked',this.checked);
	});

	$(document).on('focus','.datetime',function(){
		$(this).datetimepicker({
			todayBtn:1,
			autoclose:1,
			minView:0,
			showMeridian:1,
			format:'yyyy-mm-dd hh:mm',
			pickerPosition:'bottom-left'
		});
	});

	$(document).on('focus','.time',function(){
		$(this).datetimepicker({
			autoclose:1,
			startView:1,
			minView:0,
			maxView:1,
			showMeridian:1,
			format:"H:ii P",
			pickerPosition:'bottom-left'
		});
	});
	
	$(document).on('focus','.date',function(e){
		e.stopPropagation();
		$(this).datetimepicker({
			weekStart:1,
			todayBtn:1,
			autoclose:1,
			startView:2,
			minView:2,
			format:'yyyy-mm-dd',
			pickerPosition:'bottom-left'
		}).datetimepicker('show');
	});

	$('input[readonly]').click(function(){
		$(this).select();
	});
	
	$('[rel="tooltip"]').tooltip();

	$('#filter select').change(function(){
		filter();
	});
	$('.nav-collapse a[data-toggle]').click(function(){
		$('.nav-collapse').height('100%');
	});
	
	$('[data-toggle="tab"]').on('click',function(e){
		e.preventDefault();
		$(this).tab('show');
	}).on('shown.bs.tab',function(e){
//		$($(this).attr('href')).find(':text,:password').first().select();
	});
	
	$('.nav-tabs,.nav-pills').each(function(){
		$(this).find('[data-toggle="tab"]:first').tab('show');
	});
	$('.help-block.error').closest('.form-group').addClass('has-error');
	
	$(document).on('click','.list-group .label-trash',function(){
		$(this).parent().remove();
	});

	$('[name="filter_username"],[name="filter_name"],[name="filter_email"],[name="filter_product"],[name="filter_model"],[name="filter_customer"]').each(function(){
		var a=$(this),b=a.data('target');
		a.typeahead({
			source:function(q,process){
				return $.getJSON('index.php?route='+a.data('url')+'/autocomplete&token='+token+'&filter_'+b+'='+encodeURIComponent(q),function(json){
					var data=[];
					$.each(json,function(){
						data.push(this[b]);
					});
					return process(data);
				});
			},
			updater:function(item){
				a.val(item);
				filter();
				return item;
			}
		}).attr('autocomplete','off').click(function(){
			a.select();
		});
	}).first().select();
	
	var a=$('input[name="path"]'),mapped={};
	a.typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/category/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.category_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="parent_id"]').val(mapped[item]);
			return item;
		}
	}).click(function(){
		this.select();
	});

	var a=$('input[name="event_path"]'),mapped={};
	a.typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=calendar/category/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.category_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="parent_id"]').val(mapped[item]);
			return item;
		}
	}).click(function(){
		this.select();
	});
	
	var mapped={};
	$('#return-customer').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=people/customer/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="customer"]').val(item);
			$('input[name="customer_id"]').val(mapped[item].customer_id);
			$('input[name="firstname"]').val(mapped[item].firstname);
			$('input[name="lastname"]').val(mapped[item].lastname);
			$('input[name="email"]').val(mapped[item].email);
			$('input[name="telephone"]').val(mapped[item].telephone);
			return item;
		}
	}).click(function(){
		this.select();
	});
	
	var mapped={};
	$('#return-product').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/product/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="product_id"]').val(mapped[item].product_id);
			$('input[name="model"]').val(mapped[item].model);
			return item;
		}
	}).click(function(){
		this.select();
	});
	
	var mapped={};
	$('#review-product').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/product/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.product_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="product_id"]').val(mapped[item]);
			return item;
		}
	}).click(function(){
		this.select();
	});
	
	var mapped={};
	$('input[name="manufacturer"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/manufacturer/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.manufacturer_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="manufacturer_id"]').val(mapped[item]);
			return item;
		}
	});
	
	$('input[name="category"]').each(function(){
		var a=$(this),b=a.data('target'),mapped={};
		a.typeahead({
			source:function(q,process){
				return $.getJSON('index.php?route=catalog/category/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
					var data=[];
					$.each(json,function(i,item){
						mapped[item.name]=item.category_id;
						data.push(item.name);
					});
					process(data);
				});
			},
			updater:function(item){
				$('#'+b+'-category'+mapped[item]).remove();
				$('#'+b+'-category').append('<div class="list-group-item" id="'+b+'-category'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="'+b+'_category[]" value="'+mapped[item]+'"></div>');
				return null;
			}
		});
	});
	
	var a=$('input[name="filter"]'),b=a.data('target'),mapped={};
	a.typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/filter/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.filter_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#'+b+'-filter'+mapped[item]).remove();
			$('#'+b+'-filter').append('<div class="list-group-item" id="'+b+'-filter'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="'+b+'_filter[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
	var mapped={};
	$('input[name="download"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/download/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.download_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#product-download'+mapped[item]).remove();
			$('#product-download').append('<div class="list-group-item" id="product-download'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="product_download[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
	
	var mapped={};
	$('input[name="related"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/product/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.product_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#product-related'+mapped[item]).remove();
			$('#product-related').append('<div class="list-group-item" id="product-related'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="product_related[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
	
	var mapped={};
	$('input[name="postrelated"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=content/post/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.post_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#post-related'+mapped[item]).remove();
			$('#post-related').append('<div class="list-group-item" id="post-related'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="post_related[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
	
	var mapped={};
	$('input[name="post"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=content/post/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.post_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="post_id"]').val(mapped[item]);
			return item;
		}
	});
	
	var mapped={};
	$('input[name="products"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/product/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.product_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#product'+mapped[item]).remove();
			$('#product').find('.list-group').append('<div class="list-group-item" id="product'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="product[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
	
	var mapped={};
	$('input[name="coupon_products"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/product/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.product_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#coupon-product'+mapped[item]).remove();
			$('#coupon-product').append('<div class="list-group-item" id="coupon-product'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="coupon_product[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
	
	var mapped={};
	$('input[name="affiliates"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=people/customer/autocomplete&token='+token+'&filter_username='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.username]=item.customer_id;
					data.push(item.username);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#affiliate'+mapped[item]).remove();
			$('#affiliate').find('.list-group').append('<div class="list-group-item" id="affiliate'+mapped[item]+'">'+item+'<a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a><input type="hidden" name="affiliate[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
});
function attributeautocomplete(attribute_row){
	var mapped={};
	$('input[name="product_attribute['+attribute_row+'][name]"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/attribute/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.attribute_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="product_attribute['+attribute_row+'][attribute_id]"]').val(mapped[item]);
			return item;
		}
	}).click(function(){
		this.select();
	});
}
function image_upload(field,thumb){
	$('#modal .modal-body').html('<iframe src="index.php?route=common/filemanager&token='+token+'&field='+encodeURIComponent(field)+'" frameborder="no" scrolling="auto"></iframe>');
	$('#modal').on('hidden.bs.modal',function(e){
		if($('#'+field).val()){
			$.ajax({
				url:'index.php?route=common/filemanager/image&token='+token+'&image='+encodeURIComponent($('#'+field).val()),
				dataType:'text',
				success:function(text){
					$('#'+thumb).attr({'src':text,'id':thumb});
				}
			});
		}
	}).modal('show');
};
$(function(){
	$('#attribute tr').each(function(i){
		attributeautocomplete(i);
	});
	$('#button-history').click(function(){
		var a=$(this),b=a.data('action'),c=a.data('id');
		$.ajax({
			url:'index.php?route=sale/'+b+'/history&token='+token+'&'+b+'_id='+c,
			type:'post',
			dataType:'html',
			data:b+'_status_id='+encodeURIComponent($('select[name="'+b+'_status_id"]').val())+'&notify='+encodeURIComponent($('input[name="notify"]').attr('checked') ? 1 :0)+'&append='+encodeURIComponent($('input[name="append"]').attr('checked') ? 1 :0)+'&comment='+encodeURIComponent($('textarea[name="comment"]').val()),
			beforeSend:function(){
				a.button('loading').append($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				a.button('reset');
			},
			success:function(html){
				$('#history').html(html);
				$('textarea[name="comment"]').val(''); 
				$('#'+b+'-status').html($('select[name="'+b+'_status_id"] option:selected').text());
			}
		});
	});

	$('#button-history-returns').click(function(){
		var a=$(this),b=a.data('action'),c=a.data('id');
		$.ajax({
			url:'index.php?route=sale/'+b+'/history&token='+token+'&return_id='+c,
			type:'post',
			dataType:'html',
			data:'return_status_id='+encodeURIComponent($('select[name="return_status_id"]').val())+'&notify='+encodeURIComponent($('input[name="notify"]').attr('checked') ? 1 :0)+'&append='+encodeURIComponent($('input[name="append"]').attr('checked') ? 1 :0)+'&comment='+encodeURIComponent($('textarea[name="comment"]').val()),
			beforeSend:function(){
				a.button('loading').append($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				a.button('reset');
			},
			success:function(html){
				$('#history').html(html);
				$('textarea[name="comment"]').val(''); 
				$('#return-status').html($('select[name="return_status_id"] option:selected').text());
			}
		});
	});
	
	var a=$('#history');
	$(document).on('click','#history .pagination a',function(e){
		e.preventDefault();
		$('#history').load(this.href);
	});
	a.load(a.data('href'));
	
	var a=$('#credit');
	$(document).on('click','#credit .pagination a',function(e){
		e.preventDefault();
		$('#credit').load(this.href);
	});
	a.load(a.data('href'));

	var a=$('#commission');
	$(document).on('click','#commission .pagination a',function(e){
		e.preventDefault();
		$('#commission').load(this.href);
	});
	a.load(a.data('href'));
	
	$('#tab-credit input,#tab-reward input,#tab-commission input').on('keypress',function(e){
		if (e.keyCode==13){               
			e.preventDefault();
			$(this).closest('.tab-pane').find('button[type="button"]').click();
		}
	});
	$(document).on('click','#button-credit',function(e){
		var a=$(this),b=a.data('target');
		$.ajax({
			url:'index.php?route=people/'+b+'/credit&token='+token+'&'+b+'_id='+a.data('id'),
			type:'post',
			dataType:'html',
			data:'description='+encodeURIComponent($('#tab-credit input[name="description"]').val())+'&amount='+encodeURIComponent($('#tab-credit input[name="amount"]').val()),
			beforeSend:function(){
				a.button('loading').append($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				a.button('reset');
			},
			success:function(html){
				$('#credit').html(html);
				$('#tab-credit input[name="amount"],#tab-credit input[name="description"]').val('');
			}
		});
	});
	$(document).on('click','#button-commission',function(e){
		var a=$(this),b=a.data('target');
		$.ajax({
			url:'index.php?route=people/'+b+'/commission&token='+token+'&'+b+'_id='+a.data('id'),
			type:'post',
			dataType:'html',
			data:'description='+encodeURIComponent($('#tab-commission input[name="description"]').val())+'&amount='+encodeURIComponent($('#tab-commission input[name="amount"]').val()),
			beforeSend:function(){
				a.button('loading').append($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				a.button('reset');
			},
			success:function(html){
				$('#commission').html(html);
				$('#tab-commission input[name="amount"],#tab-commission input[name="description"]').val('');
			}
		});
	});
	var a=$('#reward');
	$(document).on('click','#reward .pagination a',function(e){
		e.preventDefault();
		a.load(this.href);
	});
	a.load(a.data('href'));
	
	$(document).on('click', '#info-slug-btn', function(){
		var page_id = getURLVar('page_id');
		var name = $('#language1 input[name="page_description[1][title]"]').val().toLowerCase();
		var slug = $('#slug').val().toLowerCase();
		var send = (name == slug || slug == '') ? name : slug;
		$url = 'index.php?route=content/page/slug&token='+token+'&name='+encodeURIComponent(send);
		if (page_id) {
			$url += '&page_id='+page_id;
		}
		$.ajax({
			url: $url,
			type: 'get',
			dataType: 'json',
			success: function (json) {
				if (json['error']) {
					alertMessage('danger', json['error']);
				} else {
					$('#slug').val(json['slug']);
				}
			}
		});
	});
	
	$(document).on('click', '#cat-slug-btn', function(){
		var category_id = getURLVar('category_id');
		var name = $('#language1 input[name="category_description[1][name]"]').val().toLowerCase();
		var slug = $('#slug').val().toLowerCase();
		var send = (name == slug || slug == '') ? name : slug;
		$url = 'index.php?route=catalog/category/slug&token='+token+'&name='+encodeURIComponent(send);
		if (category_id) {
			$url += '&category_id='+category_id;
		}
		$.ajax({
			url: $url,
			type: 'get',
			dataType: 'json',
			success: function (json) {
				if (json['error']) {
					alertMessage('danger', json['error']);
				} else {
					$('#slug').val(json['slug']);
				}
			}
		});
	});
	
	$(document).on('click', '#product-slug-btn', function(){
		var product_id = getURLVar('product_id');
		var name = $('#language1 input[name="product_description[1][name]"]').val().toLowerCase();
		var slug = $('#slug').val().toLowerCase();
		var send = (name == slug || slug == '') ? name : slug;
		$url = 'index.php?route=catalog/product/slug&token='+token+'&name='+encodeURIComponent(send);
		if (product_id) {
			$url += '&product_id='+product_id;
		}
		$.ajax({
			url: $url,
			type: 'get',
			dataType: 'json',
			success: function (json) {
				if (json['error']) {
					alertMessage('danger', json['error']);
				} else {
					$('#slug').val(json['slug']);
				}
			}
		});
	});
	
	$(document).on('click', '#man-slug-btn', function(){
		var manufacturer_id = getURLVar('manufacturer_id');
		var name = $('input[name="name"]').val().toLowerCase();
		var slug = $('#slug').val().toLowerCase();
		var send = (name == slug || slug == '') ? name : slug;
		$url = 'index.php?route=catalog/manufacturer/slug&token='+token+'&name='+encodeURIComponent(send);
		if (manufacturer_id) {
			$url += '&manufacturer_id='+manufacturer_id;
		}
		$.ajax({
			url: $url,
			type: 'get',
			dataType: 'json',
			success: function (json) {
				if (json['error']) {
					alertMessage('danger', json['error']);
				} else {
					$('#slug').val(json['slug']);
				}
			}
		});
	});
	
	$(document).on('click', '#blog-cat-slug-btn', function(){
		var blog_category_id = getURLVar('category_id');
		var name = $('#language1 input[name="category_description[1][name]"]').val().toLowerCase();
		var slug = $('#slug').val().toLowerCase();
		var send = (name == slug || slug == '') ? name : slug;
		$url = 'index.php?route=content/category/slug&token='+token+'&name='+encodeURIComponent(send);
		if (blog_category_id) {
			$url += '&category_id='+blog_category_id;
		}
		$.ajax({
			url: $url,
			type: 'get',
			dataType: 'json',
			success: function (json) {
				if (json['error']) {
					alertMessage('danger', json['error']);
				} else {
					$('#slug').val(json['slug']);
				}
			}
		});
	});
	
	$(document).on('click', '#post-slug-btn', function(){
		var post_id = getURLVar('post_id');
		var name = $('#language1 input[name="post_description[1][name]').val().toLowerCase();
		var slug = $('#slug').val().toLowerCase();
		var send = (name == slug || slug == '') ? name : slug;
		$url = 'index.php?route=content/post/slug&token='+token+'&name='+encodeURIComponent(send);
		if (post_id) {
			$url += '&post_id='+post_id;
		}
		$.ajax({
			url: $url,
			type: 'get',
			dataType: 'json',
			success: function (json) {
				if (json['error']) {
					alertMessage('danger', json['error']);
				} else {
					$('#slug').val(json['slug']);
				}
			}
		});
	});
});
var alertMessage=function(state,msg){
	var html = '<div class="alert alert-'+state+' alert-dismissable" style="display:none;"><a class="close" data-dismiss="alert" href="#">&times;</a>'+msg+'</div>';
	
	$('#notification').html(html);
	$('#notification>.alert').fadeIn('slow').delay(8000).fadeTo(2000,0,function(){
		$(this).remove();
	});
};
function sendGiftcard(giftcard_id,b){
	$.ajax({
		url:'index.php?route=sale/giftcard/send&token='+token+'&giftcard_id='+giftcard_id,
		type:'post',
		dataType:'json',
		beforeSend:function(){
			alertMessage('warning',b);
		},
		success:function(json){
			if(json['error']){
				alertMessage('danger',json['error']);
			}
			if(json['success']){
				alertMessage('success',json['success']);
			}		
		}
	});
}
/*--- order_info.tpl ---*/
$(function(){
	$('#invoice-generate').click(function(){
		$.ajax({
			url:'index.php?route=sale/order/createinvoiceno&token='+token+'&order_id='+getURLVar('order_id'),
			dataType:'json',
			beforeSend:function(){
				$('#invoice-generate').button('loading').append($('<i>',{class:'icon-loading'}));
			},
			success:function(json){
				if(json['error']){
					$('#invoice-generate').button('reset');
					alertMessage('danger',json['error']);
				}
				if (json['invoice_no']){
					$('#invoice').html(json['invoice_no']);
				}
			}
		});
	});
});
/*--- order_form.tpl ---*/
$(function(){
	var mapped={};
	$('#order-customer').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=people/customer/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="customer"]').val(item);
			$('input[name="customer_id"]').val(mapped[item].customer_id);
			$('input[name="firstname"]').val(mapped[item].firstname);
			$('input[name="lastname"]').val(mapped[item].lastname);
			$('input[name="email"]').val(mapped[item].email);
			$('input[name="telephone"]').val(mapped[item].telephone);
			html = '<option value="0">&mdash;</option>'; 
			for(i in mapped[item].address){
				html += '<option value="'+mapped[item].address[i]['address_id']+'">'+mapped[item].address[i]['firstname']+' '+mapped[item].address[i]['lastname']+','+mapped[item].address[i]['address_1']+','+mapped[item].address[i]['city']+','+mapped[item].address[i]['country']+'</option>';
			}
			$('select[name="shipping_address"]').html(html);
			$('select[name="payment_address"]').html(html);
			$('select[id="customer_group_id"]').button('reset').val(mapped[item]['customer_group_id']).change().button('loading'); 
			return item;
		}
	}).click(function(){
		this.select();
	});
	
	$('select[data-param]').on('change',function(e){
		var $this=$(this),param=$this.data('param');

		$.ajax({
			url:'index.php?route=people/customer/country&token='+token+'&country_id='+$this.val(),
			dataType:'json',
			beforeSend:function(){
				$this.after($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				$('.icon-loading').remove();
			},
			success:function(json){
				if(json['postcode_required']==1){
					$('#postcode-required').show();
				}else{
					$('#postcode-required').hide();
				}
				
				if(json['zone']!=''){
					html = '<option value="">'+param.select+'</option>';
					for(i=0;i<json['zone'].length;i++){
						html += '<option value="'+json['zone'][i]['zone_id']+'"';
						if(json['zone'][i]['zone_id']==param.zone_id){
							html += ' selected=""';
						}
						html += '>'+json['zone'][i]['name']+'</option>';
					}
				}else{
					html = '<option value="0" selected="">'+param.none+'</option>';
				}
				$('select[name="zone_id"]').html(html);
			}
		});
	});

	$('select[name="country_id"]').change();

	var text_select=$('#text_select').val();
	var text_none=$('#text_none').val();
	var text_no_results=$('#text_no_results').val();
	var button_remove=$('#button_remove').val();
	$('[data-provide="countries"]').on('change',function(){
		var a=$(this),b=a.data('target');
		$.ajax({
			url:'index.php?route=sale/order/country&token='+token+'&country_id='+this.value,
			dataType:'json',
			beforeSend:function(){
				a.after($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				$('.icon-loading').remove();
			},
			success:function(json){
				$('.icon-loading').remove();
				if(json['postcode_required']=='1'){
					$('#'+b+'-postcode-required').show();
				}else{
					$('#'+b+'-postcode-required').hide();
				}
				html = '<option value="">'+text_select+'</option>';
				if(json!=''&&json['zone']!=''){
					for(i=0;i<json['zone'].length;i++){
						html += '<option value="'+json['zone'][i]['zone_id']+'"';
						if(json['zone'][i]['zone_id']==a.data('selected')){
							html += ' selected=""';
						}
						html += '>'+json['zone'][i]['name']+'</option>';
					}
				}else{
					html += '<option value="0" selected="">'+text_none+'</option>';
				}
				$('select[name="'+b+'_zone_id"]').html(html);
			}
		});
	});
	
	$('[data-provide="countries"]').change();

	$('select[name="config_country_id"]').on('change',function(e){
		var a=$(this);
		$.ajax({
			url:'index.php?route=setting/setting/country&token='+token+'&country_id='+this.value,
			dataType:'json',
			beforeSend:function(){
				a.after($('<i>',{class:'icon-loading'}));
			},
			complete:function(){
				$('.icon-loading').remove();
			},
			success:function(json){
				html = '<option value="">&ndash;</option>';
				if((typeof(json['zone'])+'undefined')&&json['zone']+''){
					for(i=0;i<json['zone'].length;i++){
						html += '<option value="'+json['zone'][i]['zone_id']+'"';
						if(json['zone'][i]['zone_id']==a.data('id')){
							html += ' selected=""';
						}
						html += '>'+json['zone'][i]['name']+'</option>';
					}
				}else{
					html += '<option value="0" selected="">'+a.data('none')+'</option>';
				}
				$('select[name="config_zone_id"]').html(html);
			}
		});
	});

	$('select[name="config_country_id"]').change();
	$('select[name="config_theme"]').change();
	$('select[name="config_admin_theme"]').change();

	$(document).on('change','select[name="payment_address"]',function(){
		$.ajax({
			url:'index.php?route=people/customer/address&token='+token+'&address_id='+this.value,
			dataType:'json',
			success:function(json){
				if(json!=''){
					$('input[name="payment_firstname"]').val(json['firstname']);
					$('input[name="payment_lastname"]').val(json['lastname']);
					$('input[name="payment_company"]').val(json['company']);
					$('input[name="payment_company_id"]').val(json['company_id']);
					$('input[name="payment_tax_id"]').val(json['tax_id']);
					$('input[name="payment_address_1"]').val(json['address_1']);
					$('input[name="payment_address_2"]').val(json['address_2']);
					$('input[name="payment_city"]').val(json['city']);
					$('input[name="payment_postcode"]').val(json['postcode']);
					$('select[name="payment_country_id"]').val(json['country_id']);
					$('select[name="payment_country_id"]').data('selected',json['zone_id']).change();
				}
			}
		});
	});
	$(document).on('change','select[name="shipping_address"]',function(){
		$.ajax({
			url:'index.php?route=people/customer/address&token='+token+'&address_id='+this.value,
			dataType:'json',
			success:function(json){
				if(json!=''){
					$('input[name="shipping_firstname"]').val(json['firstname']);
					$('input[name="shipping_lastname"]').val(json['lastname']);
					$('input[name="shipping_company"]').val(json['company']);
					$('input[name="shipping_address_1"]').val(json['address_1']);
					$('input[name="shipping_address_2"]').val(json['address_2']);
					$('input[name="shipping_city"]').val(json['city']);
					$('input[name="shipping_postcode"]').val(json['postcode']);
					$('select[name="shipping_country_id"]').val(json['country_id']);
					$('#shipping_zone_id').val(json['zone_id']);
					$('select[name="shipping_country_id"]').data('selected',json['zone_id']).change();
				}
			}
		});
	});
	
	$('select[name="payment"]').bind('change',function(){
		if(this.value){
			$('input[name="payment_method"]').val($('select[name="payment"] option:selected').text());
		}else{
			$('input[name="payment_method"]').val('');
		}
		$('input[name="payment_code"]').val(this.value);
	});
	$('select[name="shipping"]').bind('change',function(){
		if(this.value){
			$('input[name="shipping_method"]').val($('select[name="shipping"] option:selected').text());
		}else{
			$('input[name="shipping_method"]').val('');
		}
		$('input[name="shipping_code"]').val(this.value);
	});
	var mapped={};
	$('input[name="affiliate"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=people/customer/autocomplete&token='+token+'&filter_username='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.username]=item.customer_id;
					data.push(item.username);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="affiliate_id"]').val(mapped[item]);
			return item;
		}
	});
	
	var a=$('#order-product'),mapped={};
	a.typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=catalog/product/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('input[name="product_id"]').val(mapped[item].product_id);
			if(mapped[item]['option']!=''){
				var html = '',s=$('#text_select').val();
				for(i=0;i<mapped[item]['option'].length;i++){
					var o=mapped[item]['option'][i];
					html += '<div class="form-group" id="option-'+o['product_option_id']+'">';
					html += '<label class="control-label col-sm-2">';
					if(o['required']==1){
						html += '<b class="required">*</b> ';
					}
					html += o['name']+':</label>';
					html += '<div class="control-field col-sm-4">';
					if(o['type']=='select'){
						html += '<select name="option['+o['product_option_id']+']" class="form-control">';
						html += '<option value="">'+s+'</option>';
						for(j=0;j<o['option_value'].length;j++){
							ov=o['option_value'][j];
							html += '<option value="'+ov['product_option_value_id']+'">'+ov['name'];
							if(ov['price']){
								html += ' ('+ov['price_prefix']+ov['price']+')';
							}
							html += '</option>';
						}
						html += '</select>';
					}else if(o['type']=='radio'){
						for(j=0;j<o['option_value'].length;j++){
							ov=o['option_value'][j];
							html += '<div class="radio"><label for="option-value-'+ov['product_option_value_id']+'">';
							html += '<input type="radio" name="option['+o['product_option_id']+'][]" value="'+ov['product_option_value_id']+'" id="option-value-'+ov['product_option_value_id']+'">';
							html += ov['name'];
							if(ov['price']){
								html += ' ('+ov['price_prefix']+ov['price']+')';
							}
							html += '</label></div>';
						}
					}else if(o['type']=='checkbox'){
						for(j=0;j<o['option_value'].length;j++){
							ov=o['option_value'][j];
							html += '<div class="checkbox"><label for="option-value-'+ov['product_option_value_id']+'">';
							html += '<input type="checkbox" name="option['+o['product_option_id']+'][]" value="'+ov['product_option_value_id']+'" id="option-value-'+ov['product_option_value_id']+'">';
							html += ov['name'];
							if(ov['price']){
								html += ' ('+ov['price_prefix']+ov['price']+')';
							}
							html += '</label></div>';
						}
					}else if(o['type']=='image'){
						html += '<select name="option['+o['product_option_id']+']" class="form-control">';
						html += '<option value="">'+s+'</option>';
						for(j=0;j<o['option_value'].length;j++){
							ov=o['option_value'][j];
							html += '<option value="'+ov['product_option_value_id']+'">'+ov['name'];
							if(ov['price']){
								html += ' ('+ov['price_prefix']+ov['price']+')';
							}
							html += '</option>';
						}
						html += '</select>';
					}else if(o['type']=='text'){
						html += '<input type="text" name="option['+o['product_option_id']+']" value="'+o['option_value']+'" class="form-control">';
					}else if(o['type']=='textarea'){
						html += '<textarea name="option['+o['product_option_id']+']" class="form-control" rows="4">'+o['option_value']+'</textarea>';
					}else if(o['type']=='file'){
						html += '<button type="button" id="button-option-'+o['product_option_id']+'" class="btn btn-default"><i class="fa fa-upload"></i> '+$('#button_upload').val()+'</button>';
						html += '<input type="hidden" name="option['+o['product_option_id']+']" value="'+o['option_value']+'" id="input-option-'+o['product_option_id']+'">';
					}else if(o['type']=='date'){
						html += '<label class="input-group">';
						html += '<input type="text" name="option['+o['product_option_id']+']" value="'+o['option_value']+'" data-provide="datetimepicker" class="form-control" autocomplete="off">';
						html += '<span class="input-group-addon"><i class="fa fa-calendar"></i></span>';
						html += '</label>';
					}else if(o['type']=='datetime'){
						html += '<label class="input-group">';
						html += '<input type="text" name="option['+o['product_option_id']+']" value="'+o['option_value']+'" data-provide="datetimepicker" class="form-control" data-show-meridian="1" data-date-today-btn="1" data-min-view="0" data-date-format="yyyy-mm-dd hh:mm" autocomplete="off">';
						html += '<span class="input-group-addon"><i class="fa fa-calendar"></i></span>';
						html += '</label>';
					}else if(o['type']=='time'){
						html += '<label class="input-group">';
						html += '<input type="text" name="option['+o['product_option_id']+']" value="'+o['option_value']+'" data-provide="datetimepicker" class="form-control" data-max-view="1" data-start-view="1" data-show-meridian="1" data-min-view="0" data-date-format="hh:ii" autocomplete="off">';
						html += '<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>';
						html += '</label>';
					}
					html += '</div>';		
					html += '</div>';				
				}
				$('#option').html(html);
				for(i=0;i<mapped[item].option.length;i++){
					o=mapped[item].option[i];
					if(o['type']=='file'){
						$('#option').delegate('button[id^="button-option-"]','click',function(){
							var a=$(this);
							$('#form-upload').remove();
							$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display:none;"><input type="file" name="file"></form>');
							$('#form-upload input[name="file"]').on('change',function(){
								$.ajax({
									url:'index.php?route=sale/order/upload&token='+token,
									type:'post',
									dataType:'json',
									data:new FormData($(this).parent()[0]),
									cache:false,
									contentType:false,
									processData:false,
									beforeSend:function(){
										a.button('loading').append($('<i>',{class:'icon-loading'}));
									},
									complete:function(){
										a.button('reset');
									},
									success:function(json){
										$('.alert,.help-block.error').remove();
										$('.has-error').removeClass('has-error');
										if (json['error']){
											a.after('<div class="help-block error">'+json['error']+'</div>').closest('.form-group').addClass('has-error');
										}
										if (json['success']){
											alert(json['success']);
											a.parent().find('input[name^="option"]').val(json['file']);
										}
									}
								});
							}).click();
						});
					}
				}			
			}else{
				$('#option .form-group').remove();
			}
			return item;
		}
	}).click(function(){
		this.select();
	});
	$('#button-product,#button-giftcard,#button-update').on('click',function(){
		var a=$(this);
		data='#tab-customer input[type="text"],#tab-customer input[type="hidden"],#tab-customer input[type="radio"]:checked,#tab-customer input[type="checkbox"]:checked,#tab-customer select,#tab-customer textarea,';
		data+='#tab-payment input[type="text"],#tab-payment input[type="hidden"],#tab-payment input[type="radio"]:checked,#tab-payment input[type="checkbox"]:checked,#tab-payment select,#tab-payment textarea,';
		data+='#tab-shipping input[type="text"],#tab-shipping input[type="hidden"],#tab-shipping input[type="radio"]:checked,#tab-shipping input[type="checkbox"]:checked,#tab-shipping select,#tab-shipping textarea,';
		if (a.attr('id')=='button-product'){
			data+='#tab-product input[type="text"],#tab-product input[type="hidden"],#tab-product input[type="radio"]:checked,#tab-product input[type="checkbox"]:checked,#tab-product select,#tab-product textarea,';
		}else{
			data+='#product input[type="text"],#product input[type="hidden"],#product input[type="radio"]:checked,#product input[type="checkbox"]:checked,#product select,#product textarea,';
		}
		if (a.attr('id')=='button-giftcard'){
			data+='#tab-giftcard input[type="text"],#tab-giftcard input[type="hidden"],#tab-giftcard input[type="radio"]:checked,#tab-giftcard input[type="checkbox"]:checked,#tab-giftcard select,#tab-giftcard textarea,';
		}else{
			data+='#giftcard input[type="text"],#giftcard input[type="hidden"],#giftcard input[type="radio"]:checked,#giftcard input[type="checkbox"]:checked,#giftcard select,#giftcard textarea,';
		}
		data+='#tab-total input[type="text"],#tab-total input[type="hidden"],#tab-total input[type="radio"]:checked,#tab-total input[type="checkbox"]:checked,#tab-total select,#tab-total textarea';
		
		$.ajax({
			url:$('#store_url').val()+'index.php?route=checkout/manual&token='+token,
			type:'post',
			data: $(data),
			dataType:'json',
			beforeSend:function(){
				$('.alert,.text-error').remove();
				a.button('loading').append($('<i>',{class:'icon-loading'}));
			},
			success:function(json){
				$('.alert,.help-block.error').remove();
				$('.has-error').removeClass('has-error');
				a.button('reset');
				if(json['error']){
					if(json['error']['warning']){
						alertMessage('danger',json['error']['warning']);
					}
					if(json['error']['customer']){
						alertMessage('danger',json['error']['customer']);
					}
					if(json['error']['firstname']){
						$('input[name="firstname"]').after('<div class="help-block error">'+json['error']['firstname']+'</div>');
					}
					if(json['error']['lastname']){
						$('input[name="lastname"]').after('<div class="help-block error">'+json['error']['lastname']+'</div>');
					}
					if(json['error']['email']){
						$('input[name="email"]').after('<div class="help-block error">'+json['error']['email']+'</div>');
					}
					if(json['error']['telephone']){
						$('input[name="telephone"]').after('<div class="help-block error">'+json['error']['telephone']+'</div>');
					}
					if(json['error']['payment']){
						$.each(json['error']['payment'],function(key,val){
							$('[name^="payment_'+key+'"]').after('<div class="help-block error">'+val+'</div>');
						});		
					}
					if(json['error']['shipping']){
						$.each(json['error']['shipping'],function(key,val){
							$('[name^="shipping_'+key+'"]').after('<div class="help-block error">'+val+'</div>');
						});
					}
					if(json['error']['product']){
						if(json['error']['product']['option']){
							for(i in json['error']['product']['option']){
								$('#option-'+i+' .controls').append('<div class="help-block error">'+json['error']['product']['option'][i]+'</div>');
							}					
						}
						if(json['error']['product']['stock']){
							alertMessage('danger',json['error']['product']['stock']);
						}
						if(json['error']['product']['minimum']){
							for(i in json['error']['product']['minimum']){
								alertMessage('danger',json['error']['product']['minimum'][i]);
							}					
						}
					}else{
						$('input[name="product"],input[name="product_id"]').val('');
						$('#option .form-group').remove();		
						$('input[name="quantity"]').val('1');		
					}
					if(json['error']['giftcards']){
						$.each(json['error']['giftcards'],function(key,val){
							$('input[name="'+key+'"]').after('<div class="help-block error">'+val+'</div>');
						});
					}else{
						$('input[name="from_name"],input[name="from_email"],input[name="to_name"],input[name="to_email"],textarea[name="message"]').val('');
						$('input[name="amount"]').val('25.00');
					}
					$('.help-block.error').closest('.form-group').addClass('has-error');
					if(json['error']['shipping_method']){
						alertMessage('danger',json['error']['shipping_method']);
					}
					if(json['error']['payment_method']){
						alertMessage('danger',json['error']['payment_method']);
					}
					if(json['error']['coupon']){
						alertMessage('danger',json['error']['coupon']);
					}
					if(json['error']['giftcard']){
						alertMessage('danger',json['error']['giftcard']);
					}
					if(json['error']['reward']){
						alertMessage('danger',json['error']['reward']);
					}
				}else{
					$('input[name="product"],input[name="product_id"],input[name="from_name"],input[name="from_email"],input[name="to_name"],input[name="to_email"],textarea[name="message"]').val('');
					$('#option .form-group').remove();
					$('input[name="quantity"]').val('1');
					$('input[name="amount"]').val('25.00');
				}
				if(json['success']){
					alertMessage('success',json['success']);
				}
				if(json['order_product']!=''){
					var product_row=0,option_row=0,download_row=0;
					html = '';
					for(i=0;i<json['order_product'].length;i++){
						product=json['order_product'][i];
						html += '<tr id="product-row'+product_row+'">';
						html += '<td class="text-center"><a class="label label-danger" title="'+button_remove+'" id="remove'+product_row+'"><i class="fa fa-trash-o fa-lg"></i></a></td>';
						html += '<td>'+product['name']+'<br><input type="hidden" name="order_product['+product_row+'][order_product_id]" value=""><input type="hidden" name="order_product['+product_row+'][product_id]" value="'+product['product_id']+'"><input type="hidden" name="order_product['+product_row+'][name]" value="'+product['name']+'">';
						if (product['option']){
							for(j=0;j<product['option'].length;j++){
								option = product['option'][j];
								
								html += '<div class="help">'+option['name']+':'+option['value']+'</div>';
								html += '<input type="hidden" name="order_product['+product_row+'][order_option]['+option_row+'][order_option_id]" value="'+option['order_option_id']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_option]['+option_row+'][product_option_id]" value="'+option['product_option_id']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_option]['+option_row+'][product_option_value_id]" value="'+option['product_option_value_id']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_option]['+option_row+'][name]" value="'+option['name']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_option]['+option_row+'][value]" value="'+option['value']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_option]['+option_row+'][type]" value="'+option['type']+'">';
								
								option_row++;
							}
						}
						if (product['download']){
							for(j=0;j<product['download'].length;j++){
								download = product['download'][j];
								
								html += '<input type="hidden" name="order_product['+product_row+'][order_download]['+download_row+'][order_download_id]" value="'+download['order_download_id']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_download]['+download_row+'][name]" value="'+download['name']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_download]['+download_row+'][filename]" value="'+download['filename']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_download]['+download_row+'][mask]" value="'+download['mask']+'">';
								html += '<input type="hidden" name="order_product['+product_row+'][order_download]['+download_row+'][remaining]" value="'+download['remaining']+'">';
								
								download_row++;
							}
						}
						html += '</td>';
						html += '<td>'+product['model']+'<input type="hidden" name="order_product['+product_row+'][model]" value="'+product['model']+'"></td>';
						html += '<td class="text-right">'+product['quantity']+'<input type="hidden" name="order_product['+product_row+'][quantity]" value="'+product['quantity']+'"></td>';
						html += '<td class="text-right">'+product['price']+'<input type="hidden" name="order_product['+product_row+'][price]" value="'+product['price']+'"></td>';
						html += '<td class="text-right">'+product['total']+'<input type="hidden" name="order_product['+product_row+'][total]" value="'+product['total']+'"><input type="hidden" name="order_product['+product_row+'][tax]" value="'+product['tax']+'"><input type="hidden" name="order_product['+product_row+'][reward]" value="'+product['reward']+'"></td>';
						html += '</tr>';

						$(document).on('click', '#remove'+product_row, function(e){
							e.preventDefault();
							$('#product-row'+(product_row-1)).remove();
							$('#button-update').trigger('click');
						});

						product_row++;		
					}
					$('#product').html(html);
				}else{
					$('#product').html('<tr><td colspan="6" class="text-center">'+text_no_results+'</td></tr>');
				}
				if(json['order_giftcard']!=''){
					var giftcard_row=0;
					html = '';
					for(i in json['order_giftcard']){
						giftcard=json['order_giftcard'][i];
						html += '<tr id="giftcard-row'+giftcard_row+'">';
						html += '<td class="text-center"><a title="'+button_remove+'" onclick="$("#giftcard-row'+giftcard_row+'").remove();$("#button-update").trigger("click");"><i class="fa fa-trash-o fa-lg"></i></a></td>';
						html += '<td>'+giftcard['description'];
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][order_giftcard_id]" value="">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][giftcard_id]" value="'+giftcard['giftcard_id']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][description]" value="'+giftcard['description']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][code]" value="'+giftcard['code']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][from_name]" value="'+giftcard['from_name']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][from_email]" value="'+giftcard['from_email']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][to_name]" value="'+giftcard['to_name']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][to_email]" value="'+giftcard['to_email']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][giftcard_theme_id]" value="'+giftcard['giftcard_theme_id']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][message]" value="'+giftcard['message']+'">';
						html += '<input type="hidden" name="order_giftcard['+giftcard_row+'][amount]" value="'+giftcard['amount']+'">';
						html += '</td>';
						html += '<td></td>';
						html += '<td class="text-right">1</td>';
						html += '<td class="text-right">'+giftcard['amount']+'</td>';
						html += '<td class="text-right">'+giftcard['amount']+'</td>';
						html += '</tr>';
						giftcard_row++;
					}
					$('#giftcard').html(html);			
				}else{
					$('#giftcard').html('<tr><td colspan="6" class="text-center">'+text_no_results+'</td></tr>');
				}
				if(json['order_product']!=''||json['order_giftcard']!=''||json['order_total']!=''){
					html = '';
					if(json['order_product']!=''){
						for(i=0;i<json['order_product'].length;i++){
							product=json['order_product'][i];
							html += '<tr>';
							html += '<td>'+product['name'];
							if (product['option']){
								for(j=0;j<product['option'].length;j++){
									option = product['option'][j];
									
									html += '<div class="help">'+option['name']+':'+option['value']+'</div>';
								}
							}
							html += '</td>';
							html += '<td>'+product['model']+'</td>';
							html += '<td class="text-right">'+product['quantity']+'</td>';
							html += '<td class="text-right">'+product['price']+'</td>';
							html += '<td class="text-right">'+product['total']+'</td>';
							html += '</tr>';
						}			
					}
					if(json['order_giftcard']!=''){
						for(i in json['order_giftcard']){
							giftcard=json['order_giftcard'][i];
							html += '<tr>';
							html += '<td>'+giftcard['description']+'</td>';
							html += '<td></td>';
							html += '<td class="text-right">1</td>';
							html += '<td class="text-right">'+giftcard['amount']+'</td>';
							html += '<td class="text-right">'+giftcard['amount']+'</td>';
							html += '</tr>';
						}
					}
					var total_row=0;
					for(i in json['order_total']){
						total=json['order_total'][i];
						html += '<tr id="total-row'+total_row+'">';
						html += '<td class="text-right" colspan="4"><input type="hidden" name="order_total['+total_row+'][order_total_id]" value=""><input type="hidden" name="order_total['+total_row+'][code]" value="'+total['code']+'"><input type="hidden" name="order_total['+total_row+'][title]" value="'+total['title']+'"><input type="hidden" name="order_total['+total_row+'][text]" value="'+total['text']+'"><input type="hidden" name="order_total['+total_row+'][value]" value="'+total['value']+'"><input type="hidden" name="order_total['+total_row+'][sort_order]" value="'+total['sort_order']+'">'+total['title']+':</td>';
						html += '<td class="text-right">'+total['value']+'</td>';
						html += '</tr>';
						total_row++;
					}
					$('#total').html(html);
				}else{
					$('#total').html('<tr><td colspan="6" class="text-center">'+text_no_results+'</td></tr>');				
				}
				if(json['shipping_method']){
					html = '<option value="">'+text_select+'</option>';
					for(i in json['shipping_method']){
						html += '<optgroup label="'+json['shipping_method'][i]['title']+'">';
						if (!json['shipping_method'][i]['error']){
							for (j in json['shipping_method'][i]['quote']){
								if(json['shipping_method'][i]['quote'][j]['code']==$('input[name="shipping_code"]').val()){
									html += '<option value="'+json['shipping_method'][i]['quote'][j]['code']+'" selected="">'+json['shipping_method'][i]['quote'][j]['title']+'</option>';
								}else{
									html += '<option value="'+json['shipping_method'][i]['quote'][j]['code']+'">'+json['shipping_method'][i]['quote'][j]['title']+'</option>';
								}
							}	
						}else{
							html += '<option value="" class="text-error" disabled="">'+json['shipping_method'][i]['error']+'</option>';
						}
						html += '</optgroup>';
					}
					$('select[name="shipping"]').html(html);
					if ($('select[name="shipping"] option:selected').val()){
						$('input[name="shipping_method"]').val($('select[name="shipping"] option:selected').text());
					}else{
						$('input[name="shipping_method"]').val('');
					}
					$('input[name="shipping_code"]').val($('select[name="shipping"] option:selected').val());
				}
				if(json['payment_method']){
					html = '<option value="">'+text_select+'</option>';
					for(i in json['payment_method']){
						if(json['payment_method'][i]['code']==$('input[name="payment_code"]').val()){
							html += '<option value="'+json['payment_method'][i]['code']+'" selected="">'+json['payment_method'][i]['title']+'</option>';
						}else{
							html += '<option value="'+json['payment_method'][i]['code']+'">'+json['payment_method'][i]['title']+'</option>';
						}	
					}
					$('select[name="payment"]').html(html);
					if ($('select[name="payment"] option:selected').val()){
						$('input[name="payment_method"]').val($('select[name="payment"] option:selected').text());
					}else{
						$('input[name="payment_method"]').val('');
					}
					$('input[name="payment_code"]').val($('select[name="payment"] option:selected').val());
				}
			}
		});
	});
});

// Download Form
$(document).on('click','#button-upload',function(){
	var a=$(this);
	$('#form-upload').remove();
	$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display:none;"><input type="file" name="file"></form>');
	$('#form-upload input[name="file"]').on('change',function(){
		$.ajax({
			url:'index.php?route=catalog/download/upload&token='+token,
			type:'post',
			dataType:'json',
			data:new FormData($(this).parent()[0]),
			cache:false,
			contentType:false,
			processData:false,
			beforeSend:function(){
				a.button('loading').append($('<i>',{class:'icon-loading'}));
			},	
			complete:function(){
				a.button('reset');
			},
			success:function(json){
				if (json['error']){
					alert(json['error']);
				}
				if (json['success']){
					alert(json['success']);
					$('input[name="filename"]').val(json['filename']);
					$('input[name="mask"]').val(json['mask']);
				}
			}
		});
	}).click();
});
// Contact
$(document).on('click','#button-send',function(){
	var a=$(this);

	$('textarea[name="contact_html"]').val($('#contact-html').code());

	$data = $('#contact-form').serialize();

	$.ajax({
		url:a.data('url'),
		type:'post',
		data:$data,
		dataType:'json',
		beforeSend:function(){
			a.button('loading').append($('<i>',{class:'icon-loading'}));
		},
		complete:function(){
			a.button('reset');
		},
		success:function(json){
			$('.alert,.help-block.error').remove();
			$('.has-error').removeClass('has-error');
			if(json['error']){
				if(json['error']['warning']){
					alertMessage('danger',json['error']['warning']);
				}
				if(json['error']['subject']){
					$('input[name="subject"]').after('<span class="help-block error">'+json['error']['subject']+'</span>').closest('.form-group').addClass('has-error');
				}
				if(json['error']['text']){
					$('#contact-text').parent().append('<span class="help-block error">'+json['error']['text']+'</span>').closest('.form-group').addClass('has-error');
				}
				if(json['error']['html']){
					$('#contact-html').parent().append('<span class="help-block error">'+json['error']['html']+'</span>').closest('.form-group').addClass('has-error');
				}			
			}
			if(json['success']){
				if(json['next']){
					alertMessage('success',json['success']);
					send(json['next']);
				} else {
					if(json['redirect']) {
						location = json['redirect'];
					}
				}
			}
		}
	});
});
$(function(){
	$('select[name="to"]').bind('change',function(){
		$('#mail .to').hide();
		$('#mail #to-'+$(this).val().replace('_','-')).show().find('input[type="text"]').select();
	});
	$('select[name="to"]').change();
	var mapped={};
	$('input[name="customers"]').typeahead({
		source:function(q,process){
			return $.getJSON('index.php?route=people/customer/autocomplete&token='+token+'&filter_name='+encodeURIComponent(q),function(json){
				var data=[];
				$.each(json,function(i,item){
					mapped[item.name]=item.customer_id;
					data.push(item.name);
				});
				process(data);
			});
		},
		updater:function(item){
			$('#customer'+mapped[item]).remove();
			$('#customer').find('.list-group').append('<div class="list-group-item" id="customer'+mapped[item]+'"><a class="label label-danger label-trash"><i class="fa fa-trash-o fa-lg"></i></a>'+item+'<input type="hidden" name="customer[]" value="'+mapped[item]+'"></div>');
			return null;
		}
	});
});
$.fn.tabs=function(){
	var b=$(this);
	this.each(function(){
		var a=$(this);
		$(a.attr("href")).hide();
		a.click(function(){
			b.removeClass("selected").each(function(c,d){
				$($(d).attr("href")).hide()
			});
			$(this).addClass("selected");
			$($(this).attr("href")).show();
			return false
		})
	});
	b.show().first().click()
}